<!doctype html><html lang="en">
 <head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <meta content="#3c790a" name="theme-color">
  <title>File System Standard</title>
  <link crossorigin href="https://resources.whatwg.org/spec.css" rel="stylesheet">
  <link crossorigin href="https://resources.whatwg.org/standard.css" rel="stylesheet">
  <link crossorigin href="https://resources.whatwg.org/standard-shared-with-dev.css" rel="stylesheet">
  <link crossorigin href="https://resources.whatwg.org/logo-fs.svg" rel="icon">
<script async crossorigin src="https://resources.whatwg.org/file-issue.js"></script>
<script async crossorigin src="https://resources.whatwg.org/commit-snapshot-shortcut-key.js"></script>
<script crossorigin defer src="https://resources.whatwg.org/standard-mdn-annos.js"></script>
<style>
.domintro dt {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;

    padding-top: 0.5em;
    padding-bottom: 1em;
}
.domintro dt a {
    color: inherit; border-bottom-style: none;
}
.domintro dt code {
    font-size: inherit;
}
.domintro::before {
    content: 'For web developers (non-normative)';
    text-transform: initial;

}
</style>
<style>/* style-issues */

a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* style-var-click-highlighting */

    var { cursor: pointer; }
    var.selected0 { background-color: #F4D200; box-shadow: 0 0 0 2px #F4D200; }
    var.selected1 { background-color: #FF87A2; box-shadow: 0 0 0 2px #FF87A2; }
    var.selected2 { background-color: #96E885; box-shadow: 0 0 0 2px #96E885; }
    var.selected3 { background-color: #3EEED2; box-shadow: 0 0 0 2px #3EEED2; }
    var.selected4 { background-color: #EACFB6; box-shadow: 0 0 0 2px #EACFB6; }
    var.selected5 { background-color: #82DDFF; box-shadow: 0 0 0 2px #82DDFF; }
    var.selected6 { background-color: #FFBCF2; box-shadow: 0 0 0 2px #FFBCF2; }
    </style>
 <body class="h-entry status-LS">
  <div class="head">
    <a class="logo" href="https://whatwg.org/"> <img alt="WHATWG" crossorigin height="100" src="https://resources.whatwg.org/logo-fs.svg"> </a> 
   <hgroup>
    <h1 class="p-name no-ref" id="title">File System</h1>
    <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Living Standard — Last Updated <time class="dt-updated" datetime="1970-01-01">1 January 1970</time></span></h2>
   </hgroup>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>Participate:
     <dd><a href="https://github.com/whatwg/fs">GitHub whatwg/fs</a> (<a href="https://github.com/whatwg/fs/issues/new">new issue</a>, <a href="https://github.com/whatwg/fs/issues">open issues</a>)
     <dd><a href="https://whatwg.org/chat">Chat on Matrix</a>
     <dt>Commits:
     <dd><a href="https://github.com/whatwg/fs/commits">GitHub whatwg/fs/commits</a>
     <dd><a href="/commit-snapshots/[COMMIT-SHA]/" id="commit-snapshot-link">Snapshot as of this commit</a>
     <dd><a href="https://twitter.com/whatfilesystem">@whatfilesystem</a>
     <dt>Tests:
     <dd><a href="https://github.com/web-platform-tests/wpt/tree/master/fs">web-platform-tests fs/</a> (<a href="https://github.com/web-platform-tests/wpt/labels/fs">ongoing work</a>)
    </dl>
   </div>
   <div data-fill-with="warning"></div>
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>File System defines infrastructure for file systems as well as their API.</p>
  </div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li>
     <a href="#files-and-directories"><span class="secno">2</span> <span class="content">Files and Directories</span></a>
     <ol class="toc">
      <li><a href="#concepts"><span class="secno">2.1</span> <span class="content">Concepts</span></a>
      <li>
       <a href="#api-filesystemhandle"><span class="secno">2.2</span> <span class="content">The <code class="idl"><span>FileSystemHandle</span></code> interface</span></a>
       <ol class="toc">
        <li><a href="#api-filesystemhandle-issameentry"><span class="secno">2.2.1</span> <span class="content">The <code class="idl"><span>isSameEntry()</span></code> method</span></a>
       </ol>
      <li>
       <a href="#api-filesystemfilehandle"><span class="secno">2.3</span> <span class="content">The <code class="idl"><span>FileSystemFileHandle</span></code> interface</span></a>
       <ol class="toc">
        <li><a href="#api-filesystemfilehandle-getfile"><span class="secno">2.3.1</span> <span class="content">The <code class="idl"><span>getFile()</span></code> method</span></a>
        <li><a href="#api-filesystemfilehandle-createwritable"><span class="secno">2.3.2</span> <span class="content">The <code class="idl"><span>createWritable()</span></code> method</span></a>
        <li><a href="#api-filesystemfilehandle-createsyncaccesshandle"><span class="secno">2.3.3</span> <span class="content">The <code class="idl"><span>createSyncAccessHandle()</span></code> method</span></a>
       </ol>
      <li>
       <a href="#api-filesystemdirectoryhandle"><span class="secno">2.4</span> <span class="content">The <code class="idl"><span>FileSystemDirectoryHandle</span></code> interface</span></a>
       <ol class="toc">
        <li><a href="#api-filesystemdirectoryhandle-asynciterable"><span class="secno">2.4.1</span> <span class="content">Directory iteration</span></a>
        <li><a href="#api-filesystemdirectoryhandle-getfilehandle"><span class="secno">2.4.2</span> <span class="content">The <code class="idl"><span>getFileHandle()</span></code> method</span></a>
        <li><a href="#api-filesystemdirectoryhandle-getdirectoryhandle"><span class="secno">2.4.3</span> <span class="content">The <code class="idl"><span>getDirectoryHandle()</span></code> method</span></a>
        <li><a href="#api-filesystemdirectoryhandle-removeentry"><span class="secno">2.4.4</span> <span class="content">The <code class="idl"><span>removeEntry()</span></code> method</span></a>
        <li><a href="#api-filesystemdirectoryhandle-resolve"><span class="secno">2.4.5</span> <span class="content">The <code class="idl"><span>resolve()</span></code> method</span></a>
       </ol>
      <li>
       <a href="#api-filesystemwritablefilestream"><span class="secno">2.5</span> <span class="content">The <code class="idl"><span>FileSystemWritableFileStream</span></code> interface</span></a>
       <ol class="toc">
        <li><a href="#api-filesystemwritablefilestream-write"><span class="secno">2.5.1</span> <span class="content">The <code class="idl"><span>write()</span></code> method</span></a>
        <li><a href="#api-filesystemwritablefilestream-seek"><span class="secno">2.5.2</span> <span class="content">The <code class="idl"><span>seek()</span></code> method</span></a>
        <li><a href="#api-filesystemwritablefilestream-truncate"><span class="secno">2.5.3</span> <span class="content">The <code class="idl"><span>truncate()</span></code> method</span></a>
       </ol>
      <li>
       <a href="#api-filesystemsyncaccesshandle"><span class="secno">2.6</span> <span class="content">The <code class="idl"><span>FileSystemSyncAccessHandle</span></code> interface</span></a>
       <ol class="toc">
        <li><a href="#api-filesystemsyncaccesshandle-read"><span class="secno">2.6.1</span> <span class="content">The <code class="idl"><span>read()</span></code> method</span></a>
        <li><a href="#api-filesystemsyncaccesshandle-write"><span class="secno">2.6.2</span> <span class="content">The <code class="idl"><span>write()</span></code> method</span></a>
        <li><a href="#api-filesystemsyncaccesshandle-truncate"><span class="secno">2.6.3</span> <span class="content">The <code class="idl"><span>truncate()</span></code> method</span></a>
        <li><a href="#api-filesystemsyncaccesshandle-getsize"><span class="secno">2.6.4</span> <span class="content">The <code class="idl"><span>getSize()</span></code> method</span></a>
        <li><a href="#api-filesystemsyncaccesshandle-flush"><span class="secno">2.6.5</span> <span class="content">The <code class="idl"><span>flush()</span></code> method</span></a>
        <li><a href="#api-filesystemsyncaccesshandle-close"><span class="secno">2.6.6</span> <span class="content">The <code class="idl"><span>close()</span></code> method</span></a>
       </ol>
     </ol>
    <li><a href="#sandboxed-filesystem"><span class="secno">3</span> <span class="content">Accessing the Origin Private File System</span></a>
    <li><a href="#acks"><span class="secno"></span> <span class="content">Acknowledgments</span></a>
    <li><a href="#ipr"><span class="secno"></span> <span class="content">Intellectual property rights</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>This document defines fundamental infrastructure for file system APIs. In addition, it defines an
API that makes it possible for websites to get access to a file system directory without having to
first prompt the user for access. This enables use cases where a website wants to save data to disk
before a user has picked a location to save to, without forcing the website to use a completely
different storage mechanism with a different API for such files. The entry point for this is the <code class="idl"><a data-link-type="idl" href="#dom-storagemanager-getdirectory" id="ref-for-dom-storagemanager-getdirectory">navigator.storage.getDirectory()</a></code> method.</p>
   <h2 class="heading settled" data-level="2" id="files-and-directories"><span class="secno">2. </span><span class="content">Files and Directories</span><a class="self-link" href="#files-and-directories"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="concepts"><span class="secno">2.1. </span><span class="content">Concepts</span><a class="self-link" href="#concepts"></a></h3>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="entry">entry</dfn> is either a <a data-link-type="dfn" href="#file" id="ref-for-file">file entry</a> or a <a data-link-type="dfn" href="#directory" id="ref-for-directory">directory entry</a>.</p>
   <p>Each <a data-link-type="dfn" href="#entry" id="ref-for-entry">entry</a> has an associated <dfn class="dfn-paneled" data-dfn-for="entry" data-dfn-type="dfn" data-noexport id="entry-query-access">query access</dfn> algorithm, which takes "<code>read</code>"
or "<code>readwrite</code>" <var>mode</var> and returns a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#enumdef-permissionstate" id="ref-for-enumdef-permissionstate">PermissionState</a></code>. Unless specified
otherwise it returns "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied">denied</a></code>". The algorithm is allowed to throw.</p>
   <p>Each <a data-link-type="dfn" href="#entry" id="ref-for-entry①">entry</a> has an associated <dfn class="dfn-paneled" data-dfn-for="entry" data-dfn-type="dfn" data-noexport id="entry-request-access">request access</dfn> algorithm, which takes
"<code>read</code>" or "<code>readwrite</code>" <var>mode</var> and returns a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#enumdef-permissionstate" id="ref-for-enumdef-permissionstate①">PermissionState</a></code>. Unless specified
otherwise it returns "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-denied" id="ref-for-dom-permissionstate-denied①">denied</a></code>". The algorithm is allowed to throw.</p>
   <p class="note" role="note"><span>Note:</span> Implementations that only implement this specification and not dependent specifications do not
need to bother implementing <a data-link-type="dfn" href="#entry" id="ref-for-entry②">entry</a>'s <a data-link-type="dfn" href="#entry-query-access" id="ref-for-entry-query-access">query access</a> and <a data-link-type="dfn" href="#entry-request-access" id="ref-for-entry-request-access">request access</a>.</p>
   <p>Each <a data-link-type="dfn" href="#entry" id="ref-for-entry③">entry</a> has an associated <dfn class="dfn-paneled" data-dfn-for="entry" data-dfn-type="dfn" data-noexport id="entry-name">name</dfn> (a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string">string</a>).</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="valid-file-name">valid file name</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①">string</a> that is not an empty string, is not equal to "." or "..",
and does not contain '/' or any other character used as path separator on the underlying platform.</p>
   <p class="note" role="note"><span>Note:</span> This means that '\' is not allowed in names on Windows, but might be allowed on
other operating systems. Additionally underlying file systems might have further restrictions
on what names are or aren’t allowed, so a string merely being a <a data-link-type="dfn" href="#valid-file-name" id="ref-for-valid-file-name">valid file name</a> is not
a guarantee that creating a file or directory with that name will succeed.</p>
   <p class="XXX"> We should consider having further normative restrictions on file names that will
never be allowed using this API, rather than leaving it entirely up to underlying file
systems.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="file|file entry" data-noexport id="file">file entry</dfn> additionally consists of <dfn class="dfn-paneled" data-dfn-for="file entry" data-dfn-type="dfn" data-noexport id="file-entry-binary-data">binary data</dfn> (a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence">byte sequence</a>), a <dfn class="dfn-paneled" data-dfn-for="file entry" data-dfn-type="dfn" data-noexport id="file-entry-modification-timestamp">modification timestamp</dfn> (a number representing the number of milliseconds since the <a data-link-type="dfn" href="https://w3c.github.io/FileAPI/#UnixEpoch" id="ref-for-UnixEpoch">Unix Epoch</a>),
a <dfn class="dfn-paneled" data-dfn-for="file entry" data-dfn-type="dfn" data-noexport id="file-entry-lock">lock</dfn> (a string that may exclusively be "<code>open</code>", "<code>taken-exclusive</code>" or "<code>taken-shared</code>")
and a <dfn class="dfn-paneled" data-dfn-for="file entry" data-dfn-type="dfn" data-noexport id="file-entry-shared-lock-count">shared lock count</dfn> (a number representing the number shared locks that are taken at a given point in time).</p>
   <div class="algorithm" data-algorithm="take" data-algorithm-for="file entry/lock">
     To <dfn class="dfn-paneled" data-dfn-for="file entry/lock" data-dfn-type="dfn" data-noexport id="file-entry-lock-take">take</dfn> a <a data-link-type="dfn" href="#file-entry-lock" id="ref-for-file-entry-lock">lock</a> with a <var>value</var> of "<code>exclusive</code>" or "<code>shared</code>" on a given <a data-link-type="dfn" href="#file" id="ref-for-file①">file entry</a> <var>file</var>: 
    <ol>
     <li data-md>
      <p>Let <var>lock</var> be the <var>file</var>’s <a data-link-type="dfn" href="#file-entry-lock" id="ref-for-file-entry-lock①">lock</a>.</p>
     <li data-md>
      <p>Let <var>count</var> be the <var>file</var>’s <a data-link-type="dfn" href="#file-entry-shared-lock-count" id="ref-for-file-entry-shared-lock-count">shared lock count</a>.</p>
     <li data-md>
      <p>If <var>value</var> is "<code>exclusive</code>":</p>
      <ol>
       <li data-md>
        <p>If <var>lock</var> is "<code>open</code>":</p>
        <ol>
         <li data-md>
          <p>Set lock to "<code>taken-exclusive</code>".</p>
         <li data-md>
          <p>Return true.</p>
        </ol>
      </ol>
     <li data-md>
      <p>If <var>value</var> is "<code>shared</code>":</p>
      <ol>
       <li data-md>
        <p>If <var>lock</var> is "<code>open</code>":</p>
        <ol>
         <li data-md>
          <p>Set <var>lock</var> to "<code>taken-shared</code>".</p>
         <li data-md>
          <p>Set <var>count</var> to 1.</p>
         <li data-md>
          <p>Return true.</p>
        </ol>
       <li data-md>
        <p>Otherwise, if <var>lock</var> is "<code>taken-shared</code>":</p>
        <ol>
         <li data-md>
          <p>Increase <var>count</var> by one.</p>
         <li data-md>
          <p>Return true.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Return false.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="release" data-algorithm-for="file entry/lock">
     To <dfn class="dfn-paneled" data-dfn-for="file entry/lock" data-dfn-type="dfn" data-noexport id="file-entry-lock-release">release</dfn> a <a data-link-type="dfn" href="#file-entry-lock" id="ref-for-file-entry-lock②">lock</a> on a given <a data-link-type="dfn" href="#file" id="ref-for-file②">file entry</a> <var>file</var>,
run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>lock</var> be the <var>file</var>’s associated <a data-link-type="dfn" href="#file-entry-lock" id="ref-for-file-entry-lock③">lock</a>.</p>
     <li data-md>
      <p>Let <var>count</var> be the <var>file</var>’s <a data-link-type="dfn" href="#file-entry-shared-lock-count" id="ref-for-file-entry-shared-lock-count①">shared lock count</a>.</p>
     <li data-md>
      <p>If <var>lock</var> is "<code>taken-shared</code>":</p>
      <ol>
       <li data-md>
        <p>Decrease <var>count</var> by one.</p>
       <li data-md>
        <p>If <var>count</var> is 0, set <var>lock</var> to "<code>open</code>".</p>
      </ol>
     <li data-md>
      <p>Otherwise, set <var>lock</var> to "<code>open</code>".</p>
    </ol>
   </div>
   <p class="note" role="note"><span>Note:</span> Locks help prevent concurrent modifications to a file. A <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream">FileSystemWritableFileStream</a></code> requires a shared lock, while a <code class="idl"><a data-link-type="idl" href="#filesystemsyncaccesshandle" id="ref-for-filesystemsyncaccesshandle">FileSystemSyncAccessHandle</a></code> requires an exclusive one.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="directory|directory entry" data-noexport id="directory">directory entry</dfn> additionally consists of a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set">set</a> of <dfn class="dfn-paneled" data-dfn-for="directory entry" data-dfn-type="dfn" data-noexport id="directory-entry-children">children</dfn>, which are themselves <a data-link-type="dfn" href="#entry" id="ref-for-entry④">entries</a>. Each member is either a <a data-link-type="dfn" href="#file" id="ref-for-file③">file</a> or a <a data-link-type="dfn" href="#directory" id="ref-for-directory①">directory</a>.</p>
   <p>An <a data-link-type="dfn" href="#entry" id="ref-for-entry⑤">entry</a> <var>entry</var> should be <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">contained</a> in the <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children">children</a> of at most one <a data-link-type="dfn" href="#directory" id="ref-for-directory②">directory entry</a>, and that directory entry is also known as <var>entry</var>’s <dfn class="dfn-paneled" data-dfn-for="entry" data-dfn-type="dfn" data-noexport id="entry-parent">parent</dfn>.
An <a data-link-type="dfn" href="#entry" id="ref-for-entry⑥">entry</a>'s <a data-link-type="dfn" href="#entry-parent" id="ref-for-entry-parent">parent</a> is null if no such directory entry exists.</p>
   <p class="note" role="note"><span>Note:</span> Two different <a data-link-type="dfn" href="#entry" id="ref-for-entry⑦">entries</a> can represent the same file or directory on disk, in which
case it is possible for both entries to have a different parent, or for one entry to have a
parent while the other entry does not have a parent.</p>
   <p><a data-link-type="dfn" href="#entry" id="ref-for-entry⑧">Entries</a> can (but don’t have to) be backed by files on the host operating system’s local file system,
so it is possible for the <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data">binary data</a>, <a data-link-type="dfn" href="#file-entry-modification-timestamp" id="ref-for-file-entry-modification-timestamp">modification timestamp</a>,
and <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children①">children</a> of entries to be modified by applications outside of this specification.
Exactly how external changes are reflected in the data structures defined by this specification,
as well as how changes made to the data structures defined here are reflected externally
is left up to individual user-agent implementations.</p>
   <p>An <a data-link-type="dfn" href="#entry" id="ref-for-entry⑨">entry</a> <var>a</var> is <dfn class="dfn-paneled" data-dfn-for="entry" data-dfn-type="dfn" data-noexport id="entry-the-same-as">the same as</dfn> an <a data-link-type="dfn" href="#entry" id="ref-for-entry①⓪">entry</a> <var>b</var> if <var>a</var> is equal to <var>b</var>, or
if <var>a</var> and <var>b</var> are backed by the same file or directory on the local file system.</p>
   <p class="XXX"> TODO: Explain better how entries map to files on disk (multiple entries can map to the same file or
directory on disk but an entry doesn’t have to map to any file on disk).</p>
   <div class="algorithm" data-algorithm="resolve" data-algorithm-for="entry">
     To <dfn class="dfn-paneled" data-dfn-for="entry" data-dfn-type="dfn" data-noexport id="entry-resolve">resolve</dfn> an <a data-link-type="dfn" href="#entry" id="ref-for-entry①①">entry</a> <var>child</var> relative to a <a data-link-type="dfn" href="#directory" id="ref-for-directory③">directory entry</a> <var>root</var>,
run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise" id="ref-for-a-new-promise">a new promise</a>.</p>
     <li data-md>
      <p>Run these steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>child</var> is <a data-link-type="dfn" href="#entry-the-same-as" id="ref-for-entry-the-same-as">the same as</a> <var>root</var>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve">resolve</a> <var>result</var> with an empty list, and abort.</p>
       <li data-md>
        <p>Let <var>childPromises</var> be « ».</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate">For each</a> <var>entry</var> of <var>root</var>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry">entry</a>'s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children②">children</a>:</p>
        <ol>
         <li data-md>
          <p>Let <var>p</var> be the result of <a data-link-type="dfn" href="#entry-resolve" id="ref-for-entry-resolve">resolving</a> <var>child</var> relative to <var>entry</var>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">Append</a> <var>p</var> to <var>childPromises</var>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#upon-fulfillment" id="ref-for-upon-fulfillment">Upon fulfillment</a> of <var>p</var> with value <var>path</var>:</p>
          <ol>
           <li data-md>
            <p>If <var>path</var> is not null:</p>
            <ol>
             <li data-md>
              <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-prepend" id="ref-for-list-prepend">Prepend</a> <var>entry</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name">name</a> to <var>path</var>.</p>
             <li data-md>
              <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve①">Resolve</a> <var>result</var> with <var>path</var>.</p>
            </ol>
          </ol>
        </ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#wait-for-all" id="ref-for-wait-for-all">Wait for all</a> <var>childPromises</var>, with the these success steps:</p>
        <ol>
         <li data-md>
          <p>If <var>result</var> hasn’t been resolved yet, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve②">resolve</a> <var>result</var> with <code>null</code>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.2" id="api-filesystemhandle"><span class="secno">2.2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#filesystemhandle" id="ref-for-filesystemhandle">FileSystemHandle</a></code> interface</span><a class="self-link" href="#api-filesystemhandle"></a></h3>
<pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-filesystemhandlekind"><code><c- g>FileSystemHandleKind</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemHandleKind" data-dfn-type="enum-value" data-export id="dom-filesystemhandlekind-file"><code><c- s>"file"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemHandleKind" data-dfn-type="enum-value" data-export id="dom-filesystemhandlekind-directory"><code><c- s>"directory"</c-></code></dfn>,
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->), <a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext" id="ref-for-SecureContext"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable" id="ref-for-serializable"><c- g>Serializable</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="filesystemhandle"><code><c- g>FileSystemHandle</c-></code></dfn> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-filesystemhandlekind" id="ref-for-enumdef-filesystemhandlekind"><c- n>FileSystemHandleKind</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="FileSystemHandleKind" href="#dom-filesystemhandle-kind" id="ref-for-dom-filesystemhandle-kind"><c- g>kind</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="USVString" href="#dom-filesystemhandle-name" id="ref-for-dom-filesystemhandle-name"><c- g>name</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemhandle-issameentry" id="ref-for-dom-filesystemhandle-issameentry"><c- g>isSameEntry</c-></a>(<a data-link-type="idl-name" href="#filesystemhandle" id="ref-for-filesystemhandle①"><c- n>FileSystemHandle</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemHandle/isSameEntry(other)" data-dfn-type="argument" data-export id="dom-filesystemhandle-issameentry-other-other"><code><c- g>other</c-></code><a class="self-link" href="#dom-filesystemhandle-issameentry-other-other"></a></dfn>);
};
</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#filesystemhandle" id="ref-for-filesystemhandle②">FileSystemHandle</a></code> object represents an <a data-link-type="dfn" href="#entry" id="ref-for-entry①②">entry</a>. Each <code class="idl"><a data-link-type="idl" href="#filesystemhandle" id="ref-for-filesystemhandle③">FileSystemHandle</a></code> object is associated
with an <dfn class="dfn-paneled" data-dfn-for="FileSystemHandle" data-dfn-type="dfn" data-noexport id="filesystemhandle-entry">entry</dfn> (an <a data-link-type="dfn" href="#entry" id="ref-for-entry①③">entry</a>). Multiple separate objects implementing
the <code class="idl"><a data-link-type="idl" href="#filesystemhandle" id="ref-for-filesystemhandle④">FileSystemHandle</a></code> interface can all be associated with the same <a data-link-type="dfn" href="#entry" id="ref-for-entry①④">entry</a> simultaneously.</p>
   <div class="algorithm" data-algorithm="serialization steps">
     <code class="idl"><a data-link-type="idl" href="#filesystemhandle" id="ref-for-filesystemhandle⑤">FileSystemHandle</a></code> objects are <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable-objects" id="ref-for-serializable-objects">serializable objects</a>. 
    <p>Their <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#serialization-steps" id="ref-for-serialization-steps">serialization steps</a>, given <var>value</var>, <var>serialized</var> and <var>forStorage</var> are:</p>
    <ol>
     <li data-md>
      <p>Set <var>serialized</var>.[[Origin]] to <var>value</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object">relevant settings object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin">origin</a>.</p>
     <li data-md>
      <p>Set <var>serialized</var>.[[Entry]] to <var>value</var>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①">entry</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="deserialization steps">
     Their <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#deserialization-steps" id="ref-for-deserialization-steps">deserialization steps</a>, given <var>serialized</var> and <var>value</var> are: 
    <ol>
     <li data-md>
      <p>If <var>serialized</var>.[[Origin]] is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/origin.html#same-origin" id="ref-for-same-origin">same origin</a> with <var>value</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object①">relevant settings object</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin①">origin</a>,
 then throw a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#datacloneerror" id="ref-for-datacloneerror">DataCloneError</a></code>.</p>
     <li data-md>
      <p>Set <var>value</var>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry②">entry</a> to <var>serialized</var>.[[Entry]]</p>
    </ol>
   </div>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-kind" id="ref-for-dom-filesystemhandle-kind①">kind</a></code>
     <dd data-md>
      <p>Returns <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlekind-file" id="ref-for-dom-filesystemhandlekind-file">"file"</a></code> if <var>handle</var> is a <code class="idl"><a data-link-type="idl" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle">FileSystemFileHandle</a></code>,
 or <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlekind-directory" id="ref-for-dom-filesystemhandlekind-directory">"directory"</a></code> if <var>handle</var> is a <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle">FileSystemDirectoryHandle</a></code>.</p>
      <p>This can be used to distinguish files from directories when iterating over the contents
 of a directory.</p>
     <dt data-md><var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-name" id="ref-for-dom-filesystemhandle-name①">name</a></code>
     <dd data-md>
      <p>Returns the <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name①">name</a> of the entry represented by <var>handle</var>.</p>
    </dl>
   </div>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemHandle" data-dfn-type="attribute" data-export id="dom-filesystemhandle-kind"><code>kind</code></dfn> getter steps are to return <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlekind-file" id="ref-for-dom-filesystemhandlekind-file①">"file"</a></code> if <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this">this</a> is a <a data-link-type="dfn" href="#file" id="ref-for-file④">file entry</a>; otherwise <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandlekind-directory" id="ref-for-dom-filesystemhandlekind-directory①">"directory"</a></code>.</p>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemHandle" data-dfn-type="attribute" data-export id="dom-filesystemhandle-name"><code>name</code></dfn> getter steps are to return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①">this</a>'s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name②">name</a>.</p>
   <h4 class="heading settled" data-level="2.2.1" id="api-filesystemhandle-issameentry"><span class="secno">2.2.1. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-issameentry" id="ref-for-dom-filesystemhandle-issameentry①">isSameEntry()</a></code> method</span><a class="self-link" href="#api-filesystemhandle-issameentry"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>same</var> = await <var>handle1</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemhandle-issameentry" id="ref-for-dom-filesystemhandle-issameentry②">isSameEntry</a></code>( <var>handle2</var> )
     <dd data-md>
      <p>Returns true if <var>handle1</var> and <var>handle2</var> represent the same file or directory.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="isSameEntry(other)" data-algorithm-for="FileSystemHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemHandle" data-dfn-type="method" data-export id="dom-filesystemhandle-issameentry"><code>isSameEntry(<var>other</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>realm</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm">relevant Realm</a>.</p>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise" id="ref-for-a-new-promise①">a new promise</a> in <var>realm</var>.</p>
     <li data-md>
      <p>Run these steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③">this</a>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry③">entry</a> is <a data-link-type="dfn" href="#entry-the-same-as" id="ref-for-entry-the-same-as①">the same as</a> <var>other</var>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry④">entry</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve③">resolve</a> <var>p</var> with true.</p>
       <li data-md>
        <p>Otherwise <a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve④">resolve</a> <var>p</var> with false.</p>
      </ol>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.3" id="api-filesystemfilehandle"><span class="secno">2.3. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle①">FileSystemFileHandle</a></code> interface</span><a class="self-link" href="#api-filesystemfilehandle"></a></h3>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-filesystemcreatewritableoptions"><code><c- g>FileSystemCreateWritableOptions</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="FileSystemCreateWritableOptions" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-filesystemcreatewritableoptions-keepexistingdata"><code><c- g>keepExistingData</c-></code></dfn> = <c- b>false</c->;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->), <a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext" id="ref-for-SecureContext①"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable" id="ref-for-serializable①"><c- g>Serializable</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="filesystemfilehandle"><code><c- g>FileSystemFileHandle</c-></code></dfn> : <a data-link-type="idl-name" href="#filesystemhandle" id="ref-for-filesystemhandle⑥"><c- n>FileSystemHandle</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://w3c.github.io/FileAPI/#dfn-file" id="ref-for-dfn-file"><c- n>File</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemfilehandle-getfile" id="ref-for-dom-filesystemfilehandle-getfile"><c- g>getFile</c-></a>();
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise②"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream①"><c- n>FileSystemWritableFileStream</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemfilehandle-createwritable" id="ref-for-dom-filesystemfilehandle-createwritable"><c- g>createWritable</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemcreatewritableoptions" id="ref-for-dictdef-filesystemcreatewritableoptions"><c- n>FileSystemCreateWritableOptions</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemFileHandle/createWritable(options), FileSystemFileHandle/createWritable()" data-dfn-type="argument" data-export id="dom-filesystemfilehandle-createwritable-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-filesystemfilehandle-createwritable-options-options"></a></dfn> = {});
  [<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=<c- n>DedicatedWorker</c->]
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise③"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemsyncaccesshandle" id="ref-for-filesystemsyncaccesshandle①"><c- n>FileSystemSyncAccessHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemfilehandle-createsyncaccesshandle" id="ref-for-dom-filesystemfilehandle-createsyncaccesshandle"><c- g>createSyncAccessHandle</c-></a>();
};
</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle②">FileSystemFileHandle</a></code>'s associated <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry⑤">entry</a> must be a <a data-link-type="dfn" href="#file" id="ref-for-file⑤">file entry</a>.</p>
   <p><code class="idl"><a data-link-type="idl" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle③">FileSystemFileHandle</a></code> objects are <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable-objects" id="ref-for-serializable-objects①">serializable objects</a>. Their <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#serialization-steps" id="ref-for-serialization-steps①">serialization steps</a> and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#deserialization-steps" id="ref-for-deserialization-steps①">deserialization steps</a> are the same as those for <code class="idl"><a data-link-type="idl" href="#filesystemhandle" id="ref-for-filesystemhandle⑦">FileSystemHandle</a></code>.</p>
   <h4 class="heading settled" data-level="2.3.1" id="api-filesystemfilehandle-getfile"><span class="secno">2.3.1. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemfilehandle-getfile" id="ref-for-dom-filesystemfilehandle-getfile①">getFile()</a></code> method</span><a class="self-link" href="#api-filesystemfilehandle-getfile"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>file</var> = await <var>fileHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemfilehandle-getfile" id="ref-for-dom-filesystemfilehandle-getfile②">getFile()</a></code>
     <dd data-md>
      <p>Returns a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-file" id="ref-for-dfn-file①">File</a></code> representing the state on disk of the entry represented by <var>handle</var>.
 If the file on disk changes or is removed after this method is called, the returned <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-file" id="ref-for-dfn-file②">File</a></code> object will likely be no longer readable.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="getFile()" data-algorithm-for="FileSystemFileHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemFileHandle" data-dfn-type="method" data-export id="dom-filesystemfilehandle-getfile"><code>getFile()</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise" id="ref-for-a-new-promise②">a new promise</a>.</p>
     <li data-md>
      <p>Run these steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel②">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>access</var> be the result of running <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this④">this</a>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry⑥">entry</a>'s <a data-link-type="dfn" href="#entry-query-access" id="ref-for-entry-query-access①">query access</a> given "<code>read</code>".</p>
       <li data-md>
        <p>If <var>access</var> is not "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted">granted</a></code>",
 reject <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notallowederror" id="ref-for-notallowederror">NotAllowedError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>entry</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑤">this</a>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry⑦">entry</a>.</p>
       <li data-md>
        <p>Let <var>f</var> be a new <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-file" id="ref-for-dfn-file③">File</a></code>.</p>
       <li data-md>
        <p>Set <var>f</var>’s <a data-link-type="dfn" href="https://w3c.github.io/FileAPI/#snapshot-state" id="ref-for-snapshot-state">snapshot state</a> to the current state of <var>entry</var>.</p>
       <li data-md>
        <p>Set <var>f</var>’s underlying byte sequence to a copy of <var>entry</var>’s <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data①">binary data</a>.</p>
       <li data-md>
        <p>Set <var>f</var>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-name" id="ref-for-dfn-name">name</a></code> to <var>entry</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name③">name</a>.</p>
       <li data-md>
        <p>Set <var>f</var>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-lastModified" id="ref-for-dfn-lastModified">lastModified</a></code> to <var>entry</var>’s <a data-link-type="dfn" href="#file-entry-modification-timestamp" id="ref-for-file-entry-modification-timestamp①">modification timestamp</a>.</p>
       <li data-md>
        <p>Set <var>f</var>.<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-type" id="ref-for-dfn-type">type</a></code> to an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined">implementation-defined</a> value, based on for example <var>entry</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name④">name</a> or its file extension.</p>
        <p class="XXX"> The reading and snapshotting behavior needs to be better specified in the <a data-link-type="biblio" href="#biblio-file-api">[FILE-API]</a> spec,
 for now this is kind of hand-wavy.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve⑤">Resolve</a> <var>result</var> with <var>f</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.3.2" id="api-filesystemfilehandle-createwritable"><span class="secno">2.3.2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemfilehandle-createwritable" id="ref-for-dom-filesystemfilehandle-createwritable①">createWritable()</a></code> method</span><a class="self-link" href="#api-filesystemfilehandle-createwritable"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>stream</var> = await <var>fileHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemfilehandle-createwritable" id="ref-for-dom-filesystemfilehandle-createwritable②">createWritable()</a></code>
     <dt data-md><var>stream</var> = await <var>fileHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemfilehandle-createwritable" id="ref-for-dom-filesystemfilehandle-createwritable③">createWritable</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-filesystemcreatewritableoptions-keepexistingdata" id="ref-for-dom-filesystemcreatewritableoptions-keepexistingdata">keepExistingData</a></code>: true/false })
     <dd data-md>
      <p>Returns a <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream②">FileSystemWritableFileStream</a></code> that can be used to write to the file. Any changes made through <var>stream</var> won’t be reflected in the file represented by <var>fileHandle</var> until the stream has been closed.
 User agents try to ensure that no partial writes happen, i.e. the file represented by <var>fileHandle</var> will either contain its old contents or it will contain whatever data was written
 through <var>stream</var> up until the stream has been closed.</p>
      <p>This is typically implemented by writing data to a temporary file, and only replacing the file
 represented by <var>fileHandle</var> with the temporary file when the writable filestream is closed.</p>
      <p>If <code class="idl"><a data-link-type="idl" href="#dom-filesystemcreatewritableoptions-keepexistingdata" id="ref-for-dom-filesystemcreatewritableoptions-keepexistingdata①">keepExistingData</a></code> is false or not specified,
 the temporary file starts out empty,
 otherwise the existing file is first copied to this temporary file.</p>
      <p>Creating a <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream③">FileSystemWritableFileStream</a></code> <a data-link-type="dfn" href="#file-entry-lock-take" id="ref-for-file-entry-lock-take">takes a shared lock</a> on the <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry⑧">entry</a> associated with <var>fileHandle</var>. This prevents the creation of <code class="idl"><a data-link-type="idl" href="#filesystemsyncaccesshandle" id="ref-for-filesystemsyncaccesshandle②">FileSystemSyncAccessHandles</a></code> for the entry, until the stream is closed.</p>
    </dl>
   </div>
   <p class="XXX" data-remote-issue-id="67"> There has been some discussion around and desire for a "inPlace" mode for createWritable
(where changes will be written to the actual underlying file as they are written to the writer, for
example to support in-place modification of large files or things like databases). This is not
currently implemented in Chrome. Implementing this is currently blocked on figuring out how to
combine the desire to run malware checks with the desire to let websites make fast in-place
modifications to existing large files.</p>
   <div class="algorithm" data-algorithm="createWritable(options)" data-algorithm-for="FileSystemFileHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemFileHandle" data-dfn-type="method" data-export data-lt="createWritable(options)|createWritable()" id="dom-filesystemfilehandle-createwritable"><code>createWritable(<var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise" id="ref-for-a-new-promise③">a new promise</a>.</p>
     <li data-md>
      <p>Run these steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel③">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>access</var> be the result of running <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑥">this</a>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry⑨">entry</a>'s <a data-link-type="dfn" href="#entry-request-access" id="ref-for-entry-request-access①">request access</a> given "<code>readwrite</code>".
 If that throws an exception, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject">reject</a> <var>result</var> with that exception and abort.</p>
       <li data-md>
        <p>If <var>access</var> is not "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted①">granted</a></code>",
 reject <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notallowederror" id="ref-for-notallowederror①">NotAllowedError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>entry</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑦">this</a>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①⓪">entry</a>.</p>
       <li data-md>
        <p>Let <var>lockResult</var> be the result of <a data-link-type="dfn" href="#file-entry-lock-take" id="ref-for-file-entry-lock-take①">taking a lock</a> with "<code>shared</code>" on <var>entry</var>.</p>
       <li data-md>
        <p>If <var>lockResult</var> is false, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject①">reject</a> <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#nomodificationallowederror" id="ref-for-nomodificationallowederror">NoModificationAllowedError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>stream</var> be the result of <a data-link-type="dfn" href="#create-a-new-filesystemwritablefilestream" id="ref-for-create-a-new-filesystemwritablefilestream">creating a new FileSystemWritableFileStream</a> for <var>entry</var> in <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑧">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①">relevant realm</a>.</p>
       <li data-md>
        <p>If <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystemcreatewritableoptions-keepexistingdata" id="ref-for-dom-filesystemcreatewritableoptions-keepexistingdata②">keepExistingData</a></code> is true:</p>
        <ol>
         <li data-md>
          <p>Set <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer">[[buffer]]</a> to a copy of <var>entry</var>’s <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data②">binary data</a>.</p>
        </ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve⑥">Resolve</a> <var>result</var> with <var>stream</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.3.3" id="api-filesystemfilehandle-createsyncaccesshandle"><span class="secno">2.3.3. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemfilehandle-createsyncaccesshandle" id="ref-for-dom-filesystemfilehandle-createsyncaccesshandle①">createSyncAccessHandle()</a></code> method</span><a class="self-link" href="#api-filesystemfilehandle-createsyncaccesshandle"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>handle</var> = await <var>fileHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemfilehandle-createsyncaccesshandle" id="ref-for-dom-filesystemfilehandle-createsyncaccesshandle②">createSyncAccessHandle</a></code>()
     <dd data-md>
      <p>Returns a <code class="idl"><a data-link-type="idl" href="#filesystemsyncaccesshandle" id="ref-for-filesystemsyncaccesshandle③">FileSystemSyncAccessHandle</a></code> that can be used to read from/write to the file.
 Changes made through <var>handle</var> might be immediately reflected in the file represented by <var>fileHandle</var>.
 To ensure the changes are reflected in this file, the handle can be flushed or closed.</p>
      <p>Creating a <code class="idl"><a data-link-type="idl" href="#filesystemsyncaccesshandle" id="ref-for-filesystemsyncaccesshandle④">FileSystemSyncAccessHandle</a></code> <a data-link-type="dfn" href="#file-entry-lock-take" id="ref-for-file-entry-lock-take②">takes an exclusive lock</a> on the <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①①">entry</a> associated with <var>fileHandle</var>. This prevents the creation of
 further <code class="idl"><a data-link-type="idl" href="#filesystemsyncaccesshandle" id="ref-for-filesystemsyncaccesshandle⑤">FileSystemSyncAccessHandle</a></code>s or <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream④">FileSystemWritableFileStream</a></code>s
 for the entry, until the access handle is closed.</p>
      <p>The returned <code class="idl"><a data-link-type="idl" href="#filesystemsyncaccesshandle" id="ref-for-filesystemsyncaccesshandle⑥">FileSystemSyncAccessHandle</a></code> offers synchronous methods. This allows for higher performance
 on contexts where asynchronous operations come with high overhead, e.g., WebAssembly.</p>
      <p>For the time being, this method will only succeed when the <var>fileHandle</var> belongs to the <a data-link-type="dfn" href="#origin-private-file-system" id="ref-for-origin-private-file-system">origin private file system</a>.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="createSyncAccessHandle()" data-algorithm-for="FileSystemFileHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemFileHandle" data-dfn-type="method" data-export id="dom-filesystemfilehandle-createsyncaccesshandle"><code>createSyncAccessHandle()</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise" id="ref-for-a-new-promise④">a new promise</a>.</p>
     <li data-md>
      <p>Run these steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel④">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>access</var> be the result of running <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this⑨">this</a>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①②">entry</a>'s <a data-link-type="dfn" href="#entry-request-access" id="ref-for-entry-request-access②">request access</a> given "<code>readwrite</code>".
 If that throws an exception, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject②">reject</a> <var>result</var> with that exception and abort.</p>
       <li data-md>
        <p>If <var>access</var> is not "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted②">granted</a></code>",
 reject <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notallowederror" id="ref-for-notallowederror②">NotAllowedError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>entry</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①⓪">this</a>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①③">entry</a>.</p>
       <li data-md>
        <p>If <var>entry</var> does not represent an <a data-link-type="dfn" href="#entry" id="ref-for-entry①⑤">entry</a> in an <a data-link-type="dfn" href="#origin-private-file-system" id="ref-for-origin-private-file-system①">origin private file system</a>,
 reject <var>result</var> with an <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror">InvalidStateError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>lockResult</var> be the result of <a data-link-type="dfn" href="#file-entry-lock-take" id="ref-for-file-entry-lock-take③">taking a lock</a> with "<code>exclusive</code>" on <var>entry</var>.</p>
       <li data-md>
        <p>If <var>lockResult</var> is false, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject③">reject</a> <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#nomodificationallowederror" id="ref-for-nomodificationallowederror①">NoModificationAllowedError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>handle</var> be the result of <a data-link-type="dfn" href="#create-a-new-filesystemsyncaccesshandle" id="ref-for-create-a-new-filesystemsyncaccesshandle">creating a new FileSystemSyncAccessHandle</a> for <var>entry</var> in <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①①">this</a>'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm②">relevant realm</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve⑦">Resolve</a> <var>result</var> with <var>handle</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.4" id="api-filesystemdirectoryhandle"><span class="secno">2.4. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle①">FileSystemDirectoryHandle</a></code> interface</span><a class="self-link" href="#api-filesystemdirectoryhandle"></a></h3>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-filesystemgetfileoptions"><code><c- g>FileSystemGetFileOptions</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean②"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="FileSystemGetFileOptions" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-filesystemgetfileoptions-create"><code><c- g>create</c-></code></dfn> = <c- b>false</c->;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-filesystemgetdirectoryoptions"><code><c- g>FileSystemGetDirectoryOptions</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean③"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="FileSystemGetDirectoryOptions" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-filesystemgetdirectoryoptions-create"><code><c- g>create</c-></code></dfn> = <c- b>false</c->;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-filesystemremoveoptions"><code><c- g>FileSystemRemoveOptions</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean" id="ref-for-idl-boolean④"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="FileSystemRemoveOptions" data-dfn-type="dict-member" data-export data-type="boolean " id="dom-filesystemremoveoptions-recursive"><code><c- g>recursive</c-></code></dfn> = <c- b>false</c->;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed③"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->), <a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext" id="ref-for-SecureContext②"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable" id="ref-for-serializable②"><c- g>Serializable</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="filesystemdirectoryhandle"><code><c- g>FileSystemDirectoryHandle</c-></code></dfn> : <a data-link-type="idl-name" href="#filesystemhandle" id="ref-for-filesystemhandle⑧"><c- n>FileSystemHandle</c-></a> {
  <c- b>async</c-> <c- b>iterable</c->&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString①"><c- b>USVString</c-></a>, <a data-link-type="idl-name" href="#filesystemhandle" id="ref-for-filesystemhandle⑨"><c- n>FileSystemHandle</c-></a>>;

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise④"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle④"><c- n>FileSystemFileHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemdirectoryhandle-getfilehandle" id="ref-for-dom-filesystemdirectoryhandle-getfilehandle"><c- g>getFileHandle</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString②"><c- b>USVString</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemDirectoryHandle/getFileHandle(name, options), FileSystemDirectoryHandle/getFileHandle(name)" data-dfn-type="argument" data-export id="dom-filesystemdirectoryhandle-getfilehandle-name-options-name"><code><c- g>name</c-></code><a class="self-link" href="#dom-filesystemdirectoryhandle-getfilehandle-name-options-name"></a></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemgetfileoptions" id="ref-for-dictdef-filesystemgetfileoptions"><c- n>FileSystemGetFileOptions</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemDirectoryHandle/getFileHandle(name, options), FileSystemDirectoryHandle/getFileHandle(name)" data-dfn-type="argument" data-export id="dom-filesystemdirectoryhandle-getfilehandle-name-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-filesystemdirectoryhandle-getfilehandle-name-options-options"></a></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise⑤"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle②"><c- n>FileSystemDirectoryHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemdirectoryhandle-getdirectoryhandle" id="ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle"><c- g>getDirectoryHandle</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString③"><c- b>USVString</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemDirectoryHandle/getDirectoryHandle(name, options), FileSystemDirectoryHandle/getDirectoryHandle(name)" data-dfn-type="argument" data-export id="dom-filesystemdirectoryhandle-getdirectoryhandle-name-options-name"><code><c- g>name</c-></code><a class="self-link" href="#dom-filesystemdirectoryhandle-getdirectoryhandle-name-options-name"></a></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemgetdirectoryoptions" id="ref-for-dictdef-filesystemgetdirectoryoptions"><c- n>FileSystemGetDirectoryOptions</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemDirectoryHandle/getDirectoryHandle(name, options), FileSystemDirectoryHandle/getDirectoryHandle(name)" data-dfn-type="argument" data-export id="dom-filesystemdirectoryhandle-getdirectoryhandle-name-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-filesystemdirectoryhandle-getdirectoryhandle-name-options-options"></a></dfn> = {});

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise⑥"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemdirectoryhandle-removeentry" id="ref-for-dom-filesystemdirectoryhandle-removeentry"><c- g>removeEntry</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString④"><c- b>USVString</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemDirectoryHandle/removeEntry(name, options), FileSystemDirectoryHandle/removeEntry(name)" data-dfn-type="argument" data-export id="dom-filesystemdirectoryhandle-removeentry-name-options-name"><code><c- g>name</c-></code><a class="self-link" href="#dom-filesystemdirectoryhandle-removeentry-name-options-name"></a></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemremoveoptions" id="ref-for-dictdef-filesystemremoveoptions"><c- n>FileSystemRemoveOptions</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemDirectoryHandle/removeEntry(name, options), FileSystemDirectoryHandle/removeEntry(name)" data-dfn-type="argument" data-export id="dom-filesystemdirectoryhandle-removeentry-name-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-filesystemdirectoryhandle-removeentry-name-options-options"></a></dfn> = {});

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise⑦"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString⑤"><c- b>USVString</c-></a>>?> <a class="idl-code" data-link-type="method" href="#dom-filesystemdirectoryhandle-resolve" id="ref-for-dom-filesystemdirectoryhandle-resolve"><c- g>resolve</c-></a>(<a data-link-type="idl-name" href="#filesystemhandle" id="ref-for-filesystemhandle①⓪"><c- n>FileSystemHandle</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemDirectoryHandle/resolve(possibleDescendant)" data-dfn-type="argument" data-export id="dom-filesystemdirectoryhandle-resolve-possibledescendant-possibledescendant"><code><c- g>possibleDescendant</c-></code><a class="self-link" href="#dom-filesystemdirectoryhandle-resolve-possibledescendant-possibledescendant"></a></dfn>);
};
</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle③">FileSystemDirectoryHandle</a></code>'s associated <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①④">entry</a> must be a <a data-link-type="dfn" href="#directory" id="ref-for-directory④">directory entry</a>.</p>
   <p><code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle④">FileSystemDirectoryHandle</a></code> objects are <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable-objects" id="ref-for-serializable-objects②">serializable objects</a>. Their <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#serialization-steps" id="ref-for-serialization-steps②">serialization steps</a> and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/structured-data.html#deserialization-steps" id="ref-for-deserialization-steps②">deserialization steps</a> are the same as those for <code class="idl"><a data-link-type="idl" href="#filesystemhandle" id="ref-for-filesystemhandle①①">FileSystemHandle</a></code>.</p>
   <h4 class="heading settled" data-level="2.4.1" id="api-filesystemdirectoryhandle-asynciterable"><span class="secno">2.4.1. </span><span class="content">Directory iteration</span><a class="self-link" href="#api-filesystemdirectoryhandle-asynciterable"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md>for await (let [<var>name</var>, <var>handle</var>] of <var>directoryHandle</var>) {}
     <dt data-md>for await (let [<var>name</var>, <var>handle</var>] of <var>directoryHandle</var> . entries()) {}
     <dt data-md>for await (let <var>handle</var> of <var>directoryHandle</var> . values()) {}
     <dt data-md>for await (let <var>name</var> of <var>directoryHandle</var> . keys()) {}
     <dd data-md>
      <p>Iterates over all entries whose parent is the entry represented by <var>directoryHandle</var>. Entries
 that are created or deleted while the iteration is in progress might or might not be included.
 No guarantees are given either way.</p>
    </dl>
   </div>
   <p class="XXX" data-remote-issue-id="173"> In the future we might want to add arguments to the async iterable declaration to
support for example recursive iteration.</p>
   <div class="algorithm" data-algorithm="iterator initialization">
     The <a data-link-type="dfn" href="https://heycam.github.io/webidl/#asynchronous-iterator-initialization-steps" id="ref-for-asynchronous-iterator-initialization-steps">asynchronous iterator initialization steps</a> for a <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle⑤">FileSystemDirectoryHandle</a></code> <var>handle</var> and its async iterator <var>iterator</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>access</var> be the result of running <var>handle</var>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①⑤">entry</a>'s <a data-link-type="dfn" href="#entry-query-access" id="ref-for-entry-query-access②">query access</a> given "<code>read</code>".</p>
     <li data-md>
      <p>If <var>access</var> is not "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted③">granted</a></code>",
 throw a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notallowederror" id="ref-for-notallowederror③">NotAllowedError</a></code>.</p>
     <li data-md>
      <p>Set <var>iterator</var>’s <dfn class="dfn-paneled" data-dfn-for="FileSystemDirectoryHandle-iterator" data-dfn-type="dfn" data-noexport id="filesystemdirectoryhandle-iterator-past-results">past results</dfn> to an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set①">set</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="next iteration result">
     To <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-get-the-next-iteration-result" id="ref-for-dfn-get-the-next-iteration-result">get the next iteration result</a> for a <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle⑥">FileSystemDirectoryHandle</a></code> <var>handle</var> and its async iterator <var>iterator</var>: 
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise" id="ref-for-a-new-promise⑤">a new promise</a>.</p>
     <li data-md>
      <p>Let <var>directory</var> be <var>handle</var>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①⑥">entry</a>.</p>
     <li data-md>
      <p>Let <var>access</var> be the result of running <var>handle</var>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①⑦">entry</a>'s <a data-link-type="dfn" href="#entry-query-access" id="ref-for-entry-query-access③">query access</a> given "<code>read</code>".</p>
     <li data-md>
      <p>If <var>access</var> is not "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted④">granted</a></code>",
 reject <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notallowederror" id="ref-for-notallowederror④">NotAllowedError</a></code> and return <var>promise</var>.</p>
     <li data-md>
      <p>Let <var>child</var> be an <a data-link-type="dfn" href="#entry" id="ref-for-entry①⑥">entry</a> in <var>directory</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children③">children</a>,
 such that <var>child</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name⑤">name</a> is not contained in <var>iterator</var>’s <a data-link-type="dfn" href="#filesystemdirectoryhandle-iterator-past-results" id="ref-for-filesystemdirectoryhandle-iterator-past-results">past results</a>,
 or <code>null</code> if no such entry exists.</p>
      <p class="note" role="note"><span>Note:</span> This is intentionally very vague about the iteration order. Different platforms
 and file systems provide different guarantees about iteration order, and we want it to
 be possible to efficiently implement this on all platforms. As such no guarantees are given
 about the exact order in which elements are returned.</p>
     <li data-md>
      <p>If <var>child</var> is <code>null</code>, then:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve⑧">Resolve</a> <var>promise</var> with <code>undefined</code>.</p>
      </ol>
     <li data-md>
      <p>Otherwise:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append">Append</a> <var>child</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name⑥">name</a> to <var>iterator</var>’s <a data-link-type="dfn" href="#filesystemdirectoryhandle-iterator-past-results" id="ref-for-filesystemdirectoryhandle-iterator-past-results①">past results</a>.</p>
       <li data-md>
        <p>If <var>child</var> is a <a data-link-type="dfn" href="#file" id="ref-for-file⑥">file entry</a>:</p>
        <ol>
         <li data-md>
          <p>Let <var>result</var> be a new <code class="idl"><a data-link-type="idl" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle⑤">FileSystemFileHandle</a></code> associated with <var>child</var>.</p>
        </ol>
       <li data-md>
        <p>Otherwise:</p>
        <ol>
         <li data-md>
          <p>Let <var>result</var> be a new <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle⑦">FileSystemDirectoryHandle</a></code> associated with <var>child</var>.</p>
        </ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve⑨">Resolve</a> <var>promise</var> with (<var>child</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name⑦">name</a>, <var>result</var>).</p>
      </ol>
     <li data-md>
      <p>Return <var>promise</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.4.2" id="api-filesystemdirectoryhandle-getfilehandle"><span class="secno">2.4.2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-getfilehandle" id="ref-for-dom-filesystemdirectoryhandle-getfilehandle①">getFileHandle()</a></code> method</span><a class="self-link" href="#api-filesystemdirectoryhandle-getfilehandle"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>fileHandle</var> = await <var>directoryHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-getfilehandle" id="ref-for-dom-filesystemdirectoryhandle-getfilehandle②">getFileHandle</a></code>(<var>name</var>)
     <dt data-md><var>fileHandle</var> = await <var>directoryHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-getfilehandle" id="ref-for-dom-filesystemdirectoryhandle-getfilehandle③">getFileHandle</a></code>(<var>name</var>, { <code class="idl"><a data-link-type="idl" href="#dom-filesystemgetfileoptions-create" id="ref-for-dom-filesystemgetfileoptions-create">create</a></code>: false })
     <dd data-md>
      <p>Returns a handle for a file named <var>name</var> in the directory represented by <var>directoryHandle</var>. If
 no such file exists, this rejects.</p>
     <dt data-md><var>fileHandle</var> = await <var>directoryHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-getfilehandle" id="ref-for-dom-filesystemdirectoryhandle-getfilehandle④">getFileHandle</a></code>(<var>name</var>, { <code class="idl"><a data-link-type="idl" href="#dom-filesystemgetfileoptions-create" id="ref-for-dom-filesystemgetfileoptions-create①">create</a></code>: true })
     <dd data-md>
      <p>Returns a handle for a file named <var>name</var> in the directory represented by <var>directoryHandle</var>. If
 no such file exists, this creates a new file. If no file with named <var>name</var> can be created this
 rejects. Creation can fail because there already is a directory with the same name, because the
 name uses characters that aren’t supported in file names on the underlying file system, or
 because the user agent for security reasons decided not to allow creation of the file.</p>
      <p>This operation requires write permission, even if the file being returned already exists. If
 this handle doesn’t already have write permission, this could result in a prompt being shown to
 the user. To get an existing file without needing write permission, call this method
 with <code>{ <code class="idl"><a data-link-type="idl" href="#dom-filesystemgetfileoptions-create" id="ref-for-dom-filesystemgetfileoptions-create②">create</a></code>: false }</code>.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="getFileHandle(name, options)" data-algorithm-for="FileSystemDirectoryHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemDirectoryHandle" data-dfn-type="method" data-export data-lt="getFileHandle(name, options)|getFileHandle(name)" id="dom-filesystemdirectoryhandle-getfilehandle"><code>getFileHandle(<var>name</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise" id="ref-for-a-new-promise⑥">a new promise</a>.</p>
     <li data-md>
      <p>Run these steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑤">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>name</var> is not a <a data-link-type="dfn" href="#valid-file-name" id="ref-for-valid-file-name①">valid file name</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject④">reject</a> <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>entry</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①②">this</a>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①⑧">entry</a>.</p>
       <li data-md>
        <p>If <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystemgetfileoptions-create" id="ref-for-dom-filesystemgetfileoptions-create③">create</a></code> is true:</p>
        <ol>
         <li data-md>
          <p>Let <var>access</var> be the result of running <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①③">this</a>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry①⑨">entry</a>'s <a data-link-type="dfn" href="#entry-request-access" id="ref-for-entry-request-access③">request access</a> given "<code>readwrite</code>".
 If that throws an exception, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject⑤">reject</a> <var>result</var> with that exception and abort.</p>
        </ol>
       <li data-md>
        <p>Otherwise:</p>
        <ol>
         <li data-md>
          <p>Let <var>access</var> be the result of running <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①④">this</a>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry②⓪">entry</a>'s <a data-link-type="dfn" href="#entry-query-access" id="ref-for-entry-query-access④">query access</a> given "<code>read</code>".</p>
        </ol>
       <li data-md>
        <p>If <var>access</var> is not "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted⑤">granted</a></code>",
 reject <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notallowederror" id="ref-for-notallowederror⑤">NotAllowedError</a></code> and abort.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate①">For each</a> <var>child</var> of <var>entry</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children④">children</a>:</p>
        <ol>
         <li data-md>
          <p>If <var>child</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name⑧">name</a> equals <var>name</var>:</p>
          <ol>
           <li data-md>
            <p>If <var>child</var> is a <a data-link-type="dfn" href="#directory" id="ref-for-directory⑤">directory entry</a>:</p>
            <ol>
             <li data-md>
              <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject⑥">Reject</a> <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#typemismatcherror" id="ref-for-typemismatcherror">TypeMismatchError</a></code> and abort.</p>
            </ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve①⓪">Resolve</a> <var>result</var> with a new <code class="idl"><a data-link-type="idl" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle⑥">FileSystemFileHandle</a></code> whose <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry②①">entry</a> is <var>child</var> and abort.</p>
          </ol>
        </ol>
       <li data-md>
        <p>If <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystemgetfileoptions-create" id="ref-for-dom-filesystemgetfileoptions-create④">create</a></code> is false:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject⑦">Reject</a> <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notfounderror" id="ref-for-notfounderror">NotFoundError</a></code> and abort.</p>
        </ol>
       <li data-md>
        <p>Let <var>child</var> be a new <a data-link-type="dfn" href="#file" id="ref-for-file⑦">file entry</a> whose <a data-link-type="dfn" href="#entry-query-access" id="ref-for-entry-query-access⑤">query access</a> and <a data-link-type="dfn" href="#entry-request-access" id="ref-for-entry-request-access④">request access</a> algorithms
 are those of <var>entry</var>.</p>
       <li data-md>
        <p>Set <var>child</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name⑨">name</a> to <var>name</var>.</p>
       <li data-md>
        <p>Set <var>child</var>’s <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data③">binary data</a> to an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence①">byte sequence</a>.</p>
       <li data-md>
        <p>Set <var>child</var>’s <a data-link-type="dfn" href="#file-entry-modification-timestamp" id="ref-for-file-entry-modification-timestamp②">modification timestamp</a> to the current time.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append①">Append</a> <var>child</var> to <var>entry</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children⑤">children</a>.</p>
       <li data-md>
        <p>If creating <var>child</var> in the underlying file system throws an exception, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject⑧">reject</a> <var>result</var> with that exception and abort.</p>
        <p class="XXX" data-remote-issue-id="68"> Better specify what possible exceptions this could throw.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve①①">Resolve</a> <var>result</var> with a new <code class="idl"><a data-link-type="idl" href="#filesystemfilehandle" id="ref-for-filesystemfilehandle⑦">FileSystemFileHandle</a></code> whose <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry②②">entry</a> is <var>child</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.4.3" id="api-filesystemdirectoryhandle-getdirectoryhandle"><span class="secno">2.4.3. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-getdirectoryhandle" id="ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle①">getDirectoryHandle()</a></code> method</span><a class="self-link" href="#api-filesystemdirectoryhandle-getdirectoryhandle"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>subdirHandle</var> = await <var>directoryHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-getdirectoryhandle" id="ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle②">getDirectoryHandle</a></code>(<var>name</var>)
     <dt data-md><var>subdirHandle</var> = await <var>directoryHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-getdirectoryhandle" id="ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle③">getDirectoryHandle</a></code>(<var>name</var>, { <code class="idl"><a data-link-type="idl" href="#dom-filesystemgetdirectoryoptions-create" id="ref-for-dom-filesystemgetdirectoryoptions-create">create</a></code>: false })
     <dd data-md>
      <p>Returns a handle for a directory named <var>name</var> in the directory represented by <var>directoryHandle</var>. If no such directory exists, this rejects.</p>
     <dt data-md><var>subdirHandle</var> = await <var>directoryHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-getdirectoryhandle" id="ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle④">getDirectoryHandle</a></code>(<var>name</var>, { <code class="idl"><a data-link-type="idl" href="#dom-filesystemgetdirectoryoptions-create" id="ref-for-dom-filesystemgetdirectoryoptions-create①">create</a></code>: true })
     <dd data-md>
      <p>Returns a handle for a directory named <var>name</var> in the directory represented by <var>directoryHandle</var>. If no such directory exists, this creates a new directory. If creating the
 directory failed, this rejects. Creation can fail because there already is a file with the same
 name, or because the name uses characters that aren’t supported in file names on the underlying
 file system.</p>
      <p>This operation requires write permission, even if the directory being returned already exists.
 If this handle doesn’t already have write permission, this could result in a prompt being shown
 to the user. To get an existing directory without needing write permission, call this method
 with <code>{ <code class="idl"><a data-link-type="idl" href="#dom-filesystemgetdirectoryoptions-create" id="ref-for-dom-filesystemgetdirectoryoptions-create②">create</a></code>: false }</code>.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="getDirectoryHandle(name, options)" data-algorithm-for="FileSystemDirectoryHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemDirectoryHandle" data-dfn-type="method" data-export data-lt="getDirectoryHandle(name, options)|getDirectoryHandle(name)" id="dom-filesystemdirectoryhandle-getdirectoryhandle"><code>getDirectoryHandle(<var>name</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise" id="ref-for-a-new-promise⑦">a new promise</a>.</p>
     <li data-md>
      <p>Run these steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑥">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>name</var> is not a <a data-link-type="dfn" href="#valid-file-name" id="ref-for-valid-file-name②">valid file name</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject⑨">reject</a> <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①">TypeError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>entry</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①⑤">this</a>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry②③">entry</a>.</p>
       <li data-md>
        <p>If <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystemgetdirectoryoptions-create" id="ref-for-dom-filesystemgetdirectoryoptions-create③">create</a></code> is true:</p>
        <ol>
         <li data-md>
          <p>Let <var>access</var> be the result of running <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①⑥">this</a>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry②④">entry</a>'s <a data-link-type="dfn" href="#entry-request-access" id="ref-for-entry-request-access⑤">request access</a> given "<code>readwrite</code>".
 If that throws an exception, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject①⓪">reject</a> <var>result</var> with that exception and abort.</p>
        </ol>
       <li data-md>
        <p>Otherwise:</p>
        <ol>
         <li data-md>
          <p>Let <var>access</var> be the result of running <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①⑦">this</a>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry②⑤">entry</a>'s <a data-link-type="dfn" href="#entry-query-access" id="ref-for-entry-query-access⑥">query access</a> given "<code>read</code>".</p>
        </ol>
       <li data-md>
        <p>If <var>access</var> is not "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted⑥">granted</a></code>",
 reject <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notallowederror" id="ref-for-notallowederror⑥">NotAllowedError</a></code> and abort.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate②">For each</a> <var>child</var> of <var>entry</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children⑥">children</a>:</p>
        <ol>
         <li data-md>
          <p>If <var>child</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name①⓪">name</a> equals <var>name</var>:</p>
          <ol>
           <li data-md>
            <p>If <var>child</var> is a <a data-link-type="dfn" href="#file" id="ref-for-file⑧">file entry</a>:</p>
            <ol>
             <li data-md>
              <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject①①">Reject</a> <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#typemismatcherror" id="ref-for-typemismatcherror①">TypeMismatchError</a></code> and abort.</p>
            </ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve①②">Resolve</a> <var>result</var> with a new <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle⑧">FileSystemDirectoryHandle</a></code> whose <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry②⑥">entry</a> is <var>child</var> and abort.</p>
          </ol>
        </ol>
       <li data-md>
        <p>If <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystemgetfileoptions-create" id="ref-for-dom-filesystemgetfileoptions-create⑤">create</a></code> is false:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject①②">Reject</a> <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notfounderror" id="ref-for-notfounderror①">NotFoundError</a></code> and abort.</p>
        </ol>
       <li data-md>
        <p>Let <var>child</var> be a new <a data-link-type="dfn" href="#directory" id="ref-for-directory⑥">directory entry</a> whose <a data-link-type="dfn" href="#entry-query-access" id="ref-for-entry-query-access⑦">query access</a> and <a data-link-type="dfn" href="#entry-request-access" id="ref-for-entry-request-access⑥">request access</a> algorithms are those of <var>entry</var>.</p>
       <li data-md>
        <p>Set <var>child</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name①①">name</a> to <var>name</var>.</p>
       <li data-md>
        <p>Set <var>child</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children⑦">children</a> to an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set②">set</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append②">Append</a> <var>child</var> to <var>entry</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children⑧">children</a>.</p>
       <li data-md>
        <p>If creating <var>child</var> in the underlying file system throws an exception, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject①③">reject</a> <var>result</var> with that exception and abort.</p>
        <p class="XXX" data-remote-issue-id="68"> Better specify what possible exceptions this could throw.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve①③">Resolve</a> <var>result</var> with a new <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle⑨">FileSystemDirectoryHandle</a></code> whose <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry②⑦">entry</a> is <var>child</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.4.4" id="api-filesystemdirectoryhandle-removeentry"><span class="secno">2.4.4. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-removeentry" id="ref-for-dom-filesystemdirectoryhandle-removeentry①">removeEntry()</a></code> method</span><a class="self-link" href="#api-filesystemdirectoryhandle-removeentry"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md>await <var>directoryHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-removeentry" id="ref-for-dom-filesystemdirectoryhandle-removeentry②">removeEntry</a></code>(<var>name</var>)
     <dt data-md>await <var>directoryHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-removeentry" id="ref-for-dom-filesystemdirectoryhandle-removeentry③">removeEntry</a></code>(<var>name</var>, { <code class="idl"><a data-link-type="idl" href="#dom-filesystemremoveoptions-recursive" id="ref-for-dom-filesystemremoveoptions-recursive">recursive</a></code>: false })
     <dd data-md>
      <p>If the directory represented by <var>directoryHandle</var> contains a file named <var>name</var>, or an empty
 directory named <var>name</var>, this will attempt to delete that file or directory.</p>
      <p>Attempting to delete a file or directory that does not exist is considered success,
 while attempting to delete a non-empty directory will result in a promise rejection.</p>
     <dt data-md>await <var>directoryHandle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-removeentry" id="ref-for-dom-filesystemdirectoryhandle-removeentry④">removeEntry</a></code>(<var>name</var>, { <code class="idl"><a data-link-type="idl" href="#dom-filesystemremoveoptions-recursive" id="ref-for-dom-filesystemremoveoptions-recursive①">recursive</a></code>: true })
     <dd data-md>
      <p>Removes the entry named <var>name</var> in the directory represented by <var>directoryHandle</var>.
 If that entry is a directory, its contents will also be deleted recursively.
 recursively.</p>
      <p>Attempting to delete a file or directory that does not exist is considered success.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="removeEntry(name, options)" data-algorithm-for="FileSystemDirectoryHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemDirectoryHandle" data-dfn-type="method" data-export data-lt="removeEntry(name, options)|removeEntry(name)" id="dom-filesystemdirectoryhandle-removeentry"><code>removeEntry(<var>name</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>result</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise" id="ref-for-a-new-promise⑧">a new promise</a>.</p>
     <li data-md>
      <p>Run these steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑦">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>name</var> is not a <a data-link-type="dfn" href="#valid-file-name" id="ref-for-valid-file-name③">valid file name</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject①④">reject</a> <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②">TypeError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>entry</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①⑧">this</a>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry②⑧">entry</a>.</p>
       <li data-md>
        <p>Let <var>access</var> be the result of running <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this①⑨">this</a>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry②⑨">entry</a>'s <a data-link-type="dfn" href="#entry-request-access" id="ref-for-entry-request-access⑦">request access</a> given "<code>readwrite</code>".
 If that throws an exception, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject①⑤">reject</a> <var>result</var> with that exception and abort.</p>
       <li data-md>
        <p>If <var>access</var> is not "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted⑦">granted</a></code>",
 reject <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notallowederror" id="ref-for-notallowederror⑦">NotAllowedError</a></code> and abort.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-iterate" id="ref-for-list-iterate③">For each</a> <var>child</var> of <var>entry</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children⑨">children</a>:</p>
        <ol>
         <li data-md>
          <p>If <var>child</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name①②">name</a> equals <var>name</var>:</p>
          <ol>
           <li data-md>
            <p>If <var>child</var> is a <a data-link-type="dfn" href="#directory" id="ref-for-directory⑦">directory entry</a>:</p>
            <ol>
             <li data-md>
              <p>If <var>child</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children①⓪">children</a> is not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-is-empty" id="ref-for-list-is-empty">empty</a> and <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystemremoveoptions-recursive" id="ref-for-dom-filesystemremoveoptions-recursive②">recursive</a></code> is false:</p>
              <ol>
               <li data-md>
                <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject①⑥">Reject</a> <var>result</var> with an <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidmodificationerror" id="ref-for-invalidmodificationerror">InvalidModificationError</a></code> and abort.</p>
              </ol>
            </ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove">Remove</a> <var>child</var> from <var>entry</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children①①">children</a>.</p>
           <li data-md>
            <p>If removing <var>child</var> in the underlying file system throws an exception, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject①⑦">reject</a> <var>result</var> with that exception and abort.</p>
            <p class="note" role="note"><span>Note:</span> If <code class="idl"><a data-link-type="idl" href="#dom-filesystemremoveoptions-recursive" id="ref-for-dom-filesystemremoveoptions-recursive③">recursive</a></code> is true, the removal can fail
 non-atomically. Some files or directories might have been removed while other files
 or directories still exist.</p>
            <p class="XXX" data-remote-issue-id="68"> Better specify what possible exceptions this could throw.</p>
           <li data-md>
            <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve①④">Resolve</a> <var>result</var> with <code>undefined</code>.</p>
          </ol>
        </ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject①⑧">Reject</a> <var>result</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notfounderror" id="ref-for-notfounderror②">NotFoundError</a></code>.</p>
      </ol>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.4.5" id="api-filesystemdirectoryhandle-resolve"><span class="secno">2.4.5. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-resolve" id="ref-for-dom-filesystemdirectoryhandle-resolve①">resolve()</a></code> method</span><a class="self-link" href="#api-filesystemdirectoryhandle-resolve"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>path</var> = await <var>directory</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemdirectoryhandle-resolve" id="ref-for-dom-filesystemdirectoryhandle-resolve②">resolve</a></code>( <var>child</var> )
     <dd data-md>
      <p>If <var>child</var> is equal to <var>directory</var>, <var>path</var> will be an empty array.</p>
     <dd data-md>
      <p>If <var>child</var> is a direct child of <var>directory</var>, <var>path</var> will be an array containing <var>child</var>’s name.</p>
     <dd data-md>
      <p>If <var>child</var> is a descendant of <var>directory</var>, <var>path</var> will be an array containing the names of
 all the intermediate directories and <var>child</var>’s name as last element.
 For example if <var>directory</var> represents <code>/home/user/project</code> and <var>child</var> represents <code>/home/user/project/foo/bar</code>, this will return <code>['foo', 'bar']</code>.</p>
     <dd data-md>
      <p>Otherwise (<var>directory</var> and <var>child</var> are not related), <var>path</var> will be null.</p>
    </dl>
   </div>
   <div class="example" id="filesystemdirectoryhandle-resolve-example">
    <a class="self-link" href="#filesystemdirectoryhandle-resolve-example"></a> 
<pre class="highlight"><c- c1>// Assume we at some point got a valid directory handle.</c->
<c- a>const</c-> dir_ref <c- o>=</c-> current_project_dir<c- p>;</c->
<c- k>if</c-> <c- p>(</c-><c- o>!</c->dir_ref<c- p>)</c-> <c- k>return</c-><c- p>;</c->

<c- c1>// Now get a file reference:</c->
<c- a>const</c-> file_ref <c- o>=</c-> <c- k>await</c-> dir_ref<c- p>.</c->getFileHandle<c- p>(</c->filename<c- p>,</c-> <c- p>{</c-> create<c- o>:</c-> <c- kc>true</c-> <c- p>});</c->

<c- c1>// Check if file_ref exists inside dir_ref:</c->
<c- a>const</c-> relative_path <c- o>=</c-> <c- k>await</c-> dir_ref<c- p>.</c->resolve<c- p>(</c->file_ref<c- p>);</c->
<c- k>if</c-> <c- p>(</c->relative_path <c- o>===</c-> <c- kc>null</c-><c- p>)</c-> <c- p>{</c->
    <c- c1>// Not inside dir_ref.</c->
<c- p>}</c-> <c- k>else</c-> <c- p>{</c->
    <c- c1>// relative_path is an array of names, giving the relative path</c->
    <c- c1>// from dir_ref to the file that is represented by file_ref:</c->
    assert relative_path<c- p>.</c->pop<c- p>()</c-> <c- o>===</c-> file_ref<c- p>.</c->name<c- p>;</c->

    <c- a>let</c-> entry <c- o>=</c-> dir_ref<c- p>;</c->
    <c- k>for</c-> <c- p>(</c-><c- a>const</c-> name <c- k>of</c-> relative_path<c- p>)</c-> <c- p>{</c->
        entry <c- o>=</c-> <c- k>await</c-> entry<c- p>.</c->getDirectory<c- p>(</c->name<c- p>);</c->
    <c- p>}</c->
    entry <c- o>=</c-> <c- k>await</c-> entry<c- p>.</c->getFile<c- p>(</c->file_ref<c- p>.</c->name<c- p>);</c->

    <c- c1>// Now |entry| will represent the same file on disk as |file_ref|.</c->
    assert <c- k>await</c-> entry<c- p>.</c->isSameEntry<c- p>(</c->file_ref<c- p>)</c-> <c- o>===</c-> <c- kc>true</c-><c- p>;</c->
<c- p>}</c->
</pre>
   </div>
   <div class="algorithm" data-algorithm="resolve(possibleDescendant)" data-algorithm-for="FileSystemDirectoryHandle"> The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemDirectoryHandle" data-dfn-type="method" data-export id="dom-filesystemdirectoryhandle-resolve"><code>resolve(<var>possibleDescendant</var>)</code></dfn> method steps are
to return the result of <a data-link-type="dfn" href="#entry-resolve" id="ref-for-entry-resolve①">resolving</a><var>possibleDescendant</var>’s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry③⓪">entry</a> relative to <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②⓪">this</a>'s <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry③①">entry</a>. </div>
   <h3 class="heading settled" data-level="2.5" id="api-filesystemwritablefilestream"><span class="secno">2.5. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream⑤">FileSystemWritableFileStream</a></code> interface</span><a class="self-link" href="#api-filesystemwritablefilestream"></a></h3>
<pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-writecommandtype"><code><c- g>WriteCommandType</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="WriteCommandType" data-dfn-type="enum-value" data-export id="dom-writecommandtype-write"><code><c- s>"write"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="WriteCommandType" data-dfn-type="enum-value" data-export id="dom-writecommandtype-seek"><code><c- s>"seek"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="WriteCommandType" data-dfn-type="enum-value" data-export id="dom-writecommandtype-truncate"><code><c- s>"truncate"</c-></code></dfn>,
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-writeparams"><code><c- g>WriteParams</c-></code></dfn> {
  <c- b>required</c-> <a data-link-type="idl-name" href="#enumdef-writecommandtype" id="ref-for-enumdef-writecommandtype"><c- n>WriteCommandType</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="WriteParams" data-dfn-type="dict-member" data-export data-type="WriteCommandType " id="dom-writeparams-type"><code><c- g>type</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="WriteParams" data-dfn-type="dict-member" data-export data-type="unsigned long long? " id="dom-writeparams-size"><code><c- g>size</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="WriteParams" data-dfn-type="dict-member" data-export data-type="unsigned long long? " id="dom-writeparams-position"><code><c- g>position</c-></code></dfn>;
  (<a data-link-type="idl-name" href="https://heycam.github.io/webidl/#BufferSource" id="ref-for-BufferSource"><c- n>BufferSource</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://w3c.github.io/FileAPI/#dfn-Blob" id="ref-for-dfn-Blob"><c- n>Blob</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString⑥"><c- b>USVString</c-></a>)? <dfn class="dfn-paneled idl-code" data-dfn-for="WriteParams" data-dfn-type="dict-member" data-export data-type="(BufferSource or Blob or USVString)? " id="dom-writeparams-data"><code><c- g>data</c-></code></dfn>;
};

<c- b>typedef</c-> (<a data-link-type="idl-name" href="https://heycam.github.io/webidl/#BufferSource" id="ref-for-BufferSource①"><c- n>BufferSource</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://w3c.github.io/FileAPI/#dfn-Blob" id="ref-for-dfn-Blob①"><c- n>Blob</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString⑦"><c- b>USVString</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-writeparams" id="ref-for-dictdef-writeparams"><c- n>WriteParams</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-type="typedef" data-export id="typedefdef-filesystemwritechunktype"><code><c- g>FileSystemWriteChunkType</c-></code></dfn>;

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed④"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->), <a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext" id="ref-for-SecureContext③"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="filesystemwritablefilestream"><code><c- g>FileSystemWritableFileStream</c-></code></dfn> : <a data-link-type="idl-name" href="https://streams.spec.whatwg.org/#writablestream" id="ref-for-writablestream"><c- n>WritableStream</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise⑧"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemwritablefilestream-write" id="ref-for-dom-filesystemwritablefilestream-write"><c- g>write</c-></a>(<a data-link-type="idl-name" href="#typedefdef-filesystemwritechunktype" id="ref-for-typedefdef-filesystemwritechunktype"><c- n>FileSystemWriteChunkType</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemWritableFileStream/write(data)" data-dfn-type="argument" data-export id="dom-filesystemwritablefilestream-write-data-data"><code><c- g>data</c-></code><a class="self-link" href="#dom-filesystemwritablefilestream-write-data-data"></a></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise⑨"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined②"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemwritablefilestream-seek" id="ref-for-dom-filesystemwritablefilestream-seek"><c- g>seek</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long②"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemWritableFileStream/seek(position)" data-dfn-type="argument" data-export id="dom-filesystemwritablefilestream-seek-position-position"><code><c- g>position</c-></code><a class="self-link" href="#dom-filesystemwritablefilestream-seek-position-position"></a></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise①⓪"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined③"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemwritablefilestream-truncate" id="ref-for-dom-filesystemwritablefilestream-truncate"><c- g>truncate</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long③"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemWritableFileStream/truncate(size)" data-dfn-type="argument" data-export id="dom-filesystemwritablefilestream-truncate-size-size"><code><c- g>size</c-></code><a class="self-link" href="#dom-filesystemwritablefilestream-truncate-size-size"></a></dfn>);
};
</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream⑥">FileSystemWritableFileStream</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="FileSystemWritableFileStream" data-dfn-type="dfn" data-noexport id="filesystemwritablefilestream-file">[[file]]</dfn> (a <a data-link-type="dfn" href="#file" id="ref-for-file⑨">file entry</a>).</p>
   <p>A <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream⑦">FileSystemWritableFileStream</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="FileSystemWritableFileStream" data-dfn-type="dfn" data-noexport id="filesystemwritablefilestream-buffer">[[buffer]]</dfn> (a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence②">byte sequence</a>).
It is initially empty.</p>
   <p class="note" role="note"><span>Note:</span> This buffer can get arbitrarily large, so it is expected that implementations will not keep this in memory,
but instead use a temporary file for this. All access to [[buffer]] is done in promise returning methods and
algorithms, so even though operations on it seem sync, implementations can implement them async.</p>
   <p>A <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream⑧">FileSystemWritableFileStream</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="FileSystemWritableFileStream" data-dfn-type="dfn" data-noexport id="filesystemwritablefilestream-seekoffset">[[seekOffset]]</dfn> (a number).
It is initially 0.</p>
   <div class="note domintro" role="note">
     A <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream⑨">FileSystemWritableFileStream</a></code> object is a <code class="idl"><a data-link-type="idl" href="https://streams.spec.whatwg.org/#writablestream" id="ref-for-writablestream①">WritableStream</a></code> object with additional
convenience methods, which operates on a single file on disk. 
    <p>Upon creation, an underlying sink will have been created and the stream will be usable.
All operations executed on the stream are queuable and producers will be able to respond to backpressure.</p>
    <p>The underlying sink’s write method, and therefore <code class="idl"><a data-link-type="idl" href="https://streams.spec.whatwg.org/#default-writer-write" id="ref-for-default-writer-write">WritableStreamDefaultWriter’s write()</a></code> method, will accept byte-like data or <code class="idl"><a data-link-type="idl" href="#dictdef-writeparams" id="ref-for-dictdef-writeparams①">WriteParams</a></code> as input.</p>
    <p>The <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream①⓪">FileSystemWritableFileStream</a></code> has a file position cursor initialized at byte offset 0 from the top of the file.
When using <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-write" id="ref-for-dom-filesystemwritablefilestream-write①">write()</a></code> or by using WritableStream capabilities through the <code class="idl"><a data-link-type="idl" href="https://streams.spec.whatwg.org/#default-writer-write" id="ref-for-default-writer-write①">WritableStreamDefaultWriter’s write()</a></code> method, this position will be advanced based on the number of bytes written through the stream object.</p>
    <p>Similarly, when piping a <code class="idl"><a data-link-type="idl" href="https://streams.spec.whatwg.org/#readablestream" id="ref-for-readablestream">ReadableStream</a></code> into a <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream①①">FileSystemWritableFileStream</a></code> object, this position is updated with the number of bytes that passed through the stream.</p>
    <p><code class="idl"><a data-link-type="idl" href="https://streams.spec.whatwg.org/#ws-get-writer" id="ref-for-ws-get-writer">getWriter()</a></code> returns an instance of <code class="idl"><a data-link-type="idl" href="https://streams.spec.whatwg.org/#writablestreamdefaultwriter" id="ref-for-writablestreamdefaultwriter">WritableStreamDefaultWriter</a></code>.</p>
   </div>
   <div class="algorithm" data-algorithm="create a new FileSystemWritableFileStream">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="create-a-new-filesystemwritablefilestream">create a new FileSystemWritableFileStream</dfn> given a <a data-link-type="dfn" href="#file" id="ref-for-file①⓪">file entry</a> <var>file</var> in a <a data-link-type="dfn" href="https://tc39.es/ecma262/#realm" id="ref-for-realm">Realm</a> <var>realm</var>, run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>stream</var> be a <a data-link-type="dfn" href="https://heycam.github.io/webidl/#new" id="ref-for-new">new</a> <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream①②">FileSystemWritableFileStream</a></code> in <var>realm</var>.</p>
     <li data-md>
      <p>Set <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-file" id="ref-for-filesystemwritablefilestream-file">[[file]]</a> to <var>file</var>.</p>
     <li data-md>
      <p>Let <var>writeAlgorithm</var> be an algorithm which takes a <var>chunk</var> argument
 and returns the result of running the <a data-link-type="dfn" href="#write-a-chunk" id="ref-for-write-a-chunk">write a chunk</a> algorithm with <var>stream</var> and <var>chunk</var>.</p>
     <li data-md>
      <p>Let <var>closeAlgorithm</var> be these steps:</p>
      <ol>
       <li data-md>
        <p>Let <var>closeResult</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise" id="ref-for-a-new-promise⑨">a new promise</a>.</p>
       <li data-md>
        <p>Run these steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑧">in parallel</a>:</p>
        <ol>
         <li data-md>
          <p>Let <var>access</var> be the result of running <var>file</var>’s <a data-link-type="dfn" href="#entry-query-access" id="ref-for-entry-query-access⑧">query access</a> given "<code>readwrite</code>".</p>
         <li data-md>
          <p>If <var>access</var> is not "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted⑧">granted</a></code>",
 reject <var>closeResult</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notallowederror" id="ref-for-notallowederror⑧">NotAllowedError</a></code> and abort.</p>
         <li data-md>
          <p>Run <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined①">implementation-defined</a> malware scans and safe browsing checks.
 If these checks fail, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject①⑨">reject</a> <var>closeResult</var> with an <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#aborterror" id="ref-for-aborterror">AbortError</a></code> and abort.</p>
         <li data-md>
          <p>Set <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-file" id="ref-for-filesystemwritablefilestream-file①">[[file]]</a>'s <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data④">binary data</a> to <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer①">[[buffer]]</a>.
 If that throws an exception, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject②⓪">reject</a> <var>closeResult</var> with that exception and abort.</p>
          <p class="note" role="note"><span>Note:</span> It is expected that this atomically updates the contents of the file on disk
 being written to.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="#file-entry-lock-release" id="ref-for-file-entry-lock-release">Release the lock</a> on <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-file" id="ref-for-filesystemwritablefilestream-file②">[[file]]</a>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve①⑤">Resolve</a> <var>closeResult</var> with <code>undefined</code>.</p>
        </ol>
       <li data-md>
        <p>Return <var>closeResult</var>.</p>
      </ol>
     <li data-md>
      <p>Let <var>abortAlgorithm</var> be this step: <a data-link-type="dfn" href="#file-entry-lock-release" id="ref-for-file-entry-lock-release①">release the lock</a> on <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-file" id="ref-for-filesystemwritablefilestream-file③">[[file]]</a>.</p>
     <li data-md>
      <p>Let <var>highWaterMark</var> be 1.</p>
     <li data-md>
      <p>Let <var>sizeAlgorithm</var> be an algorithm that returns <code>1</code>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestream-set-up" id="ref-for-writablestream-set-up">Set up</a> <var>stream</var> with <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestream-set-up-writealgorithm" id="ref-for-writablestream-set-up-writealgorithm"><var>writeAlgorithm</var></a> set to <var>writeAlgorithm</var>, <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestream-set-up-closealgorithm" id="ref-for-writablestream-set-up-closealgorithm"><var>closeAlgorithm</var></a> set to <var>closeAlgorithm</var>, <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestream-set-up-abortalgorithm" id="ref-for-writablestream-set-up-abortalgorithm"><var>abortAlgorithm</var></a> set to <var>abortAlgorithm</var>, <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestream-set-up-highwatermark" id="ref-for-writablestream-set-up-highwatermark"><var>highWaterMark</var></a> set to <var>highWaterMark</var>, and <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestream-set-up-sizealgorithm" id="ref-for-writablestream-set-up-sizealgorithm"><var>sizeAlgorithm</var></a> set to <var>sizeAlgorithm</var>.</p>
     <li data-md>
      <p>Return <var>stream</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="write a chunk">
     The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="write-a-chunk">write a chunk</dfn> algorithm,
given a <code class="idl"><a data-link-type="idl" href="#filesystemwritablefilestream" id="ref-for-filesystemwritablefilestream①③">FileSystemWritableFileStream</a></code> <var>stream</var> and <var>chunk</var>,
runs these steps: 
    <ol>
     <li data-md>
      <p>Let <var>input</var> be the result of <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-convert-ecmascript-to-idl-value" id="ref-for-dfn-convert-ecmascript-to-idl-value">converting</a> <var>chunk</var> to a <code class="idl"><a data-link-type="idl" href="#typedefdef-filesystemwritechunktype" id="ref-for-typedefdef-filesystemwritechunktype①">FileSystemWriteChunkType</a></code>.
 If this throws an exception, then return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with">a promise rejected with</a> that exception.</p>
     <li data-md>
      <p>Let <var>p</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-new-promise" id="ref-for-a-new-promise①⓪">a new promise</a>.</p>
     <li data-md>
      <p>Run these steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel⑨">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>access</var> be the result of running <var>stream</var>’s <a data-link-type="dfn" href="#filesystemwritablefilestream-file" id="ref-for-filesystemwritablefilestream-file④">[[file]]</a>'s <a data-link-type="dfn" href="#entry-query-access" id="ref-for-entry-query-access⑨">query access</a> given "<code>readwrite</code>".</p>
       <li data-md>
        <p>If <var>access</var> is not "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted⑨">granted</a></code>",
  reject <var>p</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#notallowederror" id="ref-for-notallowederror⑨">NotAllowedError</a></code> and abort.</p>
       <li data-md>
        <p>Let <var>command</var> be <var>input</var>.<code class="idl"><a data-link-type="idl" href="#dom-writeparams-type" id="ref-for-dom-writeparams-type">type</a></code> if <var>input</var> is a <code class="idl"><a data-link-type="idl" href="#dictdef-writeparams" id="ref-for-dictdef-writeparams②">WriteParams</a></code>,
  and <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-write" id="ref-for-dom-writecommandtype-write">"write"</a></code> otherwise.</p>
       <li data-md>
        <p>If <var>command</var> is <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-write" id="ref-for-dom-writecommandtype-write①">"write"</a></code>:</p>
        <ol>
         <li data-md>
          <p>Let <var>data</var> be <var>input</var>.<code class="idl"><a data-link-type="idl" href="#dom-writeparams-data" id="ref-for-dom-writeparams-data">data</a></code> if <var>input</var> is a <code class="idl"><a data-link-type="idl" href="#dictdef-writeparams" id="ref-for-dictdef-writeparams③">WriteParams</a></code>,
 and <var>input</var> otherwise.</p>
         <li data-md>
          <p>If <var>data</var> is <code>undefined</code>,
 reject <var>p</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③">TypeError</a></code> and abort.</p>
         <li data-md>
          <p>Let <var>writePosition</var> be <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-seekoffset" id="ref-for-filesystemwritablefilestream-seekoffset">[[seekOffset]]</a>.</p>
         <li data-md>
          <p>If <var>input</var> is a <code class="idl"><a data-link-type="idl" href="#dictdef-writeparams" id="ref-for-dictdef-writeparams④">WriteParams</a></code> and <var>input</var>.<code class="idl"><a data-link-type="idl" href="#dom-writeparams-position" id="ref-for-dom-writeparams-position">position</a></code> is not <code>undefined</code>,
 set <var>writePosition</var> to <var>input</var>.<code class="idl"><a data-link-type="idl" href="#dom-writeparams-position" id="ref-for-dom-writeparams-position①">position</a></code>.</p>
         <li data-md>
          <p>Let <var>oldSize</var> be <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer②">[[buffer]]</a>'s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence-length" id="ref-for-byte-sequence-length">length</a>.</p>
         <li data-md>
          <p>If <var>data</var> is a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#BufferSource" id="ref-for-BufferSource②">BufferSource</a></code>,
 let <var>dataBytes</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-get-buffer-source-copy" id="ref-for-dfn-get-buffer-source-copy">a copy of</a> <var>data</var>.</p>
         <li data-md>
          <p>Otherwise, if <var>data</var> is a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/FileAPI/#dfn-Blob" id="ref-for-dfn-Blob②">Blob</a></code>:</p>
          <ol>
           <li data-md>
            <p>Let <var>dataBytes</var> be the result of performing the <a data-link-type="dfn" href="https://w3c.github.io/FileAPI/#readOperation" id="ref-for-readOperation">read operation</a> on <var>data</var>.
  If this throws an exception, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject②①">reject</a> <var>p</var> with that exception and abort.</p>
          </ol>
         <li data-md>
          <p>Otherwise:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert">Assert</a>: <var>data</var> is a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#idl-USVString" id="ref-for-idl-USVString⑧">USVString</a></code>.</p>
           <li data-md>
            <p>Let <var>dataBytes</var> be the result of <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode" id="ref-for-utf-8-encode">UTF-8 encoding</a> <var>data</var>.</p>
          </ol>
         <li data-md>
          <p>If <var>writePosition</var> is larger than <var>oldSize</var>,
 append <var>writePosition</var> - <var>oldSize</var> 0x00 (NUL) bytes to the end of <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer③">[[buffer]]</a>.</p>
          <p class="note" role="note"><span>Note:</span> Implementations are expected to behave as if the skipped over file contents
 are indeed filled with NUL bytes. That doesn’t mean these bytes have to actually be
 written to disk and take up disk space. Instead most file systems support so called
 sparse files, where these NUL bytes don’t take up actual disk space.</p>
         <li data-md>
          <p>Let <var>head</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence③">byte sequence</a> containing the first <var>writePosition</var> bytes of <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer④">[[buffer]]</a>.</p>
         <li data-md>
          <p>Let <var>tail</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence④">byte sequence</a>.</p>
         <li data-md>
          <p>If <var>writePosition</var> + <var>data</var>.<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence-length" id="ref-for-byte-sequence-length①">length</a> is smaller than <var>oldSize</var>:</p>
          <ol>
           <li data-md>
            <p>Let <var>tail</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence⑤">byte sequence</a> containing the last <var>oldSize</var> - (<var>writePosition</var> + <var>data</var>.<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence-length" id="ref-for-byte-sequence-length②">length</a>) bytes of <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer⑤">[[buffer]]</a>.</p>
          </ol>
         <li data-md>
          <p>Set <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer⑥">[[buffer]]</a> to the concatenation of <var>head</var>, <var>data</var> and <var>tail</var>.</p>
         <li data-md>
          <p>If the operations modifying <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer⑦">[[buffer]]</a> in the previous steps failed
 due to exceeding the <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-quota" id="ref-for-storage-quota">storage quota</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject②②">reject</a> <var>p</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#quotaexceedederror" id="ref-for-quotaexceedederror">QuotaExceededError</a></code> and abort,
 leaving <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer⑧">[[buffer]]</a> unmodified.</p>
          <p class="note" role="note"><span>Note:</span> <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-quota" id="ref-for-storage-quota①">Storage quota</a> only applies to files stored in the <a data-link-type="dfn" href="#origin-private-file-system" id="ref-for-origin-private-file-system②">origin private file system</a>.
 However this operation could still fail for other files, for example if the disk being written
 to runs out of disk space.</p>
         <li data-md>
          <p>Set <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-seekoffset" id="ref-for-filesystemwritablefilestream-seekoffset①">[[seekOffset]]</a> to <var>writePosition</var> + <var>data</var>.<a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence-length" id="ref-for-byte-sequence-length③">length</a>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve①⑥">Resolve</a> <var>p</var>.</p>
        </ol>
       <li data-md>
        <p>Otherwise, if <var>command</var> is <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-seek" id="ref-for-dom-writecommandtype-seek">"seek"</a></code>:</p>
        <ol>
         <li data-md>
          <p>If <var>chunk</var>.<code class="idl"><a data-link-type="idl" href="#dom-writeparams-position" id="ref-for-dom-writeparams-position②">position</a></code> is <code>undefined</code>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject②③">reject</a> <var>p</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④">TypeError</a></code> and abort.</p>
         <li data-md>
          <p>Set <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-seekoffset" id="ref-for-filesystemwritablefilestream-seekoffset②">[[seekOffset]]</a> to <var>chunk</var>.<code class="idl"><a data-link-type="idl" href="#dom-writeparams-position" id="ref-for-dom-writeparams-position③">position</a></code>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve①⑦">Resolve</a> <var>p</var>.</p>
        </ol>
       <li data-md>
        <p>Otherwise, if <var>command</var> is <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-truncate" id="ref-for-dom-writecommandtype-truncate">"truncate"</a></code>:</p>
        <ol>
         <li data-md>
          <p>If <var>chunk</var>.<code class="idl"><a data-link-type="idl" href="#dom-writeparams-size" id="ref-for-dom-writeparams-size">size</a></code> is <code>undefined</code>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject②④">reject</a> <var>p</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤">TypeError</a></code> and abort.</p>
         <li data-md>
          <p>Let <var>newSize</var> be <var>chunk</var>.<code class="idl"><a data-link-type="idl" href="#dom-writeparams-size" id="ref-for-dom-writeparams-size①">size</a></code>.</p>
         <li data-md>
          <p>Let <var>oldSize</var> be <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer⑨">[[buffer]]</a>'s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence-length" id="ref-for-byte-sequence-length④">length</a>.</p>
         <li data-md>
          <p>If <var>newSize</var> is larger than <var>oldSize</var>:</p>
          <ol>
           <li data-md>
            <p>Set <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer①⓪">[[buffer]]</a> to a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence⑥">byte sequence</a> formed by concating <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer①①">[[buffer]]</a> with a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence⑦">byte sequence</a> containing <var>newSize</var>-<var>oldSize</var> <code>0x00</code> bytes.</p>
           <li data-md>
            <p>If the operation in the previous step failed due to exceeding the <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-quota" id="ref-for-storage-quota②">storage quota</a>, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#reject" id="ref-for-reject②⑤">reject</a> <var>p</var> with a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#quotaexceedederror" id="ref-for-quotaexceedederror①">QuotaExceededError</a></code> and abort,
  leaving <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer①②">[[buffer]]</a> unmodified.</p>
            <p class="note" role="note"><span>Note:</span> <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-quota" id="ref-for-storage-quota③">Storage quota</a> only applies to files stored in the <a data-link-type="dfn" href="#origin-private-file-system" id="ref-for-origin-private-file-system③">origin private file system</a>.
  However this operation could still fail for other files, for example if the disk being written
  to runs out of disk space.</p>
          </ol>
         <li data-md>
          <p>Otherwise, if <var>newSize</var> is smaller than <var>oldSize</var>:</p>
          <ol>
           <li data-md>
            <p>Set <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer①③">[[buffer]]</a> to a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence⑧">byte sequence</a> containing the first <var>newSize</var> bytes
  in <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-buffer" id="ref-for-filesystemwritablefilestream-buffer①④">[[buffer]]</a>.</p>
          </ol>
         <li data-md>
          <p>If <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-seekoffset" id="ref-for-filesystemwritablefilestream-seekoffset③">[[seekOffset]]</a> is bigger than <var>newSize</var>,
 set <var>stream</var>.<a data-link-type="dfn" href="#filesystemwritablefilestream-seekoffset" id="ref-for-filesystemwritablefilestream-seekoffset④">[[seekOffset]]</a> to <var>newSize</var>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#resolve" id="ref-for-resolve①⑧">Resolve</a> <var>p</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Return <var>p</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.5.1" id="api-filesystemwritablefilestream-write"><span class="secno">2.5.1. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-write" id="ref-for-dom-filesystemwritablefilestream-write②">write()</a></code> method</span><a class="self-link" href="#api-filesystemwritablefilestream-write"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md>await <var>stream</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-write" id="ref-for-dom-filesystemwritablefilestream-write③">write</a></code>(<var>data</var>)
     <dt data-md>await <var>stream</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-write" id="ref-for-dom-filesystemwritablefilestream-write④">write</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-writeparams-type" id="ref-for-dom-writeparams-type①">type</a></code>: <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-write" id="ref-for-dom-writecommandtype-write②">"write"</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-writeparams-data" id="ref-for-dom-writeparams-data①">data</a></code>: <var>data</var> })
     <dd data-md>
      <p>Writes the content of <var>data</var> into the file associated with <var>stream</var> at the current file
 cursor offset.</p>
      <p>No changes are written to the actual file on disk until the stream has been closed.
 Changes are typically written to a temporary file instead.</p>
     <dt data-md>await <var>stream</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-write" id="ref-for-dom-filesystemwritablefilestream-write⑤">write</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-writeparams-type" id="ref-for-dom-writeparams-type②">type</a></code>: <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-write" id="ref-for-dom-writecommandtype-write③">"write"</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-writeparams-position" id="ref-for-dom-writeparams-position④">position</a></code>: <var>position</var>, <code class="idl"><a data-link-type="idl" href="#dom-writeparams-data" id="ref-for-dom-writeparams-data②">data</a></code>: <var>data</var> })
     <dd data-md>
      <p>Writes the content of <var>data</var> into the file associated with <var>stream</var> at <var>position</var> bytes from the top of the file. Also updates the current file cursor offset to the
 end of the written data.</p>
      <p>No changes are written to the actual file on disk until the stream has been closed.
 Changes are typically written to a temporary file instead.</p>
     <dt data-md>await <var>stream</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-write" id="ref-for-dom-filesystemwritablefilestream-write⑥">write</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-writeparams-type" id="ref-for-dom-writeparams-type③">type</a></code>: <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-seek" id="ref-for-dom-writecommandtype-seek①">"seek"</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-writeparams-position" id="ref-for-dom-writeparams-position⑤">position</a></code>: <var>position</var> })
     <dd data-md>
      <p>Updates the current file cursor offset the <var>position</var> bytes from the top of the file.</p>
     <dt data-md>await <var>stream</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-write" id="ref-for-dom-filesystemwritablefilestream-write⑦">write</a></code>({ <code class="idl"><a data-link-type="idl" href="#dom-writeparams-type" id="ref-for-dom-writeparams-type④">type</a></code>: <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-truncate" id="ref-for-dom-writecommandtype-truncate①">"truncate"</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-writeparams-size" id="ref-for-dom-writeparams-size②">size</a></code>: <var>size</var> })
     <dd data-md>
      <p>Resizes the file associated with <var>stream</var> to be <var>size</var> bytes long. If <var>size</var> is larger than
 the current file size this pads the file with null bytes, otherwise it truncates the file.</p>
      <p>The file cursor is updated when <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-truncate" id="ref-for-dom-writecommandtype-truncate②">truncate</a></code> is called. If the cursor is smaller than <var>size</var>,
 it remains unchanged. If the cursor is larger than <var>size</var>, it is set to <var>size</var> to
 ensure that subsequent writes do not error.</p>
      <p>No changes are written to the actual file until on disk until the stream has been closed.
 Changes are typically written to a temporary file instead.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="write(data)" data-algorithm-for="FileSystemWritableFileStream">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemWritableFileStream" data-dfn-type="method" data-export id="dom-filesystemwritablefilestream-write"><code>write(<var>data</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>writer</var> be the result of <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestream-get-a-writer" id="ref-for-writablestream-get-a-writer">getting a writer</a> for <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②①">this</a>.</p>
     <li data-md>
      <p>Let <var>result</var> be the result of <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestreamdefaultwriter-write-a-chunk" id="ref-for-writablestreamdefaultwriter-write-a-chunk">writing a chunk</a> to <var>writer</var> given <var>data</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestreamdefaultwriter-release" id="ref-for-writablestreamdefaultwriter-release">Release</a> <var>writer</var>.</p>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.5.2" id="api-filesystemwritablefilestream-seek"><span class="secno">2.5.2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-seek" id="ref-for-dom-filesystemwritablefilestream-seek①">seek()</a></code> method</span><a class="self-link" href="#api-filesystemwritablefilestream-seek"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md>await <var>stream</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-seek" id="ref-for-dom-filesystemwritablefilestream-seek②">seek</a></code>(<var>position</var>)
     <dd data-md>
      <p>Updates the current file cursor offset the <var>position</var> bytes from the top of the file.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="seek(position)" data-algorithm-for="FileSystemWritableFileStream">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemWritableFileStream" data-dfn-type="method" data-export id="dom-filesystemwritablefilestream-seek"><code>seek(<var>position</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>writer</var> be the result of <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestream-get-a-writer" id="ref-for-writablestream-get-a-writer①">getting a writer</a> for <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②②">this</a>.</p>
     <li data-md>
      <p>Let <var>result</var> be the result of <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestreamdefaultwriter-write-a-chunk" id="ref-for-writablestreamdefaultwriter-write-a-chunk①">writing a chunk</a> to <var>writer</var> given
  «[ "<code class="idl"><a data-link-type="idl" href="#dom-writeparams-type" id="ref-for-dom-writeparams-type⑤">type</a></code>" → <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-seek" id="ref-for-dom-writecommandtype-seek②">"seek"</a></code>, "<code class="idl"><a data-link-type="idl" href="#dom-writeparams-position" id="ref-for-dom-writeparams-position⑥">position</a></code>" → <var>position</var> ]».</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestreamdefaultwriter-release" id="ref-for-writablestreamdefaultwriter-release①">Release</a> <var>writer</var>.</p>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.5.3" id="api-filesystemwritablefilestream-truncate"><span class="secno">2.5.3. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-truncate" id="ref-for-dom-filesystemwritablefilestream-truncate①">truncate()</a></code> method</span><a class="self-link" href="#api-filesystemwritablefilestream-truncate"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md>await <var>stream</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemwritablefilestream-truncate" id="ref-for-dom-filesystemwritablefilestream-truncate②">truncate</a></code>(<var>size</var>)
     <dd data-md>
      <p>Resizes the file associated with <var>stream</var> to be <var>size</var> bytes long. If <var>size</var> is larger than
 the current file size this pads the file with null bytes, otherwise it truncates the file.</p>
      <p>The file cursor is updated when <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-truncate" id="ref-for-dom-writecommandtype-truncate③">truncate</a></code> is called. If the cursor is smaller than <var>size</var>,
 it remains unchanged. If the cursor is larger than <var>size</var>, it is set to <var>size</var> to
 ensure that subsequent writes do not error.</p>
      <p>No changes are written to the actual file until on disk until the stream has been closed.
 Changes are typically written to a temporary file instead.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="truncate(size)" data-algorithm-for="FileSystemWritableFileStream">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemWritableFileStream" data-dfn-type="method" data-export id="dom-filesystemwritablefilestream-truncate"><code>truncate(<var>size</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>writer</var> be the result of <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestream-get-a-writer" id="ref-for-writablestream-get-a-writer②">getting a writer</a> for <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②③">this</a>.</p>
     <li data-md>
      <p>Let <var>result</var> be the result of <a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestreamdefaultwriter-write-a-chunk" id="ref-for-writablestreamdefaultwriter-write-a-chunk②">writing a chunk</a> to <var>writer</var> given
  «[ "<code class="idl"><a data-link-type="idl" href="#dom-writeparams-type" id="ref-for-dom-writeparams-type⑥">type</a></code>" → <code class="idl"><a data-link-type="idl" href="#dom-writecommandtype-truncate" id="ref-for-dom-writecommandtype-truncate④">"truncate"</a></code>, "<code class="idl"><a data-link-type="idl" href="#dom-writeparams-size" id="ref-for-dom-writeparams-size③">size</a></code>" → <var>size</var> ]».</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://streams.spec.whatwg.org/#writablestreamdefaultwriter-release" id="ref-for-writablestreamdefaultwriter-release②">Release</a> <var>writer</var>.</p>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.6" id="api-filesystemsyncaccesshandle"><span class="secno">2.6. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#filesystemsyncaccesshandle" id="ref-for-filesystemsyncaccesshandle⑦">FileSystemSyncAccessHandle</a></code> interface</span><a class="self-link" href="#api-filesystemsyncaccesshandle"></a></h3>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-filesystemreadwriteoptions"><code><c- g>FileSystemReadWriteOptions</c-></code></dfn> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#EnforceRange" id="ref-for-EnforceRange"><c- g>EnforceRange</c-></a>] <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long④"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-default="0" data-dfn-for="FileSystemReadWriteOptions" data-dfn-type="dict-member" data-export data-type="unsigned long long " id="dom-filesystemreadwriteoptions-at"><code><c- g>at</c-></code></dfn> = 0;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed" id="ref-for-Exposed⑤"><c- g>Exposed</c-></a>=<c- n>DedicatedWorker</c->, <a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext" id="ref-for-SecureContext④"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="filesystemsyncaccesshandle"><code><c- g>FileSystemSyncAccessHandle</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long⑤"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemSyncAccessHandle" data-dfn-type="method" data-export data-lt="read(buffer, options)|read(buffer)" id="dom-filesystemsyncaccesshandle-read"><code><c- g>read</c-></code></dfn>([<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#AllowShared" id="ref-for-AllowShared"><c- g>AllowShared</c-></a>] <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#BufferSource" id="ref-for-BufferSource③"><c- n>BufferSource</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemSyncAccessHandle/read(buffer, options), FileSystemSyncAccessHandle/read(buffer)" data-dfn-type="argument" data-export id="dom-filesystemsyncaccesshandle-read-buffer-options-buffer"><code><c- g>buffer</c-></code><a class="self-link" href="#dom-filesystemsyncaccesshandle-read-buffer-options-buffer"></a></dfn>,
                          <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemreadwriteoptions" id="ref-for-dictdef-filesystemreadwriteoptions"><c- n>FileSystemReadWriteOptions</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemSyncAccessHandle/read(buffer, options), FileSystemSyncAccessHandle/read(buffer)" data-dfn-type="argument" data-export id="dom-filesystemsyncaccesshandle-read-buffer-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-filesystemsyncaccesshandle-read-buffer-options-options"></a></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long⑥"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemSyncAccessHandle" data-dfn-type="method" data-export data-lt="write(buffer, options)|write(buffer)" id="dom-filesystemsyncaccesshandle-write"><code><c- g>write</c-></code></dfn>([<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#AllowShared" id="ref-for-AllowShared①"><c- g>AllowShared</c-></a>] <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#BufferSource" id="ref-for-BufferSource④"><c- n>BufferSource</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemSyncAccessHandle/write(buffer, options), FileSystemSyncAccessHandle/write(buffer)" data-dfn-type="argument" data-export id="dom-filesystemsyncaccesshandle-write-buffer-options-buffer"><code><c- g>buffer</c-></code><a class="self-link" href="#dom-filesystemsyncaccesshandle-write-buffer-options-buffer"></a></dfn>,
                           <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemreadwriteoptions" id="ref-for-dictdef-filesystemreadwriteoptions①"><c- n>FileSystemReadWriteOptions</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemSyncAccessHandle/write(buffer, options), FileSystemSyncAccessHandle/write(buffer)" data-dfn-type="argument" data-export id="dom-filesystemsyncaccesshandle-write-buffer-options-options"><code><c- g>options</c-></code><a class="self-link" href="#dom-filesystemsyncaccesshandle-write-buffer-options-options"></a></dfn> = {});

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined④"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-filesystemsyncaccesshandle-truncate" id="ref-for-dom-filesystemsyncaccesshandle-truncate"><c- g>truncate</c-></a>([<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#EnforceRange" id="ref-for-EnforceRange①"><c- g>EnforceRange</c-></a>] <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long⑦"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="idl-code" data-dfn-for="FileSystemSyncAccessHandle/truncate(newSize)" data-dfn-type="argument" data-export id="dom-filesystemsyncaccesshandle-truncate-newsize-newsize"><code><c- g>newSize</c-></code><a class="self-link" href="#dom-filesystemsyncaccesshandle-truncate-newsize-newsize"></a></dfn>);
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long⑧"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="method" href="#dom-filesystemsyncaccesshandle-getsize" id="ref-for-dom-filesystemsyncaccesshandle-getsize"><c- g>getSize</c-></a>();
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined⑤"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-filesystemsyncaccesshandle-flush" id="ref-for-dom-filesystemsyncaccesshandle-flush"><c- g>flush</c-></a>();
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined" id="ref-for-idl-undefined⑥"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-filesystemsyncaccesshandle-close" id="ref-for-dom-filesystemsyncaccesshandle-close"><c- g>close</c-></a>();
};

</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#filesystemsyncaccesshandle" id="ref-for-filesystemsyncaccesshandle⑧">FileSystemSyncAccessHandle</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="FileSystemSyncAccessHandle" data-dfn-type="dfn" data-noexport id="filesystemsyncaccesshandle-file">[[file]]</dfn> (a <a data-link-type="dfn" href="#file" id="ref-for-file①①">file entry</a>).</p>
   <p>A <code class="idl"><a data-link-type="idl" href="#filesystemsyncaccesshandle" id="ref-for-filesystemsyncaccesshandle⑨">FileSystemSyncAccessHandle</a></code> has an associated <dfn class="dfn-paneled" data-dfn-for="FileSystemSyncAccessHandle" data-dfn-type="dfn" data-noexport id="filesystemsyncaccesshandle-state">[[state]]</dfn>,
a string that may exclusively be "<code>open</code>" or "<code>closed</code>".</p>
   <p>A <code class="idl"><a data-link-type="idl" href="#filesystemsyncaccesshandle" id="ref-for-filesystemsyncaccesshandle①⓪">FileSystemSyncAccessHandle</a></code> is an object that is capable of reading from/writing to,
as well as obtaining and changing the size of, a single file.</p>
   <p>A <code class="idl"><a data-link-type="idl" href="#filesystemsyncaccesshandle" id="ref-for-filesystemsyncaccesshandle①①">FileSystemSyncAccessHandle</a></code> offers synchronous methods. This allows for higher performance on
contexts where asynchronous operations come with high overhead, e.g., WebAssembly.</p>
   <div class="algorithm" data-algorithm="create a new FileSystemSyncAccessHandle">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="create-a-new-filesystemsyncaccesshandle">create a new FileSystemSyncAccessHandle</dfn> given a <a data-link-type="dfn" href="#file" id="ref-for-file①②">file entry</a> <var>file</var> in a <a data-link-type="dfn" href="https://tc39.es/ecma262/#realm" id="ref-for-realm①">Realm</a> <var>realm</var>, run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>handle</var> be a <a data-link-type="dfn" href="https://heycam.github.io/webidl/#new" id="ref-for-new①">new</a> <code class="idl"><a data-link-type="idl" href="#filesystemsyncaccesshandle" id="ref-for-filesystemsyncaccesshandle①②">FileSystemSyncAccessHandle</a></code> in <var>realm</var>.</p>
     <li data-md>
      <p>Set <var>handle</var>.<a data-link-type="dfn" href="#filesystemsyncaccesshandle-file" id="ref-for-filesystemsyncaccesshandle-file">[[file]]</a> to <var>file</var>.</p>
     <li data-md>
      <p>Set <var>handle</var>.<a data-link-type="dfn" href="#filesystemsyncaccesshandle-state" id="ref-for-filesystemsyncaccesshandle-state">[[state]]</a> to "<code>open</code>".</p>
     <li data-md>
      <p>Return <var>handle</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.6.1" id="api-filesystemsyncaccesshandle-read"><span class="secno">2.6.1. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemsyncaccesshandle-read" id="ref-for-dom-filesystemsyncaccesshandle-read">read()</a></code> method</span><a class="self-link" href="#api-filesystemsyncaccesshandle-read"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemsyncaccesshandle-read" id="ref-for-dom-filesystemsyncaccesshandle-read①">read</a></code>(<var>buffer</var>)
     <dt data-md><var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemsyncaccesshandle-read" id="ref-for-dom-filesystemsyncaccesshandle-read②">read</a></code>(<var>buffer</var>, { <code class="idl"><a data-link-type="idl" href="#dom-filesystemreadwriteoptions-at" id="ref-for-dom-filesystemreadwriteoptions-at">at</a></code> })
     <dd data-md>
      <p>Reads the contents of the file associated with <var>handle</var> into <var>buffer</var>, optionally at a given offset.</p>
    </dl>
   </div>
   <p>// TODO(fivedots): Specify how Access Handles should react when reading from a file that has been modified externally.</p>
   <div class="algorithm" data-algorithm="read(buffer, FileSystemReadWriteOptions: options)" data-algorithm-for="FileSystemSyncAccessHandle">
     The <dfn class="idl-code" data-dfn-for="FileSystemSyncAccessHandle" data-dfn-type="method" data-export id="dom-filesystemsyncaccesshandle-read-buffer-filesystemreadwriteoptions-options"><code>read(<var>buffer</var>, <code class="idl"><a data-link-type="idl" href="#dictdef-filesystemreadwriteoptions" id="ref-for-dictdef-filesystemreadwriteoptions②">FileSystemReadWriteOptions</a></code>: <var>options</var>)</code><a class="self-link" href="#dom-filesystemsyncaccesshandle-read-buffer-filesystemreadwriteoptions-options"></a></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②④">this</a>.<a data-link-type="dfn" href="#filesystemsyncaccesshandle-state" id="ref-for-filesystemsyncaccesshandle-state①">[[state]]</a> is "<code>closed</code>", throw an <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror①">InvalidStateError</a></code>.</p>
     <li data-md>
      <p>Let <var>bufferSize</var> be <var>buffer</var>’s <a data-link-type="dfn">byte length</a>.</p>
     <li data-md>
      <p>Let <var>fileContents</var> be <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②⑤">this</a>.<a data-link-type="dfn" href="#filesystemsyncaccesshandle-file" id="ref-for-filesystemsyncaccesshandle-file①">[[file]]</a>'s <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data⑤">binary data</a>.</p>
     <li data-md>
      <p>Let <var>fileSize</var> be <var>fileContents</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence-length" id="ref-for-byte-sequence-length⑤">length</a>.</p>
     <li data-md>
      <p>Let <var>readStart</var> be <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystemreadwriteoptions-at" id="ref-for-dom-filesystemreadwriteoptions-at①">at</a></code>.</p>
     <li data-md>
      <p>If <var>readStart</var> is larger than <var>fileSize</var>, return 0.</p>
     <li data-md>
      <p>Let <var>readEnd</var> be <var>readStart</var> + (<var>bufferSize</var> − 1).</p>
     <li data-md>
      <p>If <var>readEnd</var> is larger than <var>fileSize</var>, set <var>readEnd</var> to <var>fileSize</var>.</p>
     <li data-md>
      <p>Let <var>bytes</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence⑨">byte sequence</a> containing the bytes from <var>readStart</var> to <var>readEnd</var> of <var>fileContents</var>.</p>
     <li data-md>
      <p>Let <var>result</var> be <var>bytes</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence-length" id="ref-for-byte-sequence-length⑥">length</a>.</p>
     <li data-md>
      <p>If the operations reading from <var>fileContents</var> in the previous steps failed:</p>
      <ol>
       <li data-md>
        <p>If there were partial reads and the number of bytes that were read into <var>bytes</var> is known,
 set <var>result</var> to the number of read bytes.</p>
       <li data-md>
        <p>Otherwise set <var>result</var> to 0.</p>
      </ol>
     <li data-md>
      <p>Let <var>arrayBuffer</var> be <var>buffer</var>’s <a data-link-type="dfn">underlying buffer</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn">Write</a> <var>bytes</var> into <var>arrayBuffer</var>.</p>
     <li data-md>
      <p>Return <var>result</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.6.2" id="api-filesystemsyncaccesshandle-write"><span class="secno">2.6.2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemsyncaccesshandle-write" id="ref-for-dom-filesystemsyncaccesshandle-write">write()</a></code> method</span><a class="self-link" href="#api-filesystemsyncaccesshandle-write"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemsyncaccesshandle-write" id="ref-for-dom-filesystemsyncaccesshandle-write①">write</a></code>(<var>buffer</var>)
     <dt data-md><var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemsyncaccesshandle-write" id="ref-for-dom-filesystemsyncaccesshandle-write②">write</a></code>(<var>buffer</var>, { <code class="idl"><a data-link-type="idl" href="#dom-filesystemreadwriteoptions-at" id="ref-for-dom-filesystemreadwriteoptions-at②">at</a></code> })
     <dd data-md>
      <p>Writes the content of <var>buffer</var> into the file associated with <var>handle</var>, optionally at a given offset, and returns the number of written bytes.
 Checking the returned number of written bytes allows callers to detect and handle errors and partial writes.</p>
    </dl>
   </div>
   <p>// TODO(fivedots): Figure out how to properly check the available storage quota (in this method and others) by passing the right storage shelf.</p>
   <div class="algorithm" data-algorithm="write(buffer, FileSystemReadWriteOptions: options)" data-algorithm-for="FileSystemSyncAccessHandle">
     The <dfn class="idl-code" data-dfn-for="FileSystemSyncAccessHandle" data-dfn-type="method" data-export id="dom-filesystemsyncaccesshandle-write-buffer-filesystemreadwriteoptions-options"><code>write(<var>buffer</var>, <code class="idl"><a data-link-type="idl" href="#dictdef-filesystemreadwriteoptions" id="ref-for-dictdef-filesystemreadwriteoptions③">FileSystemReadWriteOptions</a></code>: <var>options</var>)</code><a class="self-link" href="#dom-filesystemsyncaccesshandle-write-buffer-filesystemreadwriteoptions-options"></a></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②⑥">this</a>.<a data-link-type="dfn" href="#filesystemsyncaccesshandle-state" id="ref-for-filesystemsyncaccesshandle-state②">[[state]]</a> is "<code>closed</code>", throw an <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror②">InvalidStateError</a></code>.</p>
     <li data-md>
      <p>Let <var>writePosition</var> be <var>options</var>.<code class="idl"><a data-link-type="idl" href="#dom-filesystemreadwriteoptions-at" id="ref-for-dom-filesystemreadwriteoptions-at③">at</a></code>.</p>
     <li data-md>
      <p>Let <var>fileContents</var> be a copy of <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②⑦">this</a>.<a data-link-type="dfn" href="#filesystemsyncaccesshandle-file" id="ref-for-filesystemsyncaccesshandle-file②">[[file]]</a>'s <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data⑥">binary data</a>.</p>
     <li data-md>
      <p>Let <var>oldSize</var> be <var>fileContents</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence-length" id="ref-for-byte-sequence-length⑦">length</a>.</p>
     <li data-md>
      <p>Let <var>bufferSize</var> be <var>buffer</var>’s <a data-link-type="dfn">byte length</a>.</p>
     <li data-md>
      <p>If <var>writePosition</var> is larger than <var>oldSize</var>,
 append <var>writePosition</var> − <var>oldSize</var> 0x00 (NUL) bytes to the end of <var>fileContents</var>.</p>
      <p class="note" role="note"><span>Note:</span> Implementations are expected to behave as if the skipped over file contents
 are indeed filled with NUL bytes. That doesn’t mean these bytes have to actually be
 written to disk and take up disk space. Instead most file systems support so called
 sparse files, where these NUL bytes don’t take up actual disk space.</p>
     <li data-md>
      <p>Let <var>head</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence①⓪">byte sequence</a> containing the first <var>writePosition</var> bytes of <var>fileContents</var>.</p>
     <li data-md>
      <p>Let <var>tail</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence①①">byte sequence</a>.</p>
     <li data-md>
      <p>If <var>writePosition</var> + <var>bufferSize</var> is smaller than <var>oldSize</var>:</p>
      <ol>
       <li data-md>
        <p>Set <var>tail</var> to a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence①②">byte sequence</a> containing the last <var>oldSize</var> − (<var>writePosition</var> + <var>bufferSize</var>) bytes of <var>fileContents</var>.</p>
      </ol>
     <li data-md>
      <p>Let <var>newSize</var> be <var>head</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence-length" id="ref-for-byte-sequence-length⑧">length</a> + <var>bufferSize</var> + <var>tail</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence-length" id="ref-for-byte-sequence-length⑨">length</a>.</p>
     <li data-md>
      <p>If <var>newSize</var> − <var>oldSize</var> exceeds the available <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-quota" id="ref-for-storage-quota④">storage quota</a>, throw a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#quotaexceedederror" id="ref-for-quotaexceedederror②">QuotaExceededError</a></code>.</p>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②⑧">this</a>.<a data-link-type="dfn" href="#filesystemsyncaccesshandle-file" id="ref-for-filesystemsyncaccesshandle-file③">[[file]]</a>'s <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data⑦">binary data</a> to the concatenation of <var>head</var>, the contents of <var>buffer</var> and <var>tail</var>.</p>
      <p class="note" role="note"><span>Note:</span> The mechanism used to access buffer’s contents is left purposely vague.
It is likely that implementations will choose to focus on performance by issuing
direct write calls to the host operating system (instead of creating a copy of buffer),
which prevents a detailed specification of the write order and the results of partial writes.</p>
     <li data-md>
      <p>If the operations modifying the <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this②⑨">this</a>.<a data-link-type="dfn" href="#filesystemsyncaccesshandle-file" id="ref-for-filesystemsyncaccesshandle-file④">[[file]]</a>'s <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data⑧">binary data</a> in the previous steps
 failed:</p>
      <ol>
       <li data-md>
        <p>If there were partial writes and the number of bytes that were written from <var>buffer</var> is known,
 return the number of bytes that were written from <var>buffer</var>.</p>
       <li data-md>
        <p>Otherwise throw an <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror③">InvalidStateError</a></code>.</p>
      </ol>
     <li data-md>
      <p>Return <var>bufferSize</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.6.3" id="api-filesystemsyncaccesshandle-truncate"><span class="secno">2.6.3. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemsyncaccesshandle-truncate" id="ref-for-dom-filesystemsyncaccesshandle-truncate①">truncate()</a></code> method</span><a class="self-link" href="#api-filesystemsyncaccesshandle-truncate"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemsyncaccesshandle-truncate" id="ref-for-dom-filesystemsyncaccesshandle-truncate②">truncate</a></code>(<var>newSize</var>)
     <dd data-md>
      <p>Resizes the file associated with <var>handle</var> to be <var>newSize</var> bytes long. If <var>newSize</var> is larger than the current file size this pads the file with null bytes; otherwise it truncates the file.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="truncate(newSize)" data-algorithm-for="FileSystemSyncAccessHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemSyncAccessHandle" data-dfn-type="method" data-export id="dom-filesystemsyncaccesshandle-truncate"><code>truncate(<var>newSize</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③⓪">this</a>.<a data-link-type="dfn" href="#filesystemsyncaccesshandle-state" id="ref-for-filesystemsyncaccesshandle-state③">[[state]]</a> is "<code>closed</code>", throw an <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror④">InvalidStateError</a></code>.</p>
     <li data-md>
      <p>Let <var>fileContents</var> be a copy of <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③①">this</a>.<a data-link-type="dfn" href="#filesystemsyncaccesshandle-file" id="ref-for-filesystemsyncaccesshandle-file⑤">[[file]]</a>'s <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data⑨">binary data</a>.</p>
     <li data-md>
      <ol>
       <li data-md>
        <p>Let <var>oldSize</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence-length" id="ref-for-byte-sequence-length①⓪">length</a> of <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③②">this</a>.<a data-link-type="dfn" href="#filesystemsyncaccesshandle-file" id="ref-for-filesystemsyncaccesshandle-file⑥">[[file]]</a>'s <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data①⓪">binary data</a>.</p>
      </ol>
     <li data-md>
      <p>If <var>newSize</var> is larger than <var>oldSize</var>:</p>
      <ol>
       <li data-md>
        <p>If <var>newSize</var> − <var>oldSize</var> exceeds the available <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-quota" id="ref-for-storage-quota⑤">storage quota</a>, throw a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#quotaexceedederror" id="ref-for-quotaexceedederror③">QuotaExceededError</a></code>.</p>
       <li data-md>
        <p>Set <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③③">this</a>.<a data-link-type="dfn" href="#filesystemsyncaccesshandle-file" id="ref-for-filesystemsyncaccesshandle-file⑦">[[file]]</a>'s to a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence①③">byte sequence</a> formed by concatenating <var>fileContents</var> with a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence①④">byte sequence</a> containing <var>newSize</var> − <var>oldSize</var> 0x00 bytes.</p>
       <li data-md>
        <p>If the operations modifying the <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③④">this</a>.<a data-link-type="dfn" href="#filesystemsyncaccesshandle-file" id="ref-for-filesystemsyncaccesshandle-file⑧">[[file]]</a>'s <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data①①">binary data</a> in the previous steps
  failed, throw an <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror⑤">InvalidStateError</a></code>.</p>
      </ol>
     <li data-md>
      <p>Otherwise, if <var>newSize</var> is smaller than <var>oldSize</var>:</p>
      <ol>
       <li data-md>
        <p>Set <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③⑤">this</a>.<a data-link-type="dfn" href="#filesystemsyncaccesshandle-file" id="ref-for-filesystemsyncaccesshandle-file⑨">[[file]]</a>'s to a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence①⑤">byte sequence</a> containing the first <var>newSize</var> bytes
  in <var>fileContents</var>.</p>
       <li data-md>
        <p>If the operations modifying the <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③⑥">this</a>.<a data-link-type="dfn" href="#filesystemsyncaccesshandle-file" id="ref-for-filesystemsyncaccesshandle-file①⓪">[[file]]</a>'s <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data①②">binary data</a> in the previous steps
  failed, throw an <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror⑥">InvalidStateError</a></code>.</p>
      </ol>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.6.4" id="api-filesystemsyncaccesshandle-getsize"><span class="secno">2.6.4. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemsyncaccesshandle-getsize" id="ref-for-dom-filesystemsyncaccesshandle-getsize①">getSize()</a></code> method</span><a class="self-link" href="#api-filesystemsyncaccesshandle-getsize"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemsyncaccesshandle-getsize" id="ref-for-dom-filesystemsyncaccesshandle-getsize②">getSize()</a></code>
     <dd data-md>
      <p>Returns the size of the file associated with <var>handle</var> in bytes.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="getSize()" data-algorithm-for="FileSystemSyncAccessHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemSyncAccessHandle" data-dfn-type="method" data-export id="dom-filesystemsyncaccesshandle-getsize"><code>getSize()</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③⑦">this</a>.<a data-link-type="dfn" href="#filesystemsyncaccesshandle-state" id="ref-for-filesystemsyncaccesshandle-state④">[[state]]</a> is "<code>closed</code>", throw an <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#invalidstateerror" id="ref-for-invalidstateerror⑦">InvalidStateError</a></code>.</p>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③⑧">this</a>.<a data-link-type="dfn" href="#filesystemsyncaccesshandle-file" id="ref-for-filesystemsyncaccesshandle-file①①">[[file]]</a>'s <a data-link-type="dfn" href="#file-entry-binary-data" id="ref-for-file-entry-binary-data①③">binary data</a>'s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence-length" id="ref-for-byte-sequence-length①①">length</a>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.6.5" id="api-filesystemsyncaccesshandle-flush"><span class="secno">2.6.5. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemsyncaccesshandle-flush" id="ref-for-dom-filesystemsyncaccesshandle-flush①">flush()</a></code> method</span><a class="self-link" href="#api-filesystemsyncaccesshandle-flush"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemsyncaccesshandle-flush" id="ref-for-dom-filesystemsyncaccesshandle-flush②">flush()</a></code>
     <dd data-md>
      <p>Ensures that the contents of the file associated with <var>handle</var> contain all the modifications done through <code class="idl"><a data-link-type="idl" href="#dom-filesystemsyncaccesshandle-write" id="ref-for-dom-filesystemsyncaccesshandle-write③">write()</a></code>.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="flush()" data-algorithm-for="FileSystemSyncAccessHandle">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemSyncAccessHandle" data-dfn-type="method" data-export id="dom-filesystemsyncaccesshandle-flush"><code>flush()</code></dfn> method steps are: 
    <p>// TODO(fivedots): Fill in, after figuring out language to describe flushing at the OS level.</p>
   </div>
   <h4 class="heading settled" data-level="2.6.6" id="api-filesystemsyncaccesshandle-close"><span class="secno">2.6.6. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#dom-filesystemsyncaccesshandle-close" id="ref-for-dom-filesystemsyncaccesshandle-close①">close()</a></code> method</span><a class="self-link" href="#api-filesystemsyncaccesshandle-close"></a></h4>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>handle</var> . <code class="idl"><a data-link-type="idl" href="#dom-filesystemsyncaccesshandle-close" id="ref-for-dom-filesystemsyncaccesshandle-close②">close()</a></code>
     <dd data-md>
      <p>Flushes the access handle and then closes it. Closing an access handle disables any further operations on it and <a data-link-type="dfn" href="#file-entry-lock-release" id="ref-for-file-entry-lock-release②">releases the lock</a> on the <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry③②">entry</a> associated with <var>handle</var>.</p>
    </dl>
   </div>
   <p>//TODO(fivedots): Figure out language to describe flushing the file at the OS level before closing the handle.</p>
   <div class="algorithm" data-algorithm="close()" data-algorithm-for="FileSystemSyncAccessHandle"> The <dfn class="dfn-paneled idl-code" data-dfn-for="FileSystemSyncAccessHandle" data-dfn-type="method" data-export id="dom-filesystemsyncaccesshandle-close"><code>close()</code></dfn> method steps are
to set <a data-link-type="dfn" href="https://heycam.github.io/webidl/#this" id="ref-for-this③⑨">this</a>.<a data-link-type="dfn" href="#filesystemsyncaccesshandle-state" id="ref-for-filesystemsyncaccesshandle-state⑤">[[state]]</a> to "<code>closed</code>". </div>
   <h2 class="heading settled" data-level="3" id="sandboxed-filesystem"><span class="secno">3. </span><span class="content">Accessing the Origin Private File System</span><a class="self-link" href="#sandboxed-filesystem"></a></h2>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="origin-private-file-system">origin private file system</dfn> is a <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-endpoint" id="ref-for-storage-endpoint">storage endpoint</a> whose <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-endpoint-identifier" id="ref-for-storage-endpoint-identifier">identifier</a> is <code>"fileSystem"</code>, <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-endpoint-types" id="ref-for-storage-endpoint-types">types</a> are <code>« "local" »</code>,
and <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-endpoint-quota" id="ref-for-storage-endpoint-quota">quota</a> is null.</p>
   <p class="XXX"> Storage endpoints should be defined in <a data-link-type="biblio" href="#biblio-storage">[storage]</a> itself, rather
than being defined here. So merge this into the table there.</p>
   <p class="note" role="note"><span>Note:</span> While user agents will typically implement this by persisting the contents of this <a data-link-type="dfn" href="#origin-private-file-system" id="ref-for-origin-private-file-system④">origin private file system</a> to disk, it is not intended that the contents are easily
user accessible. Similarly there is no expectation that files or directories with names
matching the names of children of the <a data-link-type="dfn" href="#origin-private-file-system" id="ref-for-origin-private-file-system⑤">origin private file system</a> exist.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext" id="ref-for-SecureContext⑤"><c- g>SecureContext</c-></a>]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://storage.spec.whatwg.org/#storagemanager" id="ref-for-storagemanager"><c- g>StorageManager</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise" id="ref-for-idl-promise①①"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle①⓪"><c- n>FileSystemDirectoryHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagemanager-getdirectory" id="ref-for-dom-storagemanager-getdirectory①"><c- g>getDirectory</c-></a>();
};
</pre>
   <div class="note domintro" role="note">
    <dl>
     <dt data-md><var>directoryHandle</var> = await navigator . storage . <code class="idl"><a data-link-type="idl" href="#dom-storagemanager-getdirectory" id="ref-for-dom-storagemanager-getdirectory②">getDirectory()</a></code>
     <dd data-md>
      <p>Returns the root directory of the origin private file system.</p>
    </dl>
   </div>
   <div class="algorithm" data-algorithm="getDirectory()" data-algorithm-for="StorageManager">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="StorageManager" data-dfn-type="method" data-export id="dom-storagemanager-getdirectory"><code>getDirectory()</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>environment</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object" id="ref-for-current-settings-object">current settings object</a>.</p>
     <li data-md>
      <p>Let <var>map</var> be the result of running <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#obtain-a-local-storage-bottle-map" id="ref-for-obtain-a-local-storage-bottle-map">obtain a local storage bottle map</a> with <var>environment</var> and <code>"fileSystem"</code>. If this returns failure,
 return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①">a promise rejected with</a> a <code class="idl"><a data-link-type="idl" href="https://heycam.github.io/webidl/#securityerror" id="ref-for-securityerror">SecurityError</a></code>.</p>
     <li data-md>
      <p>If <var>map</var>["root"] does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists">exist</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>dir</var> be a new <a data-link-type="dfn" href="#directory" id="ref-for-directory⑧">directory entry</a> whose <a data-link-type="dfn" href="#entry-query-access" id="ref-for-entry-query-access①⓪">query access</a> and <a data-link-type="dfn" href="#entry-request-access" id="ref-for-entry-request-access⑧">request access</a> algorithms
 always return "<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/permissions/#dom-permissionstate-granted" id="ref-for-dom-permissionstate-granted①⓪">granted</a></code>".</p>
       <li data-md>
        <p>Set <var>dir</var>’s <a data-link-type="dfn" href="#entry-name" id="ref-for-entry-name①③">name</a> to the empty string.</p>
       <li data-md>
        <p>Set <var>dir</var>’s <a data-link-type="dfn" href="#directory-entry-children" id="ref-for-directory-entry-children①②">children</a> to an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-set" id="ref-for-ordered-set③">set</a>.</p>
       <li data-md>
        <p>Set <var>map</var>["root"] to <var>dir</var>.</p>
      </ol>
     <li data-md>
      <p>Return <a data-link-type="dfn" href="https://heycam.github.io/webidl/#a-promise-resolved-with" id="ref-for-a-promise-resolved-with">a promise resolved with</a> a new <code class="idl"><a data-link-type="idl" href="#filesystemdirectoryhandle" id="ref-for-filesystemdirectoryhandle①①">FileSystemDirectoryHandle</a></code>,
 whose associated <a data-link-type="dfn" href="#filesystemhandle-entry" id="ref-for-filesystemhandle-entry③③">entry</a> is <var>map</var>["root"].</p>
    </ol>
   </div>
   <h2 class="no-num heading settled" id="acks"><span class="content">Acknowledgments</span><a class="self-link" href="#acks"></a></h2>
   <p>This standard is written by <span lang="nl">Marijn Kruisselbrink</span> (<a href="https://www.google.com/">Google</a>, <a href="mailto:mek@chromium.org">mek@chromium.org</a>). </p>
   <h2 class="no-num heading settled" id="ipr"><span class="content">Intellectual property rights</span><a class="self-link" href="#ipr"></a></h2>
   <div data-fill-with="ipr">This Living Standard includes material copied from W3C WICG’s <a href="https://wicg.github.io/file-system-access/"><cite>File System Access</cite></a>, which is
available under the <a href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">W3C Software and Document License</a>. </div>
   <p>Copyright © WHATWG (Apple, Google, Mozilla, Microsoft). This work is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution 4.0
International License</a>. To the extent portions of it are incorporated into source code, such
portions in the source code are licensed under the <a href="https://opensource.org/licenses/BSD-3-Clause" rel="license">BSD 3-Clause License</a> instead.</p>
   <p>This is the Living Standard. Those
interested in the patent-review version should view the <a href="/review-drafts/2022-09/">Living Standard Review Draft</a>.</p>
  </main>
<script>
"use strict";
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("/service-worker.js");
}
</script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#dom-filesystemreadwriteoptions-at">at</a><span>, in § 2.6</span>
   <li><a href="#file-entry-binary-data">binary data</a><span>, in § 2.1</span>
   <li><a href="#filesystemwritablefilestream-buffer">[[buffer]]</a><span>, in § 2.5</span>
   <li><a href="#directory-entry-children">children</a><span>, in § 2.1</span>
   <li><a href="#dom-filesystemsyncaccesshandle-close">close()</a><span>, in § 2.6.6</span>
   <li>
    create
    <ul>
     <li><a href="#dom-filesystemgetdirectoryoptions-create">dict-member for FileSystemGetDirectoryOptions</a><span>, in § 2.4</span>
     <li><a href="#dom-filesystemgetfileoptions-create">dict-member for FileSystemGetFileOptions</a><span>, in § 2.4</span>
    </ul>
   <li><a href="#create-a-new-filesystemsyncaccesshandle">create a new FileSystemSyncAccessHandle</a><span>, in § 2.6</span>
   <li><a href="#create-a-new-filesystemwritablefilestream">create a new FileSystemWritableFileStream</a><span>, in § 2.5</span>
   <li><a href="#dom-filesystemfilehandle-createsyncaccesshandle">createSyncAccessHandle()</a><span>, in § 2.3.3</span>
   <li><a href="#dom-filesystemfilehandle-createwritable">createWritable()</a><span>, in § 2.3.2</span>
   <li><a href="#dom-filesystemfilehandle-createwritable">createWritable(options)</a><span>, in § 2.3.2</span>
   <li><a href="#dom-writeparams-data">data</a><span>, in § 2.5</span>
   <li><a href="#dom-filesystemhandlekind-directory">"directory"</a><span>, in § 2.2</span>
   <li><a href="#directory">directory</a><span>, in § 2.1</span>
   <li><a href="#directory">directory entry</a><span>, in § 2.1</span>
   <li>
    entry
    <ul>
     <li><a href="#entry">definition of</a><span>, in § 2.1</span>
     <li><a href="#filesystemhandle-entry">dfn for FileSystemHandle</a><span>, in § 2.2</span>
    </ul>
   <li><a href="#dom-filesystemhandlekind-file">"file"</a><span>, in § 2.2</span>
   <li>
    [[file]]
    <ul>
     <li><a href="#filesystemsyncaccesshandle-file">dfn for FileSystemSyncAccessHandle</a><span>, in § 2.6</span>
     <li><a href="#filesystemwritablefilestream-file">dfn for FileSystemWritableFileStream</a><span>, in § 2.5</span>
    </ul>
   <li><a href="#file">file</a><span>, in § 2.1</span>
   <li><a href="#file">file entry</a><span>, in § 2.1</span>
   <li><a href="#dictdef-filesystemcreatewritableoptions">FileSystemCreateWritableOptions</a><span>, in § 2.3</span>
   <li><a href="#filesystemdirectoryhandle">FileSystemDirectoryHandle</a><span>, in § 2.4</span>
   <li><a href="#filesystemfilehandle">FileSystemFileHandle</a><span>, in § 2.3</span>
   <li><a href="#dictdef-filesystemgetdirectoryoptions">FileSystemGetDirectoryOptions</a><span>, in § 2.4</span>
   <li><a href="#dictdef-filesystemgetfileoptions">FileSystemGetFileOptions</a><span>, in § 2.4</span>
   <li><a href="#filesystemhandle">FileSystemHandle</a><span>, in § 2.2</span>
   <li><a href="#enumdef-filesystemhandlekind">FileSystemHandleKind</a><span>, in § 2.2</span>
   <li><a href="#dictdef-filesystemreadwriteoptions">FileSystemReadWriteOptions</a><span>, in § 2.6</span>
   <li><a href="#dictdef-filesystemremoveoptions">FileSystemRemoveOptions</a><span>, in § 2.4</span>
   <li><a href="#filesystemsyncaccesshandle">FileSystemSyncAccessHandle</a><span>, in § 2.6</span>
   <li><a href="#filesystemwritablefilestream">FileSystemWritableFileStream</a><span>, in § 2.5</span>
   <li><a href="#typedefdef-filesystemwritechunktype">FileSystemWriteChunkType</a><span>, in § 2.5</span>
   <li><a href="#dom-filesystemsyncaccesshandle-flush">flush()</a><span>, in § 2.6.5</span>
   <li><a href="#dom-storagemanager-getdirectory">getDirectory()</a><span>, in § 3</span>
   <li><a href="#dom-filesystemdirectoryhandle-getdirectoryhandle">getDirectoryHandle(name)</a><span>, in § 2.4.3</span>
   <li><a href="#dom-filesystemdirectoryhandle-getdirectoryhandle">getDirectoryHandle(name, options)</a><span>, in § 2.4.3</span>
   <li><a href="#dom-filesystemfilehandle-getfile">getFile()</a><span>, in § 2.3.1</span>
   <li><a href="#dom-filesystemdirectoryhandle-getfilehandle">getFileHandle(name)</a><span>, in § 2.4.2</span>
   <li><a href="#dom-filesystemdirectoryhandle-getfilehandle">getFileHandle(name, options)</a><span>, in § 2.4.2</span>
   <li><a href="#dom-filesystemsyncaccesshandle-getsize">getSize()</a><span>, in § 2.6.4</span>
   <li><a href="#dom-filesystemhandle-issameentry">isSameEntry(other)</a><span>, in § 2.2.1</span>
   <li><a href="#dom-filesystemcreatewritableoptions-keepexistingdata">keepExistingData</a><span>, in § 2.3</span>
   <li><a href="#dom-filesystemhandle-kind">kind</a><span>, in § 2.2</span>
   <li><a href="#file-entry-lock">lock</a><span>, in § 2.1</span>
   <li><a href="#file-entry-modification-timestamp">modification timestamp</a><span>, in § 2.1</span>
   <li>
    name
    <ul>
     <li><a href="#dom-filesystemhandle-name">attribute for FileSystemHandle</a><span>, in § 2.2</span>
     <li><a href="#entry-name">dfn for entry</a><span>, in § 2.1</span>
    </ul>
   <li><a href="#origin-private-file-system">origin private file system</a><span>, in § 3</span>
   <li><a href="#entry-parent">parent</a><span>, in § 2.1</span>
   <li><a href="#filesystemdirectoryhandle-iterator-past-results">past results</a><span>, in § 2.4.1</span>
   <li><a href="#dom-writeparams-position">position</a><span>, in § 2.5</span>
   <li><a href="#entry-query-access">query access</a><span>, in § 2.1</span>
   <li><a href="#dom-filesystemsyncaccesshandle-read">read(buffer)</a><span>, in § 2.6</span>
   <li><a href="#dom-filesystemsyncaccesshandle-read-buffer-filesystemreadwriteoptions-options">read(buffer, FileSystemReadWriteOptions: options)</a><span>, in § 2.6.1</span>
   <li><a href="#dom-filesystemsyncaccesshandle-read">read(buffer, options)</a><span>, in § 2.6</span>
   <li><a href="#dom-filesystemremoveoptions-recursive">recursive</a><span>, in § 2.4</span>
   <li><a href="#file-entry-lock-release">release</a><span>, in § 2.1</span>
   <li><a href="#dom-filesystemdirectoryhandle-removeentry">removeEntry(name)</a><span>, in § 2.4.4</span>
   <li><a href="#dom-filesystemdirectoryhandle-removeentry">removeEntry(name, options)</a><span>, in § 2.4.4</span>
   <li><a href="#entry-request-access">request access</a><span>, in § 2.1</span>
   <li><a href="#entry-resolve">resolve</a><span>, in § 2.1</span>
   <li><a href="#dom-filesystemdirectoryhandle-resolve">resolve(possibleDescendant)</a><span>, in § 2.4.5</span>
   <li><a href="#dom-writecommandtype-seek">"seek"</a><span>, in § 2.5</span>
   <li><a href="#filesystemwritablefilestream-seekoffset">[[seekOffset]]</a><span>, in § 2.5</span>
   <li><a href="#dom-filesystemwritablefilestream-seek">seek(position)</a><span>, in § 2.5.2</span>
   <li><a href="#file-entry-shared-lock-count">shared lock count</a><span>, in § 2.1</span>
   <li><a href="#dom-writeparams-size">size</a><span>, in § 2.5</span>
   <li><a href="#filesystemsyncaccesshandle-state">[[state]]</a><span>, in § 2.6</span>
   <li><a href="#file-entry-lock-take">take</a><span>, in § 2.1</span>
   <li><a href="#entry-the-same-as">the same as</a><span>, in § 2.1</span>
   <li><a href="#dom-writecommandtype-truncate">"truncate"</a><span>, in § 2.5</span>
   <li><a href="#dom-filesystemsyncaccesshandle-truncate">truncate(newSize)</a><span>, in § 2.6.3</span>
   <li><a href="#dom-filesystemwritablefilestream-truncate">truncate(size)</a><span>, in § 2.5.3</span>
   <li><a href="#dom-writeparams-type">type</a><span>, in § 2.5</span>
   <li><a href="#valid-file-name">valid file name</a><span>, in § 2.1</span>
   <li><a href="#dom-writecommandtype-write">"write"</a><span>, in § 2.5</span>
   <li><a href="#write-a-chunk">write a chunk</a><span>, in § 2.5</span>
   <li><a href="#dom-filesystemsyncaccesshandle-write">write(buffer)</a><span>, in § 2.6</span>
   <li><a href="#dom-filesystemsyncaccesshandle-write-buffer-filesystemreadwriteoptions-options">write(buffer, FileSystemReadWriteOptions: options)</a><span>, in § 2.6.2</span>
   <li><a href="#dom-filesystemsyncaccesshandle-write">write(buffer, options)</a><span>, in § 2.6</span>
   <li><a href="#enumdef-writecommandtype">WriteCommandType</a><span>, in § 2.5</span>
   <li><a href="#dom-filesystemwritablefilestream-write">write(data)</a><span>, in § 2.5.1</span>
   <li><a href="#dictdef-writeparams">WriteParams</a><span>, in § 2.5</span>
  </ul>
  <aside class="dfn-panel" data-for="term-for-realm">
   <a href="https://tc39.es/ecma262/#realm">https://tc39.es/ecma262/#realm</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-realm">2.5. The FileSystemWritableFileStream interface</a>
    <li><a href="#ref-for-realm①">2.6. The FileSystemSyncAccessHandle interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-utf-8-encode">
   <a href="https://encoding.spec.whatwg.org/#utf-8-encode">https://encoding.spec.whatwg.org/#utf-8-encode</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-utf-8-encode">2.5. The FileSystemWritableFileStream interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-Blob">
   <a href="https://w3c.github.io/FileAPI/#dfn-Blob">https://w3c.github.io/FileAPI/#dfn-Blob</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-Blob">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-dfn-Blob①">(2)</a> <a href="#ref-for-dfn-Blob②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-file">
   <a href="https://w3c.github.io/FileAPI/#dfn-file">https://w3c.github.io/FileAPI/#dfn-file</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-file">2.3. The FileSystemFileHandle interface</a>
    <li><a href="#ref-for-dfn-file①">2.3.1. The getFile() method</a> <a href="#ref-for-dfn-file②">(2)</a> <a href="#ref-for-dfn-file③">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-lastModified">
   <a href="https://w3c.github.io/FileAPI/#dfn-lastModified">https://w3c.github.io/FileAPI/#dfn-lastModified</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-lastModified">2.3.1. The getFile() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-name">
   <a href="https://w3c.github.io/FileAPI/#dfn-name">https://w3c.github.io/FileAPI/#dfn-name</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-name">2.3.1. The getFile() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-readOperation">
   <a href="https://w3c.github.io/FileAPI/#readOperation">https://w3c.github.io/FileAPI/#readOperation</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-readOperation">2.5. The FileSystemWritableFileStream interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-snapshot-state">
   <a href="https://w3c.github.io/FileAPI/#snapshot-state">https://w3c.github.io/FileAPI/#snapshot-state</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-snapshot-state">2.3.1. The getFile() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-type">
   <a href="https://w3c.github.io/FileAPI/#dfn-type">https://w3c.github.io/FileAPI/#dfn-type</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-type">2.3.1. The getFile() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-UnixEpoch">
   <a href="https://w3c.github.io/FileAPI/#UnixEpoch">https://w3c.github.io/FileAPI/#UnixEpoch</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-UnixEpoch">2.1. Concepts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-serializable">
   <a href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable">https://html.spec.whatwg.org/multipage/structured-data.html#serializable</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-serializable">2.2. The FileSystemHandle interface</a>
    <li><a href="#ref-for-serializable①">2.3. The FileSystemFileHandle interface</a>
    <li><a href="#ref-for-serializable②">2.4. The FileSystemDirectoryHandle interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-current-settings-object">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object">https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-current-settings-object">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-deserialization-steps">
   <a href="https://html.spec.whatwg.org/multipage/structured-data.html#deserialization-steps">https://html.spec.whatwg.org/multipage/structured-data.html#deserialization-steps</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-deserialization-steps">2.2. The FileSystemHandle interface</a>
    <li><a href="#ref-for-deserialization-steps①">2.3. The FileSystemFileHandle interface</a>
    <li><a href="#ref-for-deserialization-steps②">2.4. The FileSystemDirectoryHandle interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-in-parallel">
   <a href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-in-parallel">2.1. Concepts</a>
    <li><a href="#ref-for-in-parallel①">2.2.1. The isSameEntry() method</a>
    <li><a href="#ref-for-in-parallel②">2.3.1. The getFile() method</a>
    <li><a href="#ref-for-in-parallel③">2.3.2. The createWritable() method</a>
    <li><a href="#ref-for-in-parallel④">2.3.3. The createSyncAccessHandle() method</a>
    <li><a href="#ref-for-in-parallel⑤">2.4.2. The getFileHandle() method</a>
    <li><a href="#ref-for-in-parallel⑥">2.4.3. The getDirectoryHandle() method</a>
    <li><a href="#ref-for-in-parallel⑦">2.4.4. The removeEntry() method</a>
    <li><a href="#ref-for-in-parallel⑧">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-in-parallel⑨">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-settings-object-origin">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin">https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-settings-object-origin">2.2. The FileSystemHandle interface</a> <a href="#ref-for-concept-settings-object-origin①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-concept-relevant-realm">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm">https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-relevant-realm">2.2.1. The isSameEntry() method</a>
    <li><a href="#ref-for-concept-relevant-realm①">2.3.2. The createWritable() method</a>
    <li><a href="#ref-for-concept-relevant-realm②">2.3.3. The createSyncAccessHandle() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-relevant-settings-object">
   <a href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object">https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-relevant-settings-object">2.2. The FileSystemHandle interface</a> <a href="#ref-for-relevant-settings-object①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-same-origin">
   <a href="https://html.spec.whatwg.org/multipage/origin.html#same-origin">https://html.spec.whatwg.org/multipage/origin.html#same-origin</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-same-origin">2.2. The FileSystemHandle interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-serializable-objects">
   <a href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable-objects">https://html.spec.whatwg.org/multipage/structured-data.html#serializable-objects</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-serializable-objects">2.2. The FileSystemHandle interface</a>
    <li><a href="#ref-for-serializable-objects①">2.3. The FileSystemFileHandle interface</a>
    <li><a href="#ref-for-serializable-objects②">2.4. The FileSystemDirectoryHandle interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-serialization-steps">
   <a href="https://html.spec.whatwg.org/multipage/structured-data.html#serialization-steps">https://html.spec.whatwg.org/multipage/structured-data.html#serialization-steps</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-serialization-steps">2.2. The FileSystemHandle interface</a>
    <li><a href="#ref-for-serialization-steps①">2.3. The FileSystemFileHandle interface</a>
    <li><a href="#ref-for-serialization-steps②">2.4. The FileSystemDirectoryHandle interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-append">
   <a href="https://infra.spec.whatwg.org/#list-append">https://infra.spec.whatwg.org/#list-append</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-append">2.1. Concepts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-set-append">
   <a href="https://infra.spec.whatwg.org/#set-append">https://infra.spec.whatwg.org/#set-append</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-set-append">2.4.1. Directory iteration</a>
    <li><a href="#ref-for-set-append①">2.4.2. The getFileHandle() method</a>
    <li><a href="#ref-for-set-append②">2.4.3. The getDirectoryHandle() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-assert">
   <a href="https://infra.spec.whatwg.org/#assert">https://infra.spec.whatwg.org/#assert</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-assert">2.5. The FileSystemWritableFileStream interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-byte-sequence">
   <a href="https://infra.spec.whatwg.org/#byte-sequence">https://infra.spec.whatwg.org/#byte-sequence</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-byte-sequence">2.1. Concepts</a>
    <li><a href="#ref-for-byte-sequence①">2.4.2. The getFileHandle() method</a>
    <li><a href="#ref-for-byte-sequence②">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-byte-sequence③">(2)</a> <a href="#ref-for-byte-sequence④">(3)</a> <a href="#ref-for-byte-sequence⑤">(4)</a> <a href="#ref-for-byte-sequence⑥">(5)</a> <a href="#ref-for-byte-sequence⑦">(6)</a> <a href="#ref-for-byte-sequence⑧">(7)</a>
    <li><a href="#ref-for-byte-sequence⑨">2.6.1. The read() method</a>
    <li><a href="#ref-for-byte-sequence①⓪">2.6.2. The write() method</a> <a href="#ref-for-byte-sequence①①">(2)</a> <a href="#ref-for-byte-sequence①②">(3)</a>
    <li><a href="#ref-for-byte-sequence①③">2.6.3. The truncate() method</a> <a href="#ref-for-byte-sequence①④">(2)</a> <a href="#ref-for-byte-sequence①⑤">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-contain">
   <a href="https://infra.spec.whatwg.org/#list-contain">https://infra.spec.whatwg.org/#list-contain</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-contain">2.1. Concepts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-map-exists">
   <a href="https://infra.spec.whatwg.org/#map-exists">https://infra.spec.whatwg.org/#map-exists</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-map-exists">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-iterate">
   <a href="https://infra.spec.whatwg.org/#list-iterate">https://infra.spec.whatwg.org/#list-iterate</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-iterate">2.1. Concepts</a>
    <li><a href="#ref-for-list-iterate①">2.4.2. The getFileHandle() method</a>
    <li><a href="#ref-for-list-iterate②">2.4.3. The getDirectoryHandle() method</a>
    <li><a href="#ref-for-list-iterate③">2.4.4. The removeEntry() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-implementation-defined">
   <a href="https://infra.spec.whatwg.org/#implementation-defined">https://infra.spec.whatwg.org/#implementation-defined</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-implementation-defined">2.3.1. The getFile() method</a>
    <li><a href="#ref-for-implementation-defined①">2.5. The FileSystemWritableFileStream interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-is-empty">
   <a href="https://infra.spec.whatwg.org/#list-is-empty">https://infra.spec.whatwg.org/#list-is-empty</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-is-empty">2.4.4. The removeEntry() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-byte-sequence-length">
   <a href="https://infra.spec.whatwg.org/#byte-sequence-length">https://infra.spec.whatwg.org/#byte-sequence-length</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-byte-sequence-length">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-byte-sequence-length①">(2)</a> <a href="#ref-for-byte-sequence-length②">(3)</a> <a href="#ref-for-byte-sequence-length③">(4)</a> <a href="#ref-for-byte-sequence-length④">(5)</a>
    <li><a href="#ref-for-byte-sequence-length⑤">2.6.1. The read() method</a> <a href="#ref-for-byte-sequence-length⑥">(2)</a>
    <li><a href="#ref-for-byte-sequence-length⑦">2.6.2. The write() method</a> <a href="#ref-for-byte-sequence-length⑧">(2)</a> <a href="#ref-for-byte-sequence-length⑨">(3)</a>
    <li><a href="#ref-for-byte-sequence-length①⓪">2.6.3. The truncate() method</a>
    <li><a href="#ref-for-byte-sequence-length①①">2.6.4. The getSize() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-prepend">
   <a href="https://infra.spec.whatwg.org/#list-prepend">https://infra.spec.whatwg.org/#list-prepend</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-prepend">2.1. Concepts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-list-remove">
   <a href="https://infra.spec.whatwg.org/#list-remove">https://infra.spec.whatwg.org/#list-remove</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-list-remove">2.4.4. The removeEntry() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-ordered-set">
   <a href="https://infra.spec.whatwg.org/#ordered-set">https://infra.spec.whatwg.org/#ordered-set</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ordered-set">2.1. Concepts</a>
    <li><a href="#ref-for-ordered-set①">2.4.1. Directory iteration</a>
    <li><a href="#ref-for-ordered-set②">2.4.3. The getDirectoryHandle() method</a>
    <li><a href="#ref-for-ordered-set③">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-string">
   <a href="https://infra.spec.whatwg.org/#string">https://infra.spec.whatwg.org/#string</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-string">2.1. Concepts</a> <a href="#ref-for-string①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-permissionstate-denied">
   <a href="https://w3c.github.io/permissions/#dom-permissionstate-denied">https://w3c.github.io/permissions/#dom-permissionstate-denied</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionstate-denied">2.1. Concepts</a> <a href="#ref-for-dom-permissionstate-denied①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dom-permissionstate-granted">
   <a href="https://w3c.github.io/permissions/#dom-permissionstate-granted">https://w3c.github.io/permissions/#dom-permissionstate-granted</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-permissionstate-granted">2.3.1. The getFile() method</a>
    <li><a href="#ref-for-dom-permissionstate-granted①">2.3.2. The createWritable() method</a>
    <li><a href="#ref-for-dom-permissionstate-granted②">2.3.3. The createSyncAccessHandle() method</a>
    <li><a href="#ref-for-dom-permissionstate-granted③">2.4.1. Directory iteration</a> <a href="#ref-for-dom-permissionstate-granted④">(2)</a>
    <li><a href="#ref-for-dom-permissionstate-granted⑤">2.4.2. The getFileHandle() method</a>
    <li><a href="#ref-for-dom-permissionstate-granted⑥">2.4.3. The getDirectoryHandle() method</a>
    <li><a href="#ref-for-dom-permissionstate-granted⑦">2.4.4. The removeEntry() method</a>
    <li><a href="#ref-for-dom-permissionstate-granted⑧">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-dom-permissionstate-granted⑨">(2)</a>
    <li><a href="#ref-for-dom-permissionstate-granted①⓪">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-enumdef-permissionstate">
   <a href="https://w3c.github.io/permissions/#enumdef-permissionstate">https://w3c.github.io/permissions/#enumdef-permissionstate</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-permissionstate">2.1. Concepts</a> <a href="#ref-for-enumdef-permissionstate①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-storagemanager">
   <a href="https://storage.spec.whatwg.org/#storagemanager">https://storage.spec.whatwg.org/#storagemanager</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storagemanager">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-storage-endpoint-identifier">
   <a href="https://storage.spec.whatwg.org/#storage-endpoint-identifier">https://storage.spec.whatwg.org/#storage-endpoint-identifier</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-endpoint-identifier">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-obtain-a-local-storage-bottle-map">
   <a href="https://storage.spec.whatwg.org/#obtain-a-local-storage-bottle-map">https://storage.spec.whatwg.org/#obtain-a-local-storage-bottle-map</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-obtain-a-local-storage-bottle-map">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-storage-endpoint-quota">
   <a href="https://storage.spec.whatwg.org/#storage-endpoint-quota">https://storage.spec.whatwg.org/#storage-endpoint-quota</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-endpoint-quota">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-storage-endpoint">
   <a href="https://storage.spec.whatwg.org/#storage-endpoint">https://storage.spec.whatwg.org/#storage-endpoint</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-endpoint">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-storage-quota">
   <a href="https://storage.spec.whatwg.org/#storage-quota">https://storage.spec.whatwg.org/#storage-quota</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-quota">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-storage-quota①">(2)</a> <a href="#ref-for-storage-quota②">(3)</a> <a href="#ref-for-storage-quota③">(4)</a>
    <li><a href="#ref-for-storage-quota④">2.6.2. The write() method</a>
    <li><a href="#ref-for-storage-quota⑤">2.6.3. The truncate() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-storage-endpoint-types">
   <a href="https://storage.spec.whatwg.org/#storage-endpoint-types">https://storage.spec.whatwg.org/#storage-endpoint-types</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-storage-endpoint-types">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-readablestream">
   <a href="https://streams.spec.whatwg.org/#readablestream">https://streams.spec.whatwg.org/#readablestream</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-readablestream">2.5. The FileSystemWritableFileStream interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-writablestream">
   <a href="https://streams.spec.whatwg.org/#writablestream">https://streams.spec.whatwg.org/#writablestream</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-writablestream">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-writablestream①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-writablestreamdefaultwriter">
   <a href="https://streams.spec.whatwg.org/#writablestreamdefaultwriter">https://streams.spec.whatwg.org/#writablestreamdefaultwriter</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-writablestreamdefaultwriter">2.5. The FileSystemWritableFileStream interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-writablestream-set-up-abortalgorithm">
   <a href="https://streams.spec.whatwg.org/#writablestream-set-up-abortalgorithm">https://streams.spec.whatwg.org/#writablestream-set-up-abortalgorithm</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-writablestream-set-up-abortalgorithm">2.5. The FileSystemWritableFileStream interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-writablestream-set-up-closealgorithm">
   <a href="https://streams.spec.whatwg.org/#writablestream-set-up-closealgorithm">https://streams.spec.whatwg.org/#writablestream-set-up-closealgorithm</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-writablestream-set-up-closealgorithm">2.5. The FileSystemWritableFileStream interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-ws-get-writer">
   <a href="https://streams.spec.whatwg.org/#ws-get-writer">https://streams.spec.whatwg.org/#ws-get-writer</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-ws-get-writer">2.5. The FileSystemWritableFileStream interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-writablestream-get-a-writer">
   <a href="https://streams.spec.whatwg.org/#writablestream-get-a-writer">https://streams.spec.whatwg.org/#writablestream-get-a-writer</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-writablestream-get-a-writer">2.5.1. The write() method</a>
    <li><a href="#ref-for-writablestream-get-a-writer①">2.5.2. The seek() method</a>
    <li><a href="#ref-for-writablestream-get-a-writer②">2.5.3. The truncate() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-writablestream-set-up-highwatermark">
   <a href="https://streams.spec.whatwg.org/#writablestream-set-up-highwatermark">https://streams.spec.whatwg.org/#writablestream-set-up-highwatermark</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-writablestream-set-up-highwatermark">2.5. The FileSystemWritableFileStream interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-writablestreamdefaultwriter-release">
   <a href="https://streams.spec.whatwg.org/#writablestreamdefaultwriter-release">https://streams.spec.whatwg.org/#writablestreamdefaultwriter-release</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-writablestreamdefaultwriter-release">2.5.1. The write() method</a>
    <li><a href="#ref-for-writablestreamdefaultwriter-release①">2.5.2. The seek() method</a>
    <li><a href="#ref-for-writablestreamdefaultwriter-release②">2.5.3. The truncate() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-writablestream-set-up">
   <a href="https://streams.spec.whatwg.org/#writablestream-set-up">https://streams.spec.whatwg.org/#writablestream-set-up</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-writablestream-set-up">2.5. The FileSystemWritableFileStream interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-writablestream-set-up-sizealgorithm">
   <a href="https://streams.spec.whatwg.org/#writablestream-set-up-sizealgorithm">https://streams.spec.whatwg.org/#writablestream-set-up-sizealgorithm</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-writablestream-set-up-sizealgorithm">2.5. The FileSystemWritableFileStream interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-default-writer-write">
   <a href="https://streams.spec.whatwg.org/#default-writer-write">https://streams.spec.whatwg.org/#default-writer-write</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-default-writer-write">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-default-writer-write①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-writablestream-set-up-writealgorithm">
   <a href="https://streams.spec.whatwg.org/#writablestream-set-up-writealgorithm">https://streams.spec.whatwg.org/#writablestream-set-up-writealgorithm</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-writablestream-set-up-writealgorithm">2.5. The FileSystemWritableFileStream interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-writablestreamdefaultwriter-write-a-chunk">
   <a href="https://streams.spec.whatwg.org/#writablestreamdefaultwriter-write-a-chunk">https://streams.spec.whatwg.org/#writablestreamdefaultwriter-write-a-chunk</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-writablestreamdefaultwriter-write-a-chunk">2.5.1. The write() method</a>
    <li><a href="#ref-for-writablestreamdefaultwriter-write-a-chunk①">2.5.2. The seek() method</a>
    <li><a href="#ref-for-writablestreamdefaultwriter-write-a-chunk②">2.5.3. The truncate() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-aborterror">
   <a href="https://heycam.github.io/webidl/#aborterror">https://heycam.github.io/webidl/#aborterror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-aborterror">2.5. The FileSystemWritableFileStream interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-AllowShared">
   <a href="https://heycam.github.io/webidl/#AllowShared">https://heycam.github.io/webidl/#AllowShared</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-AllowShared">2.6. The FileSystemSyncAccessHandle interface</a> <a href="#ref-for-AllowShared①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-BufferSource">
   <a href="https://heycam.github.io/webidl/#BufferSource">https://heycam.github.io/webidl/#BufferSource</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-BufferSource">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-BufferSource①">(2)</a> <a href="#ref-for-BufferSource②">(3)</a>
    <li><a href="#ref-for-BufferSource③">2.6. The FileSystemSyncAccessHandle interface</a> <a href="#ref-for-BufferSource④">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-datacloneerror">
   <a href="https://heycam.github.io/webidl/#datacloneerror">https://heycam.github.io/webidl/#datacloneerror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-datacloneerror">2.2. The FileSystemHandle interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-EnforceRange">
   <a href="https://heycam.github.io/webidl/#EnforceRange">https://heycam.github.io/webidl/#EnforceRange</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-EnforceRange">2.6. The FileSystemSyncAccessHandle interface</a> <a href="#ref-for-EnforceRange①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-Exposed">
   <a href="https://heycam.github.io/webidl/#Exposed">https://heycam.github.io/webidl/#Exposed</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-Exposed">2.2. The FileSystemHandle interface</a>
    <li><a href="#ref-for-Exposed①">2.3. The FileSystemFileHandle interface</a> <a href="#ref-for-Exposed②">(2)</a>
    <li><a href="#ref-for-Exposed③">2.4. The FileSystemDirectoryHandle interface</a>
    <li><a href="#ref-for-Exposed④">2.5. The FileSystemWritableFileStream interface</a>
    <li><a href="#ref-for-Exposed⑤">2.6. The FileSystemSyncAccessHandle interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-invalidmodificationerror">
   <a href="https://heycam.github.io/webidl/#invalidmodificationerror">https://heycam.github.io/webidl/#invalidmodificationerror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-invalidmodificationerror">2.4.4. The removeEntry() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-invalidstateerror">
   <a href="https://heycam.github.io/webidl/#invalidstateerror">https://heycam.github.io/webidl/#invalidstateerror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-invalidstateerror">2.3.3. The createSyncAccessHandle() method</a>
    <li><a href="#ref-for-invalidstateerror①">2.6.1. The read() method</a>
    <li><a href="#ref-for-invalidstateerror②">2.6.2. The write() method</a> <a href="#ref-for-invalidstateerror③">(2)</a>
    <li><a href="#ref-for-invalidstateerror④">2.6.3. The truncate() method</a> <a href="#ref-for-invalidstateerror⑤">(2)</a> <a href="#ref-for-invalidstateerror⑥">(3)</a>
    <li><a href="#ref-for-invalidstateerror⑦">2.6.4. The getSize() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-nomodificationallowederror">
   <a href="https://heycam.github.io/webidl/#nomodificationallowederror">https://heycam.github.io/webidl/#nomodificationallowederror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-nomodificationallowederror">2.3.2. The createWritable() method</a>
    <li><a href="#ref-for-nomodificationallowederror①">2.3.3. The createSyncAccessHandle() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-notallowederror">
   <a href="https://heycam.github.io/webidl/#notallowederror">https://heycam.github.io/webidl/#notallowederror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-notallowederror">2.3.1. The getFile() method</a>
    <li><a href="#ref-for-notallowederror①">2.3.2. The createWritable() method</a>
    <li><a href="#ref-for-notallowederror②">2.3.3. The createSyncAccessHandle() method</a>
    <li><a href="#ref-for-notallowederror③">2.4.1. Directory iteration</a> <a href="#ref-for-notallowederror④">(2)</a>
    <li><a href="#ref-for-notallowederror⑤">2.4.2. The getFileHandle() method</a>
    <li><a href="#ref-for-notallowederror⑥">2.4.3. The getDirectoryHandle() method</a>
    <li><a href="#ref-for-notallowederror⑦">2.4.4. The removeEntry() method</a>
    <li><a href="#ref-for-notallowederror⑧">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-notallowederror⑨">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-notfounderror">
   <a href="https://heycam.github.io/webidl/#notfounderror">https://heycam.github.io/webidl/#notfounderror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-notfounderror">2.4.2. The getFileHandle() method</a>
    <li><a href="#ref-for-notfounderror①">2.4.3. The getDirectoryHandle() method</a>
    <li><a href="#ref-for-notfounderror②">2.4.4. The removeEntry() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-promise">
   <a href="https://heycam.github.io/webidl/#idl-promise">https://heycam.github.io/webidl/#idl-promise</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-promise">2.2. The FileSystemHandle interface</a>
    <li><a href="#ref-for-idl-promise①">2.3. The FileSystemFileHandle interface</a> <a href="#ref-for-idl-promise②">(2)</a> <a href="#ref-for-idl-promise③">(3)</a>
    <li><a href="#ref-for-idl-promise④">2.4. The FileSystemDirectoryHandle interface</a> <a href="#ref-for-idl-promise⑤">(2)</a> <a href="#ref-for-idl-promise⑥">(3)</a> <a href="#ref-for-idl-promise⑦">(4)</a>
    <li><a href="#ref-for-idl-promise⑧">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-idl-promise⑨">(2)</a> <a href="#ref-for-idl-promise①⓪">(3)</a>
    <li><a href="#ref-for-idl-promise①①">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-quotaexceedederror">
   <a href="https://heycam.github.io/webidl/#quotaexceedederror">https://heycam.github.io/webidl/#quotaexceedederror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-quotaexceedederror">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-quotaexceedederror①">(2)</a>
    <li><a href="#ref-for-quotaexceedederror②">2.6.2. The write() method</a>
    <li><a href="#ref-for-quotaexceedederror③">2.6.3. The truncate() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-SecureContext">
   <a href="https://heycam.github.io/webidl/#SecureContext">https://heycam.github.io/webidl/#SecureContext</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-SecureContext">2.2. The FileSystemHandle interface</a>
    <li><a href="#ref-for-SecureContext①">2.3. The FileSystemFileHandle interface</a>
    <li><a href="#ref-for-SecureContext②">2.4. The FileSystemDirectoryHandle interface</a>
    <li><a href="#ref-for-SecureContext③">2.5. The FileSystemWritableFileStream interface</a>
    <li><a href="#ref-for-SecureContext④">2.6. The FileSystemSyncAccessHandle interface</a>
    <li><a href="#ref-for-SecureContext⑤">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-securityerror">
   <a href="https://heycam.github.io/webidl/#securityerror">https://heycam.github.io/webidl/#securityerror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-securityerror">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-exceptiondef-typeerror">
   <a href="https://heycam.github.io/webidl/#exceptiondef-typeerror">https://heycam.github.io/webidl/#exceptiondef-typeerror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-exceptiondef-typeerror">2.4.2. The getFileHandle() method</a>
    <li><a href="#ref-for-exceptiondef-typeerror①">2.4.3. The getDirectoryHandle() method</a>
    <li><a href="#ref-for-exceptiondef-typeerror②">2.4.4. The removeEntry() method</a>
    <li><a href="#ref-for-exceptiondef-typeerror③">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-exceptiondef-typeerror④">(2)</a> <a href="#ref-for-exceptiondef-typeerror⑤">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-typemismatcherror">
   <a href="https://heycam.github.io/webidl/#typemismatcherror">https://heycam.github.io/webidl/#typemismatcherror</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-typemismatcherror">2.4.2. The getFileHandle() method</a>
    <li><a href="#ref-for-typemismatcherror①">2.4.3. The getDirectoryHandle() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-USVString">
   <a href="https://heycam.github.io/webidl/#idl-USVString">https://heycam.github.io/webidl/#idl-USVString</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-USVString">2.2. The FileSystemHandle interface</a>
    <li><a href="#ref-for-idl-USVString①">2.4. The FileSystemDirectoryHandle interface</a> <a href="#ref-for-idl-USVString②">(2)</a> <a href="#ref-for-idl-USVString③">(3)</a> <a href="#ref-for-idl-USVString④">(4)</a> <a href="#ref-for-idl-USVString⑤">(5)</a>
    <li><a href="#ref-for-idl-USVString⑥">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-idl-USVString⑦">(2)</a> <a href="#ref-for-idl-USVString⑧">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-a-new-promise">
   <a href="https://heycam.github.io/webidl/#a-new-promise">https://heycam.github.io/webidl/#a-new-promise</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-a-new-promise">2.1. Concepts</a>
    <li><a href="#ref-for-a-new-promise①">2.2.1. The isSameEntry() method</a>
    <li><a href="#ref-for-a-new-promise②">2.3.1. The getFile() method</a>
    <li><a href="#ref-for-a-new-promise③">2.3.2. The createWritable() method</a>
    <li><a href="#ref-for-a-new-promise④">2.3.3. The createSyncAccessHandle() method</a>
    <li><a href="#ref-for-a-new-promise⑤">2.4.1. Directory iteration</a>
    <li><a href="#ref-for-a-new-promise⑥">2.4.2. The getFileHandle() method</a>
    <li><a href="#ref-for-a-new-promise⑦">2.4.3. The getDirectoryHandle() method</a>
    <li><a href="#ref-for-a-new-promise⑧">2.4.4. The removeEntry() method</a>
    <li><a href="#ref-for-a-new-promise⑨">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-a-new-promise①⓪">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-a-promise-rejected-with">
   <a href="https://heycam.github.io/webidl/#a-promise-rejected-with">https://heycam.github.io/webidl/#a-promise-rejected-with</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-a-promise-rejected-with">2.5. The FileSystemWritableFileStream interface</a>
    <li><a href="#ref-for-a-promise-rejected-with①">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-a-promise-resolved-with">
   <a href="https://heycam.github.io/webidl/#a-promise-resolved-with">https://heycam.github.io/webidl/#a-promise-resolved-with</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-a-promise-resolved-with">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-asynchronous-iterator-initialization-steps">
   <a href="https://heycam.github.io/webidl/#asynchronous-iterator-initialization-steps">https://heycam.github.io/webidl/#asynchronous-iterator-initialization-steps</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-asynchronous-iterator-initialization-steps">2.4.1. Directory iteration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-boolean">
   <a href="https://heycam.github.io/webidl/#idl-boolean">https://heycam.github.io/webidl/#idl-boolean</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-boolean">2.2. The FileSystemHandle interface</a>
    <li><a href="#ref-for-idl-boolean①">2.3. The FileSystemFileHandle interface</a>
    <li><a href="#ref-for-idl-boolean②">2.4. The FileSystemDirectoryHandle interface</a> <a href="#ref-for-idl-boolean③">(2)</a> <a href="#ref-for-idl-boolean④">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-convert-ecmascript-to-idl-value">
   <a href="https://heycam.github.io/webidl/#dfn-convert-ecmascript-to-idl-value">https://heycam.github.io/webidl/#dfn-convert-ecmascript-to-idl-value</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-convert-ecmascript-to-idl-value">2.5. The FileSystemWritableFileStream interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-get-buffer-source-copy">
   <a href="https://heycam.github.io/webidl/#dfn-get-buffer-source-copy">https://heycam.github.io/webidl/#dfn-get-buffer-source-copy</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-get-buffer-source-copy">2.5. The FileSystemWritableFileStream interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-dfn-get-the-next-iteration-result">
   <a href="https://heycam.github.io/webidl/#dfn-get-the-next-iteration-result">https://heycam.github.io/webidl/#dfn-get-the-next-iteration-result</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dfn-get-the-next-iteration-result">2.4.1. Directory iteration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-new">
   <a href="https://heycam.github.io/webidl/#new">https://heycam.github.io/webidl/#new</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-new">2.5. The FileSystemWritableFileStream interface</a>
    <li><a href="#ref-for-new①">2.6. The FileSystemSyncAccessHandle interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-reject">
   <a href="https://heycam.github.io/webidl/#reject">https://heycam.github.io/webidl/#reject</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reject">2.3.2. The createWritable() method</a> <a href="#ref-for-reject①">(2)</a>
    <li><a href="#ref-for-reject②">2.3.3. The createSyncAccessHandle() method</a> <a href="#ref-for-reject③">(2)</a>
    <li><a href="#ref-for-reject④">2.4.2. The getFileHandle() method</a> <a href="#ref-for-reject⑤">(2)</a> <a href="#ref-for-reject⑥">(3)</a> <a href="#ref-for-reject⑦">(4)</a> <a href="#ref-for-reject⑧">(5)</a>
    <li><a href="#ref-for-reject⑨">2.4.3. The getDirectoryHandle() method</a> <a href="#ref-for-reject①⓪">(2)</a> <a href="#ref-for-reject①①">(3)</a> <a href="#ref-for-reject①②">(4)</a> <a href="#ref-for-reject①③">(5)</a>
    <li><a href="#ref-for-reject①④">2.4.4. The removeEntry() method</a> <a href="#ref-for-reject①⑤">(2)</a> <a href="#ref-for-reject①⑥">(3)</a> <a href="#ref-for-reject①⑦">(4)</a> <a href="#ref-for-reject①⑧">(5)</a>
    <li><a href="#ref-for-reject①⑨">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-reject②⓪">(2)</a> <a href="#ref-for-reject②①">(3)</a> <a href="#ref-for-reject②②">(4)</a> <a href="#ref-for-reject②③">(5)</a> <a href="#ref-for-reject②④">(6)</a> <a href="#ref-for-reject②⑤">(7)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-resolve">
   <a href="https://heycam.github.io/webidl/#resolve">https://heycam.github.io/webidl/#resolve</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-resolve">2.1. Concepts</a> <a href="#ref-for-resolve①">(2)</a> <a href="#ref-for-resolve②">(3)</a>
    <li><a href="#ref-for-resolve③">2.2.1. The isSameEntry() method</a> <a href="#ref-for-resolve④">(2)</a>
    <li><a href="#ref-for-resolve⑤">2.3.1. The getFile() method</a>
    <li><a href="#ref-for-resolve⑥">2.3.2. The createWritable() method</a>
    <li><a href="#ref-for-resolve⑦">2.3.3. The createSyncAccessHandle() method</a>
    <li><a href="#ref-for-resolve⑧">2.4.1. Directory iteration</a> <a href="#ref-for-resolve⑨">(2)</a>
    <li><a href="#ref-for-resolve①⓪">2.4.2. The getFileHandle() method</a> <a href="#ref-for-resolve①①">(2)</a>
    <li><a href="#ref-for-resolve①②">2.4.3. The getDirectoryHandle() method</a> <a href="#ref-for-resolve①③">(2)</a>
    <li><a href="#ref-for-resolve①④">2.4.4. The removeEntry() method</a>
    <li><a href="#ref-for-resolve①⑤">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-resolve①⑥">(2)</a> <a href="#ref-for-resolve①⑦">(3)</a> <a href="#ref-for-resolve①⑧">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-sequence">
   <a href="https://heycam.github.io/webidl/#idl-sequence">https://heycam.github.io/webidl/#idl-sequence</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-sequence">2.4. The FileSystemDirectoryHandle interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-this">
   <a href="https://heycam.github.io/webidl/#this">https://heycam.github.io/webidl/#this</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-this">2.2. The FileSystemHandle interface</a> <a href="#ref-for-this①">(2)</a>
    <li><a href="#ref-for-this②">2.2.1. The isSameEntry() method</a> <a href="#ref-for-this③">(2)</a>
    <li><a href="#ref-for-this④">2.3.1. The getFile() method</a> <a href="#ref-for-this⑤">(2)</a>
    <li><a href="#ref-for-this⑥">2.3.2. The createWritable() method</a> <a href="#ref-for-this⑦">(2)</a> <a href="#ref-for-this⑧">(3)</a>
    <li><a href="#ref-for-this⑨">2.3.3. The createSyncAccessHandle() method</a> <a href="#ref-for-this①⓪">(2)</a> <a href="#ref-for-this①①">(3)</a>
    <li><a href="#ref-for-this①②">2.4.2. The getFileHandle() method</a> <a href="#ref-for-this①③">(2)</a> <a href="#ref-for-this①④">(3)</a>
    <li><a href="#ref-for-this①⑤">2.4.3. The getDirectoryHandle() method</a> <a href="#ref-for-this①⑥">(2)</a> <a href="#ref-for-this①⑦">(3)</a>
    <li><a href="#ref-for-this①⑧">2.4.4. The removeEntry() method</a> <a href="#ref-for-this①⑨">(2)</a>
    <li><a href="#ref-for-this②⓪">2.4.5. The resolve() method</a>
    <li><a href="#ref-for-this②①">2.5.1. The write() method</a>
    <li><a href="#ref-for-this②②">2.5.2. The seek() method</a>
    <li><a href="#ref-for-this②③">2.5.3. The truncate() method</a>
    <li><a href="#ref-for-this②④">2.6.1. The read() method</a> <a href="#ref-for-this②⑤">(2)</a>
    <li><a href="#ref-for-this②⑥">2.6.2. The write() method</a> <a href="#ref-for-this②⑦">(2)</a> <a href="#ref-for-this②⑧">(3)</a> <a href="#ref-for-this②⑨">(4)</a>
    <li><a href="#ref-for-this③⓪">2.6.3. The truncate() method</a> <a href="#ref-for-this③①">(2)</a> <a href="#ref-for-this③②">(3)</a> <a href="#ref-for-this③③">(4)</a> <a href="#ref-for-this③④">(5)</a> <a href="#ref-for-this③⑤">(6)</a> <a href="#ref-for-this③⑥">(7)</a>
    <li><a href="#ref-for-this③⑦">2.6.4. The getSize() method</a> <a href="#ref-for-this③⑧">(2)</a>
    <li><a href="#ref-for-this③⑨">2.6.6. The close() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-undefined">
   <a href="https://heycam.github.io/webidl/#idl-undefined">https://heycam.github.io/webidl/#idl-undefined</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-undefined">2.4. The FileSystemDirectoryHandle interface</a>
    <li><a href="#ref-for-idl-undefined①">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-idl-undefined②">(2)</a> <a href="#ref-for-idl-undefined③">(3)</a>
    <li><a href="#ref-for-idl-undefined④">2.6. The FileSystemSyncAccessHandle interface</a> <a href="#ref-for-idl-undefined⑤">(2)</a> <a href="#ref-for-idl-undefined⑥">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-idl-unsigned-long-long">
   <a href="https://heycam.github.io/webidl/#idl-unsigned-long-long">https://heycam.github.io/webidl/#idl-unsigned-long-long</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-idl-unsigned-long-long">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-idl-unsigned-long-long①">(2)</a> <a href="#ref-for-idl-unsigned-long-long②">(3)</a> <a href="#ref-for-idl-unsigned-long-long③">(4)</a>
    <li><a href="#ref-for-idl-unsigned-long-long④">2.6. The FileSystemSyncAccessHandle interface</a> <a href="#ref-for-idl-unsigned-long-long⑤">(2)</a> <a href="#ref-for-idl-unsigned-long-long⑥">(3)</a> <a href="#ref-for-idl-unsigned-long-long⑦">(4)</a> <a href="#ref-for-idl-unsigned-long-long⑧">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-upon-fulfillment">
   <a href="https://heycam.github.io/webidl/#upon-fulfillment">https://heycam.github.io/webidl/#upon-fulfillment</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-upon-fulfillment">2.1. Concepts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="term-for-wait-for-all">
   <a href="https://heycam.github.io/webidl/#wait-for-all">https://heycam.github.io/webidl/#wait-for-all</a><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-wait-for-all">2.1. Concepts</a>
   </ul>
  </aside>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[ECMASCRIPT]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-realm">realm</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ENCODING]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-utf-8-encode">utf-8 encode</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FILE-API]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dfn-Blob">Blob</span>
     <li><span class="dfn-paneled" id="term-for-dfn-file">File</span>
     <li><span class="dfn-paneled" id="term-for-dfn-lastModified">lastModified</span>
     <li><span class="dfn-paneled" id="term-for-dfn-name">name</span>
     <li><span class="dfn-paneled" id="term-for-readOperation">read operation</span>
     <li><span class="dfn-paneled" id="term-for-snapshot-state">snapshot state</span>
     <li><span class="dfn-paneled" id="term-for-dfn-type">type</span>
     <li><span class="dfn-paneled" id="term-for-UnixEpoch">unix epoch</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-serializable">Serializable</span>
     <li><span class="dfn-paneled" id="term-for-current-settings-object">current settings object</span>
     <li><span class="dfn-paneled" id="term-for-deserialization-steps">deserialization steps</span>
     <li><span class="dfn-paneled" id="term-for-in-parallel">in parallel</span>
     <li><span class="dfn-paneled" id="term-for-concept-settings-object-origin">origin</span>
     <li><span class="dfn-paneled" id="term-for-concept-relevant-realm">relevant realm</span>
     <li><span class="dfn-paneled" id="term-for-relevant-settings-object">relevant settings object</span>
     <li><span class="dfn-paneled" id="term-for-same-origin">same origin</span>
     <li><span class="dfn-paneled" id="term-for-serializable-objects">serializable objects</span>
     <li><span class="dfn-paneled" id="term-for-serialization-steps">serialization steps</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-list-append">append <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="term-for-set-append">append <small>(for set)</small></span>
     <li><span class="dfn-paneled" id="term-for-assert">assert</span>
     <li><span class="dfn-paneled" id="term-for-byte-sequence">byte sequence</span>
     <li><span class="dfn-paneled" id="term-for-list-contain">contain</span>
     <li><span class="dfn-paneled" id="term-for-map-exists">exist</span>
     <li><span class="dfn-paneled" id="term-for-list-iterate">for each</span>
     <li><span class="dfn-paneled" id="term-for-implementation-defined">implementation-defined</span>
     <li><span class="dfn-paneled" id="term-for-list-is-empty">is empty</span>
     <li><span class="dfn-paneled" id="term-for-byte-sequence-length">length</span>
     <li><span class="dfn-paneled" id="term-for-list-prepend">prepend</span>
     <li><span class="dfn-paneled" id="term-for-list-remove">remove</span>
     <li><span class="dfn-paneled" id="term-for-ordered-set">set</span>
     <li><span class="dfn-paneled" id="term-for-string">string</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PERMISSIONS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-dom-permissionstate-denied">"denied"</span>
     <li><span class="dfn-paneled" id="term-for-dom-permissionstate-granted">"granted"</span>
     <li><span class="dfn-paneled" id="term-for-enumdef-permissionstate">PermissionState</span>
    </ul>
   <li>
    <a data-link-type="biblio">[STORAGE]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-storagemanager">StorageManager</span>
     <li><span class="dfn-paneled" id="term-for-storage-endpoint-identifier">identifier</span>
     <li><span class="dfn-paneled" id="term-for-obtain-a-local-storage-bottle-map">obtain a local storage bottle map</span>
     <li><span class="dfn-paneled" id="term-for-storage-endpoint-quota">quota</span>
     <li><span class="dfn-paneled" id="term-for-storage-endpoint">storage endpoint</span>
     <li><span class="dfn-paneled" id="term-for-storage-quota">storage quota</span>
     <li><span class="dfn-paneled" id="term-for-storage-endpoint-types">types</span>
    </ul>
   <li>
    <a data-link-type="biblio">[STREAMS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-readablestream">ReadableStream</span>
     <li><span class="dfn-paneled" id="term-for-writablestream">WritableStream</span>
     <li><span class="dfn-paneled" id="term-for-writablestreamdefaultwriter">WritableStreamDefaultWriter</span>
     <li><span class="dfn-paneled" id="term-for-writablestream-set-up-abortalgorithm">abortalgorithm</span>
     <li><span class="dfn-paneled" id="term-for-writablestream-set-up-closealgorithm">closealgorithm</span>
     <li><span class="dfn-paneled" id="term-for-ws-get-writer">getWriter()</span>
     <li><span class="dfn-paneled" id="term-for-writablestream-get-a-writer">getting a writer</span>
     <li><span class="dfn-paneled" id="term-for-writablestream-set-up-highwatermark">highwatermark</span>
     <li><span class="dfn-paneled" id="term-for-writablestreamdefaultwriter-release">release</span>
     <li><span class="dfn-paneled" id="term-for-writablestream-set-up">set up</span>
     <li><span class="dfn-paneled" id="term-for-writablestream-set-up-sizealgorithm">sizealgorithm</span>
     <li><span class="dfn-paneled" id="term-for-default-writer-write">write()</span>
     <li><span class="dfn-paneled" id="term-for-writablestream-set-up-writealgorithm">writealgorithm</span>
     <li><span class="dfn-paneled" id="term-for-writablestreamdefaultwriter-write-a-chunk">writing a chunk</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WebIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="term-for-aborterror">AbortError</span>
     <li><span class="dfn-paneled" id="term-for-AllowShared">AllowShared</span>
     <li><span class="dfn-paneled" id="term-for-BufferSource">BufferSource</span>
     <li><span class="dfn-paneled" id="term-for-datacloneerror">DataCloneError</span>
     <li><span class="dfn-paneled" id="term-for-EnforceRange">EnforceRange</span>
     <li><span class="dfn-paneled" id="term-for-Exposed">Exposed</span>
     <li><span class="dfn-paneled" id="term-for-invalidmodificationerror">InvalidModificationError</span>
     <li><span class="dfn-paneled" id="term-for-invalidstateerror">InvalidStateError</span>
     <li><span class="dfn-paneled" id="term-for-nomodificationallowederror">NoModificationAllowedError</span>
     <li><span class="dfn-paneled" id="term-for-notallowederror">NotAllowedError</span>
     <li><span class="dfn-paneled" id="term-for-notfounderror">NotFoundError</span>
     <li><span class="dfn-paneled" id="term-for-idl-promise">Promise</span>
     <li><span class="dfn-paneled" id="term-for-quotaexceedederror">QuotaExceededError</span>
     <li><span class="dfn-paneled" id="term-for-SecureContext">SecureContext</span>
     <li><span class="dfn-paneled" id="term-for-securityerror">SecurityError</span>
     <li><span class="dfn-paneled" id="term-for-exceptiondef-typeerror">TypeError</span>
     <li><span class="dfn-paneled" id="term-for-typemismatcherror">TypeMismatchError</span>
     <li><span class="dfn-paneled" id="term-for-idl-USVString">USVString</span>
     <li><span class="dfn-paneled" id="term-for-a-new-promise">a new promise</span>
     <li><span class="dfn-paneled" id="term-for-a-promise-rejected-with">a promise rejected with</span>
     <li><span class="dfn-paneled" id="term-for-a-promise-resolved-with">a promise resolved with</span>
     <li><span class="dfn-paneled" id="term-for-asynchronous-iterator-initialization-steps">asynchronous iterator initialization steps</span>
     <li><span class="dfn-paneled" id="term-for-idl-boolean">boolean</span>
     <li><span class="dfn-paneled" id="term-for-dfn-convert-ecmascript-to-idl-value">converted to an idl value</span>
     <li><span class="dfn-paneled" id="term-for-dfn-get-buffer-source-copy">get a copy of the buffer source</span>
     <li><span class="dfn-paneled" id="term-for-dfn-get-the-next-iteration-result">get the next iteration result</span>
     <li><span class="dfn-paneled" id="term-for-new">new</span>
     <li><span class="dfn-paneled" id="term-for-reject">reject</span>
     <li><span class="dfn-paneled" id="term-for-resolve">resolve</span>
     <li><span class="dfn-paneled" id="term-for-idl-sequence">sequence</span>
     <li><span class="dfn-paneled" id="term-for-this">this</span>
     <li><span class="dfn-paneled" id="term-for-idl-undefined">undefined</span>
     <li><span class="dfn-paneled" id="term-for-idl-unsigned-long-long">unsigned long long</span>
     <li><span class="dfn-paneled" id="term-for-upon-fulfillment">upon fulfillment</span>
     <li><span class="dfn-paneled" id="term-for-wait-for-all">wait for all</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-ecmascript">[ECMASCRIPT]
   <dd><a href="https://tc39.es/ecma262/"><cite>ECMAScript Language Specification</cite></a>. URL: <a href="https://tc39.es/ecma262/">https://tc39.es/ecma262/</a>
   <dt id="biblio-encoding">[ENCODING]
   <dd>Anne van Kesteren. <a href="https://encoding.spec.whatwg.org/"><cite>Encoding Standard</cite></a>. Living Standard. URL: <a href="https://encoding.spec.whatwg.org/">https://encoding.spec.whatwg.org/</a>
   <dt id="biblio-file-api">[FILE-API]
   <dd>Marijn Kruisselbrink; Arun Ranganathan. <a href="https://w3c.github.io/FileAPI/"><cite>File API</cite></a>. URL: <a href="https://w3c.github.io/FileAPI/">https://w3c.github.io/FileAPI/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-permissions">[PERMISSIONS]
   <dd>Mounir Lamouri; Marcos Caceres; Jeffrey Yasskin. <a href="https://w3c.github.io/permissions/"><cite>Permissions</cite></a>. URL: <a href="https://w3c.github.io/permissions/">https://w3c.github.io/permissions/</a>
   <dt id="biblio-storage">[STORAGE]
   <dd>Anne van Kesteren. <a href="https://storage.spec.whatwg.org/"><cite>Storage Standard</cite></a>. Living Standard. URL: <a href="https://storage.spec.whatwg.org/">https://storage.spec.whatwg.org/</a>
   <dt id="biblio-streams">[STREAMS]
   <dd>Adam Rice; Domenic Denicola; 吉野剛史 (Takeshi Yoshino). <a href="https://streams.spec.whatwg.org/"><cite>Streams Standard</cite></a>. Living Standard. URL: <a href="https://streams.spec.whatwg.org/">https://streams.spec.whatwg.org/</a>
   <dt id="biblio-webidl">[WebIDL]
   <dd>Boris Zbarsky. <a href="https://heycam.github.io/webidl/"><cite>Web IDL</cite></a>. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>enum</c-> <a href="#enumdef-filesystemhandlekind"><code><c- g>FileSystemHandleKind</c-></code></a> {
  <a href="#dom-filesystemhandlekind-file"><code><c- s>"file"</c-></code></a>,
  <a href="#dom-filesystemhandlekind-directory"><code><c- s>"directory"</c-></code></a>,
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->), <a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable"><c- g>Serializable</c-></a>]
<c- b>interface</c-> <a href="#filesystemhandle"><code><c- g>FileSystemHandle</c-></code></a> {
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#enumdef-filesystemhandlekind"><c- n>FileSystemHandleKind</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="FileSystemHandleKind" href="#dom-filesystemhandle-kind"><c- g>kind</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString"><c- b>USVString</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="USVString" href="#dom-filesystemhandle-name"><c- g>name</c-></a>;

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemhandle-issameentry"><c- g>isSameEntry</c-></a>(<a data-link-type="idl-name" href="#filesystemhandle"><c- n>FileSystemHandle</c-></a> <a href="#dom-filesystemhandle-issameentry-other-other"><code><c- g>other</c-></code></a>);
};

<c- b>dictionary</c-> <a href="#dictdef-filesystemcreatewritableoptions"><code><c- g>FileSystemCreateWritableOptions</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean " href="#dom-filesystemcreatewritableoptions-keepexistingdata"><code><c- g>keepExistingData</c-></code></a> = <c- b>false</c->;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->), <a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable"><c- g>Serializable</c-></a>]
<c- b>interface</c-> <a href="#filesystemfilehandle"><code><c- g>FileSystemFileHandle</c-></code></a> : <a data-link-type="idl-name" href="#filesystemhandle"><c- n>FileSystemHandle</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="https://w3c.github.io/FileAPI/#dfn-file"><c- n>File</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemfilehandle-getfile"><c- g>getFile</c-></a>();
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemwritablefilestream"><c- n>FileSystemWritableFileStream</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemfilehandle-createwritable"><c- g>createWritable</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemcreatewritableoptions"><c- n>FileSystemCreateWritableOptions</c-></a> <a href="#dom-filesystemfilehandle-createwritable-options-options"><code><c- g>options</c-></code></a> = {});
  [<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=<c- n>DedicatedWorker</c->]
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemsyncaccesshandle"><c- n>FileSystemSyncAccessHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemfilehandle-createsyncaccesshandle"><c- g>createSyncAccessHandle</c-></a>();
};

<c- b>dictionary</c-> <a href="#dictdef-filesystemgetfileoptions"><code><c- g>FileSystemGetFileOptions</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean " href="#dom-filesystemgetfileoptions-create"><code><c- g>create</c-></code></a> = <c- b>false</c->;
};

<c- b>dictionary</c-> <a href="#dictdef-filesystemgetdirectoryoptions"><code><c- g>FileSystemGetDirectoryOptions</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean " href="#dom-filesystemgetdirectoryoptions-create"><code><c- g>create</c-></code></a> = <c- b>false</c->;
};

<c- b>dictionary</c-> <a href="#dictdef-filesystemremoveoptions"><code><c- g>FileSystemRemoveOptions</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean " href="#dom-filesystemremoveoptions-recursive"><code><c- g>recursive</c-></code></a> = <c- b>false</c->;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->), <a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/structured-data.html#serializable"><c- g>Serializable</c-></a>]
<c- b>interface</c-> <a href="#filesystemdirectoryhandle"><code><c- g>FileSystemDirectoryHandle</c-></code></a> : <a data-link-type="idl-name" href="#filesystemhandle"><c- n>FileSystemHandle</c-></a> {
  <c- b>async</c-> <c- b>iterable</c->&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString"><c- b>USVString</c-></a>, <a data-link-type="idl-name" href="#filesystemhandle"><c- n>FileSystemHandle</c-></a>>;

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemfilehandle"><c- n>FileSystemFileHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemdirectoryhandle-getfilehandle"><c- g>getFileHandle</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString"><c- b>USVString</c-></a> <a href="#dom-filesystemdirectoryhandle-getfilehandle-name-options-name"><code><c- g>name</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemgetfileoptions"><c- n>FileSystemGetFileOptions</c-></a> <a href="#dom-filesystemdirectoryhandle-getfilehandle-name-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemdirectoryhandle"><c- n>FileSystemDirectoryHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemdirectoryhandle-getdirectoryhandle"><c- g>getDirectoryHandle</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString"><c- b>USVString</c-></a> <a href="#dom-filesystemdirectoryhandle-getdirectoryhandle-name-options-name"><code><c- g>name</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemgetdirectoryoptions"><c- n>FileSystemGetDirectoryOptions</c-></a> <a href="#dom-filesystemdirectoryhandle-getdirectoryhandle-name-options-options"><code><c- g>options</c-></code></a> = {});

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemdirectoryhandle-removeentry"><c- g>removeEntry</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString"><c- b>USVString</c-></a> <a href="#dom-filesystemdirectoryhandle-removeentry-name-options-name"><code><c- g>name</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemremoveoptions"><c- n>FileSystemRemoveOptions</c-></a> <a href="#dom-filesystemdirectoryhandle-removeentry-name-options-options"><code><c- g>options</c-></code></a> = {});

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://heycam.github.io/webidl/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString"><c- b>USVString</c-></a>>?> <a class="idl-code" data-link-type="method" href="#dom-filesystemdirectoryhandle-resolve"><c- g>resolve</c-></a>(<a data-link-type="idl-name" href="#filesystemhandle"><c- n>FileSystemHandle</c-></a> <a href="#dom-filesystemdirectoryhandle-resolve-possibledescendant-possibledescendant"><code><c- g>possibleDescendant</c-></code></a>);
};

<c- b>enum</c-> <a href="#enumdef-writecommandtype"><code><c- g>WriteCommandType</c-></code></a> {
  <a href="#dom-writecommandtype-write"><code><c- s>"write"</c-></code></a>,
  <a href="#dom-writecommandtype-seek"><code><c- s>"seek"</c-></code></a>,
  <a href="#dom-writecommandtype-truncate"><code><c- s>"truncate"</c-></code></a>,
};

<c- b>dictionary</c-> <a href="#dictdef-writeparams"><code><c- g>WriteParams</c-></code></a> {
  <c- b>required</c-> <a data-link-type="idl-name" href="#enumdef-writecommandtype"><c- n>WriteCommandType</c-></a> <a data-type="WriteCommandType " href="#dom-writeparams-type"><code><c- g>type</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a>? <a data-type="unsigned long long? " href="#dom-writeparams-size"><code><c- g>size</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a>? <a data-type="unsigned long long? " href="#dom-writeparams-position"><code><c- g>position</c-></code></a>;
  (<a data-link-type="idl-name" href="https://heycam.github.io/webidl/#BufferSource"><c- n>BufferSource</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://w3c.github.io/FileAPI/#dfn-Blob"><c- n>Blob</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString"><c- b>USVString</c-></a>)? <a data-type="(BufferSource or Blob or USVString)? " href="#dom-writeparams-data"><code><c- g>data</c-></code></a>;
};

<c- b>typedef</c-> (<a data-link-type="idl-name" href="https://heycam.github.io/webidl/#BufferSource"><c- n>BufferSource</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://w3c.github.io/FileAPI/#dfn-Blob"><c- n>Blob</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-USVString"><c- b>USVString</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="#dictdef-writeparams"><c- n>WriteParams</c-></a>) <a href="#typedefdef-filesystemwritechunktype"><code><c- g>FileSystemWriteChunkType</c-></code></a>;

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->), <a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <a href="#filesystemwritablefilestream"><code><c- g>FileSystemWritableFileStream</c-></code></a> : <a data-link-type="idl-name" href="https://streams.spec.whatwg.org/#writablestream"><c- n>WritableStream</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemwritablefilestream-write"><c- g>write</c-></a>(<a data-link-type="idl-name" href="#typedefdef-filesystemwritechunktype"><c- n>FileSystemWriteChunkType</c-></a> <a href="#dom-filesystemwritablefilestream-write-data-data"><code><c- g>data</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemwritablefilestream-seek"><c- g>seek</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-filesystemwritablefilestream-seek-position-position"><code><c- g>position</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-filesystemwritablefilestream-truncate"><c- g>truncate</c-></a>(<a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-filesystemwritablefilestream-truncate-size-size"><code><c- g>size</c-></code></a>);
};

<c- b>dictionary</c-> <a href="#dictdef-filesystemreadwriteoptions"><code><c- g>FileSystemReadWriteOptions</c-></code></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#EnforceRange"><c- g>EnforceRange</c-></a>] <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a data-default="0" data-type="unsigned long long " href="#dom-filesystemreadwriteoptions-at"><code><c- g>at</c-></code></a> = 0;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed"><c- g>Exposed</c-></a>=<c- n>DedicatedWorker</c->, <a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <a href="#filesystemsyncaccesshandle"><code><c- g>FileSystemSyncAccessHandle</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-filesystemsyncaccesshandle-read"><code><c- g>read</c-></code></a>([<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#AllowShared"><c- g>AllowShared</c-></a>] <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#BufferSource"><c- n>BufferSource</c-></a> <a href="#dom-filesystemsyncaccesshandle-read-buffer-options-buffer"><code><c- g>buffer</c-></code></a>,
                          <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemreadwriteoptions"><c- n>FileSystemReadWriteOptions</c-></a> <a href="#dom-filesystemsyncaccesshandle-read-buffer-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-filesystemsyncaccesshandle-write"><code><c- g>write</c-></code></a>([<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#AllowShared"><c- g>AllowShared</c-></a>] <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#BufferSource"><c- n>BufferSource</c-></a> <a href="#dom-filesystemsyncaccesshandle-write-buffer-options-buffer"><code><c- g>buffer</c-></code></a>,
                           <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-filesystemreadwriteoptions"><c- n>FileSystemReadWriteOptions</c-></a> <a href="#dom-filesystemsyncaccesshandle-write-buffer-options-options"><code><c- g>options</c-></code></a> = {});

  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-filesystemsyncaccesshandle-truncate"><c- g>truncate</c-></a>([<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#EnforceRange"><c- g>EnforceRange</c-></a>] <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a href="#dom-filesystemsyncaccesshandle-truncate-newsize-newsize"><code><c- g>newSize</c-></code></a>);
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a class="idl-code" data-link-type="method" href="#dom-filesystemsyncaccesshandle-getsize"><c- g>getSize</c-></a>();
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-filesystemsyncaccesshandle-flush"><c- g>flush</c-></a>();
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-filesystemsyncaccesshandle-close"><c- g>close</c-></a>();
};


[<a class="idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://storage.spec.whatwg.org/#storagemanager"><c- g>StorageManager</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://heycam.github.io/webidl/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#filesystemdirectoryhandle"><c- n>FileSystemDirectoryHandle</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-storagemanager-getdirectory"><c- g>getDirectory</c-></a>();
};

</pre>
  <aside class="dfn-panel" data-for="entry">
   <b><a href="#entry">#entry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-entry">2.1. Concepts</a> <a href="#ref-for-entry①">(2)</a> <a href="#ref-for-entry②">(3)</a> <a href="#ref-for-entry③">(4)</a> <a href="#ref-for-entry④">(5)</a> <a href="#ref-for-entry⑤">(6)</a> <a href="#ref-for-entry⑥">(7)</a> <a href="#ref-for-entry⑦">(8)</a> <a href="#ref-for-entry⑧">(9)</a> <a href="#ref-for-entry⑨">(10)</a> <a href="#ref-for-entry①⓪">(11)</a> <a href="#ref-for-entry①①">(12)</a>
    <li><a href="#ref-for-entry①②">2.2. The FileSystemHandle interface</a> <a href="#ref-for-entry①③">(2)</a> <a href="#ref-for-entry①④">(3)</a>
    <li><a href="#ref-for-entry①⑤">2.3.3. The createSyncAccessHandle() method</a>
    <li><a href="#ref-for-entry①⑥">2.4.1. Directory iteration</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="entry-query-access">
   <b><a href="#entry-query-access">#entry-query-access</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-entry-query-access">2.1. Concepts</a>
    <li><a href="#ref-for-entry-query-access①">2.3.1. The getFile() method</a>
    <li><a href="#ref-for-entry-query-access②">2.4.1. Directory iteration</a> <a href="#ref-for-entry-query-access③">(2)</a>
    <li><a href="#ref-for-entry-query-access④">2.4.2. The getFileHandle() method</a> <a href="#ref-for-entry-query-access⑤">(2)</a>
    <li><a href="#ref-for-entry-query-access⑥">2.4.3. The getDirectoryHandle() method</a> <a href="#ref-for-entry-query-access⑦">(2)</a>
    <li><a href="#ref-for-entry-query-access⑧">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-entry-query-access⑨">(2)</a>
    <li><a href="#ref-for-entry-query-access①⓪">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="entry-request-access">
   <b><a href="#entry-request-access">#entry-request-access</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-entry-request-access">2.1. Concepts</a>
    <li><a href="#ref-for-entry-request-access①">2.3.2. The createWritable() method</a>
    <li><a href="#ref-for-entry-request-access②">2.3.3. The createSyncAccessHandle() method</a>
    <li><a href="#ref-for-entry-request-access③">2.4.2. The getFileHandle() method</a> <a href="#ref-for-entry-request-access④">(2)</a>
    <li><a href="#ref-for-entry-request-access⑤">2.4.3. The getDirectoryHandle() method</a> <a href="#ref-for-entry-request-access⑥">(2)</a>
    <li><a href="#ref-for-entry-request-access⑦">2.4.4. The removeEntry() method</a>
    <li><a href="#ref-for-entry-request-access⑧">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="entry-name">
   <b><a href="#entry-name">#entry-name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-entry-name">2.1. Concepts</a>
    <li><a href="#ref-for-entry-name①">2.2. The FileSystemHandle interface</a> <a href="#ref-for-entry-name②">(2)</a>
    <li><a href="#ref-for-entry-name③">2.3.1. The getFile() method</a> <a href="#ref-for-entry-name④">(2)</a>
    <li><a href="#ref-for-entry-name⑤">2.4.1. Directory iteration</a> <a href="#ref-for-entry-name⑥">(2)</a> <a href="#ref-for-entry-name⑦">(3)</a>
    <li><a href="#ref-for-entry-name⑧">2.4.2. The getFileHandle() method</a> <a href="#ref-for-entry-name⑨">(2)</a>
    <li><a href="#ref-for-entry-name①⓪">2.4.3. The getDirectoryHandle() method</a> <a href="#ref-for-entry-name①①">(2)</a>
    <li><a href="#ref-for-entry-name①②">2.4.4. The removeEntry() method</a>
    <li><a href="#ref-for-entry-name①③">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="valid-file-name">
   <b><a href="#valid-file-name">#valid-file-name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-valid-file-name">2.1. Concepts</a>
    <li><a href="#ref-for-valid-file-name①">2.4.2. The getFileHandle() method</a>
    <li><a href="#ref-for-valid-file-name②">2.4.3. The getDirectoryHandle() method</a>
    <li><a href="#ref-for-valid-file-name③">2.4.4. The removeEntry() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="file">
   <b><a href="#file">#file</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-file">2.1. Concepts</a> <a href="#ref-for-file①">(2)</a> <a href="#ref-for-file②">(3)</a> <a href="#ref-for-file③">(4)</a>
    <li><a href="#ref-for-file④">2.2. The FileSystemHandle interface</a>
    <li><a href="#ref-for-file⑤">2.3. The FileSystemFileHandle interface</a>
    <li><a href="#ref-for-file⑥">2.4.1. Directory iteration</a>
    <li><a href="#ref-for-file⑦">2.4.2. The getFileHandle() method</a>
    <li><a href="#ref-for-file⑧">2.4.3. The getDirectoryHandle() method</a>
    <li><a href="#ref-for-file⑨">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-file①⓪">(2)</a>
    <li><a href="#ref-for-file①①">2.6. The FileSystemSyncAccessHandle interface</a> <a href="#ref-for-file①②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="file-entry-binary-data">
   <b><a href="#file-entry-binary-data">#file-entry-binary-data</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-file-entry-binary-data">2.1. Concepts</a>
    <li><a href="#ref-for-file-entry-binary-data①">2.3.1. The getFile() method</a>
    <li><a href="#ref-for-file-entry-binary-data②">2.3.2. The createWritable() method</a>
    <li><a href="#ref-for-file-entry-binary-data③">2.4.2. The getFileHandle() method</a>
    <li><a href="#ref-for-file-entry-binary-data④">2.5. The FileSystemWritableFileStream interface</a>
    <li><a href="#ref-for-file-entry-binary-data⑤">2.6.1. The read() method</a>
    <li><a href="#ref-for-file-entry-binary-data⑥">2.6.2. The write() method</a> <a href="#ref-for-file-entry-binary-data⑦">(2)</a> <a href="#ref-for-file-entry-binary-data⑧">(3)</a>
    <li><a href="#ref-for-file-entry-binary-data⑨">2.6.3. The truncate() method</a> <a href="#ref-for-file-entry-binary-data①⓪">(2)</a> <a href="#ref-for-file-entry-binary-data①①">(3)</a> <a href="#ref-for-file-entry-binary-data①②">(4)</a>
    <li><a href="#ref-for-file-entry-binary-data①③">2.6.4. The getSize() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="file-entry-modification-timestamp">
   <b><a href="#file-entry-modification-timestamp">#file-entry-modification-timestamp</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-file-entry-modification-timestamp">2.1. Concepts</a>
    <li><a href="#ref-for-file-entry-modification-timestamp①">2.3.1. The getFile() method</a>
    <li><a href="#ref-for-file-entry-modification-timestamp②">2.4.2. The getFileHandle() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="file-entry-lock">
   <b><a href="#file-entry-lock">#file-entry-lock</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-file-entry-lock">2.1. Concepts</a> <a href="#ref-for-file-entry-lock①">(2)</a> <a href="#ref-for-file-entry-lock②">(3)</a> <a href="#ref-for-file-entry-lock③">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="file-entry-shared-lock-count">
   <b><a href="#file-entry-shared-lock-count">#file-entry-shared-lock-count</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-file-entry-shared-lock-count">2.1. Concepts</a> <a href="#ref-for-file-entry-shared-lock-count①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="file-entry-lock-take">
   <b><a href="#file-entry-lock-take">#file-entry-lock-take</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-file-entry-lock-take">2.3.2. The createWritable() method</a> <a href="#ref-for-file-entry-lock-take①">(2)</a>
    <li><a href="#ref-for-file-entry-lock-take②">2.3.3. The createSyncAccessHandle() method</a> <a href="#ref-for-file-entry-lock-take③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="file-entry-lock-release">
   <b><a href="#file-entry-lock-release">#file-entry-lock-release</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-file-entry-lock-release">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-file-entry-lock-release①">(2)</a>
    <li><a href="#ref-for-file-entry-lock-release②">2.6.6. The close() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="directory">
   <b><a href="#directory">#directory</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-directory">2.1. Concepts</a> <a href="#ref-for-directory①">(2)</a> <a href="#ref-for-directory②">(3)</a> <a href="#ref-for-directory③">(4)</a>
    <li><a href="#ref-for-directory④">2.4. The FileSystemDirectoryHandle interface</a>
    <li><a href="#ref-for-directory⑤">2.4.2. The getFileHandle() method</a>
    <li><a href="#ref-for-directory⑥">2.4.3. The getDirectoryHandle() method</a>
    <li><a href="#ref-for-directory⑦">2.4.4. The removeEntry() method</a>
    <li><a href="#ref-for-directory⑧">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="directory-entry-children">
   <b><a href="#directory-entry-children">#directory-entry-children</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-directory-entry-children">2.1. Concepts</a> <a href="#ref-for-directory-entry-children①">(2)</a> <a href="#ref-for-directory-entry-children②">(3)</a>
    <li><a href="#ref-for-directory-entry-children③">2.4.1. Directory iteration</a>
    <li><a href="#ref-for-directory-entry-children④">2.4.2. The getFileHandle() method</a> <a href="#ref-for-directory-entry-children⑤">(2)</a>
    <li><a href="#ref-for-directory-entry-children⑥">2.4.3. The getDirectoryHandle() method</a> <a href="#ref-for-directory-entry-children⑦">(2)</a> <a href="#ref-for-directory-entry-children⑧">(3)</a>
    <li><a href="#ref-for-directory-entry-children⑨">2.4.4. The removeEntry() method</a> <a href="#ref-for-directory-entry-children①⓪">(2)</a> <a href="#ref-for-directory-entry-children①①">(3)</a>
    <li><a href="#ref-for-directory-entry-children①②">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="entry-parent">
   <b><a href="#entry-parent">#entry-parent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-entry-parent">2.1. Concepts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="entry-the-same-as">
   <b><a href="#entry-the-same-as">#entry-the-same-as</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-entry-the-same-as">2.1. Concepts</a>
    <li><a href="#ref-for-entry-the-same-as①">2.2.1. The isSameEntry() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="entry-resolve">
   <b><a href="#entry-resolve">#entry-resolve</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-entry-resolve">2.1. Concepts</a>
    <li><a href="#ref-for-entry-resolve①">2.4.5. The resolve() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-filesystemhandlekind">
   <b><a href="#enumdef-filesystemhandlekind">#enumdef-filesystemhandlekind</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-filesystemhandlekind">2.2. The FileSystemHandle interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemhandlekind-file">
   <b><a href="#dom-filesystemhandlekind-file">#dom-filesystemhandlekind-file</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemhandlekind-file">2.2. The FileSystemHandle interface</a> <a href="#ref-for-dom-filesystemhandlekind-file①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemhandlekind-directory">
   <b><a href="#dom-filesystemhandlekind-directory">#dom-filesystemhandlekind-directory</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemhandlekind-directory">2.2. The FileSystemHandle interface</a> <a href="#ref-for-dom-filesystemhandlekind-directory①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="filesystemhandle">
   <b><a href="#filesystemhandle">#filesystemhandle</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-filesystemhandle">2.2. The FileSystemHandle interface</a> <a href="#ref-for-filesystemhandle①">(2)</a> <a href="#ref-for-filesystemhandle②">(3)</a> <a href="#ref-for-filesystemhandle③">(4)</a> <a href="#ref-for-filesystemhandle④">(5)</a> <a href="#ref-for-filesystemhandle⑤">(6)</a>
    <li><a href="#ref-for-filesystemhandle⑥">2.3. The FileSystemFileHandle interface</a> <a href="#ref-for-filesystemhandle⑦">(2)</a>
    <li><a href="#ref-for-filesystemhandle⑧">2.4. The FileSystemDirectoryHandle interface</a> <a href="#ref-for-filesystemhandle⑨">(2)</a> <a href="#ref-for-filesystemhandle①⓪">(3)</a> <a href="#ref-for-filesystemhandle①①">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="filesystemhandle-entry">
   <b><a href="#filesystemhandle-entry">#filesystemhandle-entry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-filesystemhandle-entry">2.1. Concepts</a>
    <li><a href="#ref-for-filesystemhandle-entry①">2.2. The FileSystemHandle interface</a> <a href="#ref-for-filesystemhandle-entry②">(2)</a>
    <li><a href="#ref-for-filesystemhandle-entry③">2.2.1. The isSameEntry() method</a> <a href="#ref-for-filesystemhandle-entry④">(2)</a>
    <li><a href="#ref-for-filesystemhandle-entry⑤">2.3. The FileSystemFileHandle interface</a>
    <li><a href="#ref-for-filesystemhandle-entry⑥">2.3.1. The getFile() method</a> <a href="#ref-for-filesystemhandle-entry⑦">(2)</a>
    <li><a href="#ref-for-filesystemhandle-entry⑧">2.3.2. The createWritable() method</a> <a href="#ref-for-filesystemhandle-entry⑨">(2)</a> <a href="#ref-for-filesystemhandle-entry①⓪">(3)</a>
    <li><a href="#ref-for-filesystemhandle-entry①①">2.3.3. The createSyncAccessHandle() method</a> <a href="#ref-for-filesystemhandle-entry①②">(2)</a> <a href="#ref-for-filesystemhandle-entry①③">(3)</a>
    <li><a href="#ref-for-filesystemhandle-entry①④">2.4. The FileSystemDirectoryHandle interface</a>
    <li><a href="#ref-for-filesystemhandle-entry①⑤">2.4.1. Directory iteration</a> <a href="#ref-for-filesystemhandle-entry①⑥">(2)</a> <a href="#ref-for-filesystemhandle-entry①⑦">(3)</a>
    <li><a href="#ref-for-filesystemhandle-entry①⑧">2.4.2. The getFileHandle() method</a> <a href="#ref-for-filesystemhandle-entry①⑨">(2)</a> <a href="#ref-for-filesystemhandle-entry②⓪">(3)</a> <a href="#ref-for-filesystemhandle-entry②①">(4)</a> <a href="#ref-for-filesystemhandle-entry②②">(5)</a>
    <li><a href="#ref-for-filesystemhandle-entry②③">2.4.3. The getDirectoryHandle() method</a> <a href="#ref-for-filesystemhandle-entry②④">(2)</a> <a href="#ref-for-filesystemhandle-entry②⑤">(3)</a> <a href="#ref-for-filesystemhandle-entry②⑥">(4)</a> <a href="#ref-for-filesystemhandle-entry②⑦">(5)</a>
    <li><a href="#ref-for-filesystemhandle-entry②⑧">2.4.4. The removeEntry() method</a> <a href="#ref-for-filesystemhandle-entry②⑨">(2)</a>
    <li><a href="#ref-for-filesystemhandle-entry③⓪">2.4.5. The resolve() method</a> <a href="#ref-for-filesystemhandle-entry③①">(2)</a>
    <li><a href="#ref-for-filesystemhandle-entry③②">2.6.6. The close() method</a>
    <li><a href="#ref-for-filesystemhandle-entry③③">3. Accessing the Origin Private File System</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemhandle-kind">
   <b><a href="#dom-filesystemhandle-kind">#dom-filesystemhandle-kind</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemhandle-kind">2.2. The FileSystemHandle interface</a> <a href="#ref-for-dom-filesystemhandle-kind①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemhandle-name">
   <b><a href="#dom-filesystemhandle-name">#dom-filesystemhandle-name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemhandle-name">2.2. The FileSystemHandle interface</a> <a href="#ref-for-dom-filesystemhandle-name①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemhandle-issameentry">
   <b><a href="#dom-filesystemhandle-issameentry">#dom-filesystemhandle-issameentry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemhandle-issameentry">2.2. The FileSystemHandle interface</a>
    <li><a href="#ref-for-dom-filesystemhandle-issameentry①">2.2.1. The isSameEntry() method</a> <a href="#ref-for-dom-filesystemhandle-issameentry②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-filesystemcreatewritableoptions">
   <b><a href="#dictdef-filesystemcreatewritableoptions">#dictdef-filesystemcreatewritableoptions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-filesystemcreatewritableoptions">2.3. The FileSystemFileHandle interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemcreatewritableoptions-keepexistingdata">
   <b><a href="#dom-filesystemcreatewritableoptions-keepexistingdata">#dom-filesystemcreatewritableoptions-keepexistingdata</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemcreatewritableoptions-keepexistingdata">2.3.2. The createWritable() method</a> <a href="#ref-for-dom-filesystemcreatewritableoptions-keepexistingdata①">(2)</a> <a href="#ref-for-dom-filesystemcreatewritableoptions-keepexistingdata②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="filesystemfilehandle">
   <b><a href="#filesystemfilehandle">#filesystemfilehandle</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-filesystemfilehandle">2.2. The FileSystemHandle interface</a>
    <li><a href="#ref-for-filesystemfilehandle①">2.3. The FileSystemFileHandle interface</a> <a href="#ref-for-filesystemfilehandle②">(2)</a> <a href="#ref-for-filesystemfilehandle③">(3)</a>
    <li><a href="#ref-for-filesystemfilehandle④">2.4. The FileSystemDirectoryHandle interface</a>
    <li><a href="#ref-for-filesystemfilehandle⑤">2.4.1. Directory iteration</a>
    <li><a href="#ref-for-filesystemfilehandle⑥">2.4.2. The getFileHandle() method</a> <a href="#ref-for-filesystemfilehandle⑦">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemfilehandle-getfile">
   <b><a href="#dom-filesystemfilehandle-getfile">#dom-filesystemfilehandle-getfile</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemfilehandle-getfile">2.3. The FileSystemFileHandle interface</a>
    <li><a href="#ref-for-dom-filesystemfilehandle-getfile①">2.3.1. The getFile() method</a> <a href="#ref-for-dom-filesystemfilehandle-getfile②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemfilehandle-createwritable">
   <b><a href="#dom-filesystemfilehandle-createwritable">#dom-filesystemfilehandle-createwritable</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemfilehandle-createwritable">2.3. The FileSystemFileHandle interface</a>
    <li><a href="#ref-for-dom-filesystemfilehandle-createwritable①">2.3.2. The createWritable() method</a> <a href="#ref-for-dom-filesystemfilehandle-createwritable②">(2)</a> <a href="#ref-for-dom-filesystemfilehandle-createwritable③">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemfilehandle-createsyncaccesshandle">
   <b><a href="#dom-filesystemfilehandle-createsyncaccesshandle">#dom-filesystemfilehandle-createsyncaccesshandle</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemfilehandle-createsyncaccesshandle">2.3. The FileSystemFileHandle interface</a>
    <li><a href="#ref-for-dom-filesystemfilehandle-createsyncaccesshandle①">2.3.3. The createSyncAccessHandle() method</a> <a href="#ref-for-dom-filesystemfilehandle-createsyncaccesshandle②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-filesystemgetfileoptions">
   <b><a href="#dictdef-filesystemgetfileoptions">#dictdef-filesystemgetfileoptions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-filesystemgetfileoptions">2.4. The FileSystemDirectoryHandle interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemgetfileoptions-create">
   <b><a href="#dom-filesystemgetfileoptions-create">#dom-filesystemgetfileoptions-create</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemgetfileoptions-create">2.4.2. The getFileHandle() method</a> <a href="#ref-for-dom-filesystemgetfileoptions-create①">(2)</a> <a href="#ref-for-dom-filesystemgetfileoptions-create②">(3)</a> <a href="#ref-for-dom-filesystemgetfileoptions-create③">(4)</a> <a href="#ref-for-dom-filesystemgetfileoptions-create④">(5)</a>
    <li><a href="#ref-for-dom-filesystemgetfileoptions-create⑤">2.4.3. The getDirectoryHandle() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-filesystemgetdirectoryoptions">
   <b><a href="#dictdef-filesystemgetdirectoryoptions">#dictdef-filesystemgetdirectoryoptions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-filesystemgetdirectoryoptions">2.4. The FileSystemDirectoryHandle interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemgetdirectoryoptions-create">
   <b><a href="#dom-filesystemgetdirectoryoptions-create">#dom-filesystemgetdirectoryoptions-create</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemgetdirectoryoptions-create">2.4.3. The getDirectoryHandle() method</a> <a href="#ref-for-dom-filesystemgetdirectoryoptions-create①">(2)</a> <a href="#ref-for-dom-filesystemgetdirectoryoptions-create②">(3)</a> <a href="#ref-for-dom-filesystemgetdirectoryoptions-create③">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-filesystemremoveoptions">
   <b><a href="#dictdef-filesystemremoveoptions">#dictdef-filesystemremoveoptions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-filesystemremoveoptions">2.4. The FileSystemDirectoryHandle interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemremoveoptions-recursive">
   <b><a href="#dom-filesystemremoveoptions-recursive">#dom-filesystemremoveoptions-recursive</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemremoveoptions-recursive">2.4.4. The removeEntry() method</a> <a href="#ref-for-dom-filesystemremoveoptions-recursive①">(2)</a> <a href="#ref-for-dom-filesystemremoveoptions-recursive②">(3)</a> <a href="#ref-for-dom-filesystemremoveoptions-recursive③">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="filesystemdirectoryhandle">
   <b><a href="#filesystemdirectoryhandle">#filesystemdirectoryhandle</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-filesystemdirectoryhandle">2.2. The FileSystemHandle interface</a>
    <li><a href="#ref-for-filesystemdirectoryhandle①">2.4. The FileSystemDirectoryHandle interface</a> <a href="#ref-for-filesystemdirectoryhandle②">(2)</a> <a href="#ref-for-filesystemdirectoryhandle③">(3)</a> <a href="#ref-for-filesystemdirectoryhandle④">(4)</a>
    <li><a href="#ref-for-filesystemdirectoryhandle⑤">2.4.1. Directory iteration</a> <a href="#ref-for-filesystemdirectoryhandle⑥">(2)</a> <a href="#ref-for-filesystemdirectoryhandle⑦">(3)</a>
    <li><a href="#ref-for-filesystemdirectoryhandle⑧">2.4.3. The getDirectoryHandle() method</a> <a href="#ref-for-filesystemdirectoryhandle⑨">(2)</a>
    <li><a href="#ref-for-filesystemdirectoryhandle①⓪">3. Accessing the Origin Private File System</a> <a href="#ref-for-filesystemdirectoryhandle①①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="filesystemdirectoryhandle-iterator-past-results">
   <b><a href="#filesystemdirectoryhandle-iterator-past-results">#filesystemdirectoryhandle-iterator-past-results</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-filesystemdirectoryhandle-iterator-past-results">2.4.1. Directory iteration</a> <a href="#ref-for-filesystemdirectoryhandle-iterator-past-results①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemdirectoryhandle-getfilehandle">
   <b><a href="#dom-filesystemdirectoryhandle-getfilehandle">#dom-filesystemdirectoryhandle-getfilehandle</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemdirectoryhandle-getfilehandle">2.4. The FileSystemDirectoryHandle interface</a>
    <li><a href="#ref-for-dom-filesystemdirectoryhandle-getfilehandle①">2.4.2. The getFileHandle() method</a> <a href="#ref-for-dom-filesystemdirectoryhandle-getfilehandle②">(2)</a> <a href="#ref-for-dom-filesystemdirectoryhandle-getfilehandle③">(3)</a> <a href="#ref-for-dom-filesystemdirectoryhandle-getfilehandle④">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemdirectoryhandle-getdirectoryhandle">
   <b><a href="#dom-filesystemdirectoryhandle-getdirectoryhandle">#dom-filesystemdirectoryhandle-getdirectoryhandle</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle">2.4. The FileSystemDirectoryHandle interface</a>
    <li><a href="#ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle①">2.4.3. The getDirectoryHandle() method</a> <a href="#ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle②">(2)</a> <a href="#ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle③">(3)</a> <a href="#ref-for-dom-filesystemdirectoryhandle-getdirectoryhandle④">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemdirectoryhandle-removeentry">
   <b><a href="#dom-filesystemdirectoryhandle-removeentry">#dom-filesystemdirectoryhandle-removeentry</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemdirectoryhandle-removeentry">2.4. The FileSystemDirectoryHandle interface</a>
    <li><a href="#ref-for-dom-filesystemdirectoryhandle-removeentry①">2.4.4. The removeEntry() method</a> <a href="#ref-for-dom-filesystemdirectoryhandle-removeentry②">(2)</a> <a href="#ref-for-dom-filesystemdirectoryhandle-removeentry③">(3)</a> <a href="#ref-for-dom-filesystemdirectoryhandle-removeentry④">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemdirectoryhandle-resolve">
   <b><a href="#dom-filesystemdirectoryhandle-resolve">#dom-filesystemdirectoryhandle-resolve</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemdirectoryhandle-resolve">2.4. The FileSystemDirectoryHandle interface</a>
    <li><a href="#ref-for-dom-filesystemdirectoryhandle-resolve①">2.4.5. The resolve() method</a> <a href="#ref-for-dom-filesystemdirectoryhandle-resolve②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-writecommandtype">
   <b><a href="#enumdef-writecommandtype">#enumdef-writecommandtype</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-writecommandtype">2.5. The FileSystemWritableFileStream interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-writecommandtype-write">
   <b><a href="#dom-writecommandtype-write">#dom-writecommandtype-write</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-writecommandtype-write">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-dom-writecommandtype-write①">(2)</a>
    <li><a href="#ref-for-dom-writecommandtype-write②">2.5.1. The write() method</a> <a href="#ref-for-dom-writecommandtype-write③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-writecommandtype-seek">
   <b><a href="#dom-writecommandtype-seek">#dom-writecommandtype-seek</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-writecommandtype-seek">2.5. The FileSystemWritableFileStream interface</a>
    <li><a href="#ref-for-dom-writecommandtype-seek①">2.5.1. The write() method</a>
    <li><a href="#ref-for-dom-writecommandtype-seek②">2.5.2. The seek() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-writecommandtype-truncate">
   <b><a href="#dom-writecommandtype-truncate">#dom-writecommandtype-truncate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-writecommandtype-truncate">2.5. The FileSystemWritableFileStream interface</a>
    <li><a href="#ref-for-dom-writecommandtype-truncate①">2.5.1. The write() method</a> <a href="#ref-for-dom-writecommandtype-truncate②">(2)</a>
    <li><a href="#ref-for-dom-writecommandtype-truncate③">2.5.3. The truncate() method</a> <a href="#ref-for-dom-writecommandtype-truncate④">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-writeparams">
   <b><a href="#dictdef-writeparams">#dictdef-writeparams</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-writeparams">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-dictdef-writeparams①">(2)</a> <a href="#ref-for-dictdef-writeparams②">(3)</a> <a href="#ref-for-dictdef-writeparams③">(4)</a> <a href="#ref-for-dictdef-writeparams④">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-writeparams-type">
   <b><a href="#dom-writeparams-type">#dom-writeparams-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-writeparams-type">2.5. The FileSystemWritableFileStream interface</a>
    <li><a href="#ref-for-dom-writeparams-type①">2.5.1. The write() method</a> <a href="#ref-for-dom-writeparams-type②">(2)</a> <a href="#ref-for-dom-writeparams-type③">(3)</a> <a href="#ref-for-dom-writeparams-type④">(4)</a>
    <li><a href="#ref-for-dom-writeparams-type⑤">2.5.2. The seek() method</a>
    <li><a href="#ref-for-dom-writeparams-type⑥">2.5.3. The truncate() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-writeparams-size">
   <b><a href="#dom-writeparams-size">#dom-writeparams-size</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-writeparams-size">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-dom-writeparams-size①">(2)</a>
    <li><a href="#ref-for-dom-writeparams-size②">2.5.1. The write() method</a>
    <li><a href="#ref-for-dom-writeparams-size③">2.5.3. The truncate() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-writeparams-position">
   <b><a href="#dom-writeparams-position">#dom-writeparams-position</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-writeparams-position">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-dom-writeparams-position①">(2)</a> <a href="#ref-for-dom-writeparams-position②">(3)</a> <a href="#ref-for-dom-writeparams-position③">(4)</a>
    <li><a href="#ref-for-dom-writeparams-position④">2.5.1. The write() method</a> <a href="#ref-for-dom-writeparams-position⑤">(2)</a>
    <li><a href="#ref-for-dom-writeparams-position⑥">2.5.2. The seek() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-writeparams-data">
   <b><a href="#dom-writeparams-data">#dom-writeparams-data</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-writeparams-data">2.5. The FileSystemWritableFileStream interface</a>
    <li><a href="#ref-for-dom-writeparams-data①">2.5.1. The write() method</a> <a href="#ref-for-dom-writeparams-data②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="typedefdef-filesystemwritechunktype">
   <b><a href="#typedefdef-filesystemwritechunktype">#typedefdef-filesystemwritechunktype</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-typedefdef-filesystemwritechunktype">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-typedefdef-filesystemwritechunktype①">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="filesystemwritablefilestream">
   <b><a href="#filesystemwritablefilestream">#filesystemwritablefilestream</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-filesystemwritablefilestream">2.1. Concepts</a>
    <li><a href="#ref-for-filesystemwritablefilestream①">2.3. The FileSystemFileHandle interface</a>
    <li><a href="#ref-for-filesystemwritablefilestream②">2.3.2. The createWritable() method</a> <a href="#ref-for-filesystemwritablefilestream③">(2)</a>
    <li><a href="#ref-for-filesystemwritablefilestream④">2.3.3. The createSyncAccessHandle() method</a>
    <li><a href="#ref-for-filesystemwritablefilestream⑤">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-filesystemwritablefilestream⑥">(2)</a> <a href="#ref-for-filesystemwritablefilestream⑦">(3)</a> <a href="#ref-for-filesystemwritablefilestream⑧">(4)</a> <a href="#ref-for-filesystemwritablefilestream⑨">(5)</a> <a href="#ref-for-filesystemwritablefilestream①⓪">(6)</a> <a href="#ref-for-filesystemwritablefilestream①①">(7)</a> <a href="#ref-for-filesystemwritablefilestream①②">(8)</a> <a href="#ref-for-filesystemwritablefilestream①③">(9)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="filesystemwritablefilestream-file">
   <b><a href="#filesystemwritablefilestream-file">#filesystemwritablefilestream-file</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-filesystemwritablefilestream-file">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-filesystemwritablefilestream-file①">(2)</a> <a href="#ref-for-filesystemwritablefilestream-file②">(3)</a> <a href="#ref-for-filesystemwritablefilestream-file③">(4)</a> <a href="#ref-for-filesystemwritablefilestream-file④">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="filesystemwritablefilestream-buffer">
   <b><a href="#filesystemwritablefilestream-buffer">#filesystemwritablefilestream-buffer</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-filesystemwritablefilestream-buffer">2.3.2. The createWritable() method</a>
    <li><a href="#ref-for-filesystemwritablefilestream-buffer①">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-filesystemwritablefilestream-buffer②">(2)</a> <a href="#ref-for-filesystemwritablefilestream-buffer③">(3)</a> <a href="#ref-for-filesystemwritablefilestream-buffer④">(4)</a> <a href="#ref-for-filesystemwritablefilestream-buffer⑤">(5)</a> <a href="#ref-for-filesystemwritablefilestream-buffer⑥">(6)</a> <a href="#ref-for-filesystemwritablefilestream-buffer⑦">(7)</a> <a href="#ref-for-filesystemwritablefilestream-buffer⑧">(8)</a> <a href="#ref-for-filesystemwritablefilestream-buffer⑨">(9)</a> <a href="#ref-for-filesystemwritablefilestream-buffer①⓪">(10)</a> <a href="#ref-for-filesystemwritablefilestream-buffer①①">(11)</a> <a href="#ref-for-filesystemwritablefilestream-buffer①②">(12)</a> <a href="#ref-for-filesystemwritablefilestream-buffer①③">(13)</a> <a href="#ref-for-filesystemwritablefilestream-buffer①④">(14)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="filesystemwritablefilestream-seekoffset">
   <b><a href="#filesystemwritablefilestream-seekoffset">#filesystemwritablefilestream-seekoffset</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-filesystemwritablefilestream-seekoffset">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-filesystemwritablefilestream-seekoffset①">(2)</a> <a href="#ref-for-filesystemwritablefilestream-seekoffset②">(3)</a> <a href="#ref-for-filesystemwritablefilestream-seekoffset③">(4)</a> <a href="#ref-for-filesystemwritablefilestream-seekoffset④">(5)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="create-a-new-filesystemwritablefilestream">
   <b><a href="#create-a-new-filesystemwritablefilestream">#create-a-new-filesystemwritablefilestream</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-create-a-new-filesystemwritablefilestream">2.3.2. The createWritable() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="write-a-chunk">
   <b><a href="#write-a-chunk">#write-a-chunk</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-write-a-chunk">2.5. The FileSystemWritableFileStream interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemwritablefilestream-write">
   <b><a href="#dom-filesystemwritablefilestream-write">#dom-filesystemwritablefilestream-write</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemwritablefilestream-write">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-dom-filesystemwritablefilestream-write①">(2)</a>
    <li><a href="#ref-for-dom-filesystemwritablefilestream-write②">2.5.1. The write() method</a> <a href="#ref-for-dom-filesystemwritablefilestream-write③">(2)</a> <a href="#ref-for-dom-filesystemwritablefilestream-write④">(3)</a> <a href="#ref-for-dom-filesystemwritablefilestream-write⑤">(4)</a> <a href="#ref-for-dom-filesystemwritablefilestream-write⑥">(5)</a> <a href="#ref-for-dom-filesystemwritablefilestream-write⑦">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemwritablefilestream-seek">
   <b><a href="#dom-filesystemwritablefilestream-seek">#dom-filesystemwritablefilestream-seek</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemwritablefilestream-seek">2.5. The FileSystemWritableFileStream interface</a>
    <li><a href="#ref-for-dom-filesystemwritablefilestream-seek①">2.5.2. The seek() method</a> <a href="#ref-for-dom-filesystemwritablefilestream-seek②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemwritablefilestream-truncate">
   <b><a href="#dom-filesystemwritablefilestream-truncate">#dom-filesystemwritablefilestream-truncate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemwritablefilestream-truncate">2.5. The FileSystemWritableFileStream interface</a>
    <li><a href="#ref-for-dom-filesystemwritablefilestream-truncate①">2.5.3. The truncate() method</a> <a href="#ref-for-dom-filesystemwritablefilestream-truncate②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-filesystemreadwriteoptions">
   <b><a href="#dictdef-filesystemreadwriteoptions">#dictdef-filesystemreadwriteoptions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-filesystemreadwriteoptions">2.6. The FileSystemSyncAccessHandle interface</a> <a href="#ref-for-dictdef-filesystemreadwriteoptions①">(2)</a>
    <li><a href="#ref-for-dictdef-filesystemreadwriteoptions②">2.6.1. The read() method</a>
    <li><a href="#ref-for-dictdef-filesystemreadwriteoptions③">2.6.2. The write() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemreadwriteoptions-at">
   <b><a href="#dom-filesystemreadwriteoptions-at">#dom-filesystemreadwriteoptions-at</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemreadwriteoptions-at">2.6.1. The read() method</a> <a href="#ref-for-dom-filesystemreadwriteoptions-at①">(2)</a>
    <li><a href="#ref-for-dom-filesystemreadwriteoptions-at②">2.6.2. The write() method</a> <a href="#ref-for-dom-filesystemreadwriteoptions-at③">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="filesystemsyncaccesshandle">
   <b><a href="#filesystemsyncaccesshandle">#filesystemsyncaccesshandle</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-filesystemsyncaccesshandle">2.1. Concepts</a>
    <li><a href="#ref-for-filesystemsyncaccesshandle①">2.3. The FileSystemFileHandle interface</a>
    <li><a href="#ref-for-filesystemsyncaccesshandle②">2.3.2. The createWritable() method</a>
    <li><a href="#ref-for-filesystemsyncaccesshandle③">2.3.3. The createSyncAccessHandle() method</a> <a href="#ref-for-filesystemsyncaccesshandle④">(2)</a> <a href="#ref-for-filesystemsyncaccesshandle⑤">(3)</a> <a href="#ref-for-filesystemsyncaccesshandle⑥">(4)</a>
    <li><a href="#ref-for-filesystemsyncaccesshandle⑦">2.6. The FileSystemSyncAccessHandle interface</a> <a href="#ref-for-filesystemsyncaccesshandle⑧">(2)</a> <a href="#ref-for-filesystemsyncaccesshandle⑨">(3)</a> <a href="#ref-for-filesystemsyncaccesshandle①⓪">(4)</a> <a href="#ref-for-filesystemsyncaccesshandle①①">(5)</a> <a href="#ref-for-filesystemsyncaccesshandle①②">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemsyncaccesshandle-read">
   <b><a href="#dom-filesystemsyncaccesshandle-read">#dom-filesystemsyncaccesshandle-read</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemsyncaccesshandle-read">2.6.1. The read() method</a> <a href="#ref-for-dom-filesystemsyncaccesshandle-read①">(2)</a> <a href="#ref-for-dom-filesystemsyncaccesshandle-read②">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemsyncaccesshandle-write">
   <b><a href="#dom-filesystemsyncaccesshandle-write">#dom-filesystemsyncaccesshandle-write</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemsyncaccesshandle-write">2.6.2. The write() method</a> <a href="#ref-for-dom-filesystemsyncaccesshandle-write①">(2)</a> <a href="#ref-for-dom-filesystemsyncaccesshandle-write②">(3)</a>
    <li><a href="#ref-for-dom-filesystemsyncaccesshandle-write③">2.6.5. The flush() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="filesystemsyncaccesshandle-file">
   <b><a href="#filesystemsyncaccesshandle-file">#filesystemsyncaccesshandle-file</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-filesystemsyncaccesshandle-file">2.6. The FileSystemSyncAccessHandle interface</a>
    <li><a href="#ref-for-filesystemsyncaccesshandle-file①">2.6.1. The read() method</a>
    <li><a href="#ref-for-filesystemsyncaccesshandle-file②">2.6.2. The write() method</a> <a href="#ref-for-filesystemsyncaccesshandle-file③">(2)</a> <a href="#ref-for-filesystemsyncaccesshandle-file④">(3)</a>
    <li><a href="#ref-for-filesystemsyncaccesshandle-file⑤">2.6.3. The truncate() method</a> <a href="#ref-for-filesystemsyncaccesshandle-file⑥">(2)</a> <a href="#ref-for-filesystemsyncaccesshandle-file⑦">(3)</a> <a href="#ref-for-filesystemsyncaccesshandle-file⑧">(4)</a> <a href="#ref-for-filesystemsyncaccesshandle-file⑨">(5)</a> <a href="#ref-for-filesystemsyncaccesshandle-file①⓪">(6)</a>
    <li><a href="#ref-for-filesystemsyncaccesshandle-file①①">2.6.4. The getSize() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="filesystemsyncaccesshandle-state">
   <b><a href="#filesystemsyncaccesshandle-state">#filesystemsyncaccesshandle-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-filesystemsyncaccesshandle-state">2.6. The FileSystemSyncAccessHandle interface</a>
    <li><a href="#ref-for-filesystemsyncaccesshandle-state①">2.6.1. The read() method</a>
    <li><a href="#ref-for-filesystemsyncaccesshandle-state②">2.6.2. The write() method</a>
    <li><a href="#ref-for-filesystemsyncaccesshandle-state③">2.6.3. The truncate() method</a>
    <li><a href="#ref-for-filesystemsyncaccesshandle-state④">2.6.4. The getSize() method</a>
    <li><a href="#ref-for-filesystemsyncaccesshandle-state⑤">2.6.6. The close() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="create-a-new-filesystemsyncaccesshandle">
   <b><a href="#create-a-new-filesystemsyncaccesshandle">#create-a-new-filesystemsyncaccesshandle</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-create-a-new-filesystemsyncaccesshandle">2.3.3. The createSyncAccessHandle() method</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemsyncaccesshandle-truncate">
   <b><a href="#dom-filesystemsyncaccesshandle-truncate">#dom-filesystemsyncaccesshandle-truncate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemsyncaccesshandle-truncate">2.6. The FileSystemSyncAccessHandle interface</a>
    <li><a href="#ref-for-dom-filesystemsyncaccesshandle-truncate①">2.6.3. The truncate() method</a> <a href="#ref-for-dom-filesystemsyncaccesshandle-truncate②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemsyncaccesshandle-getsize">
   <b><a href="#dom-filesystemsyncaccesshandle-getsize">#dom-filesystemsyncaccesshandle-getsize</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemsyncaccesshandle-getsize">2.6. The FileSystemSyncAccessHandle interface</a>
    <li><a href="#ref-for-dom-filesystemsyncaccesshandle-getsize①">2.6.4. The getSize() method</a> <a href="#ref-for-dom-filesystemsyncaccesshandle-getsize②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemsyncaccesshandle-flush">
   <b><a href="#dom-filesystemsyncaccesshandle-flush">#dom-filesystemsyncaccesshandle-flush</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemsyncaccesshandle-flush">2.6. The FileSystemSyncAccessHandle interface</a>
    <li><a href="#ref-for-dom-filesystemsyncaccesshandle-flush①">2.6.5. The flush() method</a> <a href="#ref-for-dom-filesystemsyncaccesshandle-flush②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-filesystemsyncaccesshandle-close">
   <b><a href="#dom-filesystemsyncaccesshandle-close">#dom-filesystemsyncaccesshandle-close</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-filesystemsyncaccesshandle-close">2.6. The FileSystemSyncAccessHandle interface</a>
    <li><a href="#ref-for-dom-filesystemsyncaccesshandle-close①">2.6.6. The close() method</a> <a href="#ref-for-dom-filesystemsyncaccesshandle-close②">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="origin-private-file-system">
   <b><a href="#origin-private-file-system">#origin-private-file-system</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-origin-private-file-system">2.3.3. The createSyncAccessHandle() method</a> <a href="#ref-for-origin-private-file-system①">(2)</a>
    <li><a href="#ref-for-origin-private-file-system②">2.5. The FileSystemWritableFileStream interface</a> <a href="#ref-for-origin-private-file-system③">(2)</a>
    <li><a href="#ref-for-origin-private-file-system④">3. Accessing the Origin Private File System</a> <a href="#ref-for-origin-private-file-system⑤">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-storagemanager-getdirectory">
   <b><a href="#dom-storagemanager-getdirectory">#dom-storagemanager-getdirectory</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-storagemanager-getdirectory">1. Introduction</a>
    <li><a href="#ref-for-dom-storagemanager-getdirectory①">3. Accessing the Origin Private File System</a> <a href="#ref-for-dom-storagemanager-getdirectory②">(2)</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

document.body.addEventListener("click", function(e) {
    var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
    // Find the dfn element or panel, if any, that was clicked on.
    var el = e.target;
    var target;
    var hitALink = false;
    while(el.parentElement) {
        if(el.tagName == "A") {
            // Clicking on a link in a <dfn> shouldn't summon the panel
            hitALink = true;
        }
        if(el.classList.contains("dfn-paneled")) {
            target = "dfn";
            break;
        }
        if(el.classList.contains("dfn-panel")) {
            target = "dfn-panel";
            break;
        }
        el = el.parentElement;
    }
    if(target != "dfn-panel") {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
            el.classList.remove("on");
            el.classList.remove("activated");
        });
    }
    if(target == "dfn" && !hitALink) {
        // open the panel
        var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
        if(dfnPanel) {
            dfnPanel.classList.add("on");
            var rect = el.getBoundingClientRect();
            dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
            dfnPanel.style.top = window.scrollY + rect.top + "px";
            var panelRect = dfnPanel.getBoundingClientRect();
            var panelWidth = panelRect.right - panelRect.left;
            if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                // Reposition, because the panel is overflowing
                dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
            }
        } else {
            console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
        }
    } else if(target == "dfn-panel") {
        // Switch it to "activated" state, which pins it.
        el.classList.add("activated");
        el.style.left = null;
        el.style.top = null;
    }

});
</script>
<script>/* script-var-click-highlighting */

    document.addEventListener("click", e=>{
        if(e.target.nodeName == "VAR") {
            highlightSameAlgoVars(e.target);
        }
    });
    {
        const indexCounts = new Map();
        const indexNames = new Map();
        function highlightSameAlgoVars(v) {
            // Find the algorithm container.
            let algoContainer = null;
            let searchEl = v;
            while(algoContainer == null && searchEl != document.body) {
                searchEl = searchEl.parentNode;
                if(searchEl.hasAttribute("data-algorithm")) {
                    algoContainer = searchEl;
                }
            }

            // Not highlighting document-global vars,
            // too likely to be unrelated.
            if(algoContainer == null) return;

            const algoName = algoContainer.getAttribute("data-algorithm");
            const varName = getVarName(v);
            const addClass = !v.classList.contains("selected");
            let highlightClass = null;
            if(addClass) {
                const index = chooseHighlightIndex(algoName, varName);
                indexCounts.get(algoName)[index] += 1;
                indexNames.set(algoName+"///"+varName, index);
                highlightClass = nameFromIndex(index);
            } else {
                const index = previousHighlightIndex(algoName, varName);
                indexCounts.get(algoName)[index] -= 1;
                highlightClass = nameFromIndex(index);
            }

            // Find all same-name vars, and toggle their class appropriately.
            for(const el of algoContainer.querySelectorAll("var")) {
                if(getVarName(el) == varName) {
                    el.classList.toggle("selected", addClass);
                    el.classList.toggle(highlightClass, addClass);
                }
            }
        }
        function getVarName(el) {
            return el.textContent.replace(/(\s|\xa0)+/, " ").trim();
        }
        function chooseHighlightIndex(algoName, varName) {
            let indexes = null;
            if(indexCounts.has(algoName)) {
                indexes = indexCounts.get(algoName);
            } else {
                // 7 classes right now
                indexes = [0,0,0,0,0,0,0];
                indexCounts.set(algoName, indexes);
            }

            // If the element was recently unclicked,
            // *and* that color is still unclaimed,
            // give it back the same color.
            const lastIndex = previousHighlightIndex(algoName, varName);
            if(indexes[lastIndex] === 0) return lastIndex;

            // Find the earliest index with the lowest count.
            const minCount = Math.min.apply(null, indexes);
            let index = null;
            for(var i = 0; i < indexes.length; i++) {
                if(indexes[i] == minCount) {
                    return i;
                }
            }
        }
        function previousHighlightIndex(algoName, varName) {
            return indexNames.get(algoName+"///"+varName);
        }
        function nameFromIndex(index) {
            return "selected" + index;
        }
    }
    </script>